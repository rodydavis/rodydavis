---
title: Lit Sheet Music
description: >
  Learn how to create a Lit web component that renders MusicXML using
  OpenSheetMusicDisplay, allowing you to display sheet music dynamically from a
  source attribute or inline XML.
date: '2025-01-20 02:46:46.248Z'
draft: false
tags:
  - Web Components
  - Lit
  - Music
  - Sheet Music
summary: >-
  Render sheet music from MusicXML files in a web component using Lit,
  OpenSheetMusicDisplay, and Vite, with automatic resizing for different screen
  widths.
embedding: >-
  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
related:
  - codemirror-dynamic-theme.md
  - lit-vscode-extension.md
  - flutter-and-lit.md
  - lit-rich-text-editor.md
  - figma-and-lit.md
---

In this article I will go over how to set up a [Lit](https://lit.dev/) web component and use it to render [musicxml](https://www.musicxml.com/) from a src attribute or inline xml using [opensheetmusicdisplay](https://github.com/opensheetmusicdisplay/opensheetmusicdisplay).

![](../../assets/nice_rbhmdu7o6t.gif)

Now any sheet music can be rendered based on the browser width as an svg or canvas (and will resize when the viewport changes).

> **TLDR** The final source [here](https://github.com/rodydavis/lit-sheet-music) and an online [demo](https://rodydavis.github.io/lit-sheet-music/).

Prerequisites 
--------------

*   Vscode
*   Node >= 16
*   Typescript

Getting Started 
----------------

We can start off by navigating in terminal to the location of the project and run the following:

```markdown
npm init @vitejs/app --template lit-ts
```

Then enter a project name `lit-sheet-music` and now open the project in vscode and install the dependencies:

```markdown
cd lit-sheet-music
npm i lit opensheetmusicdisplay
npm i -D @types/node
code .
```

Update the `vite.config.ts` with the following:

```javascript
import { defineConfig } from "vite";
import { resolve } from "path";

export default defineConfig({
  base: "/lit-sheet-music/",
  build: {
    lib: {
      entry: "src/lit-sheet-music.ts",
      formats: ["es"],
    },
    rollupOptions: {
      input: {
        main: resolve(__dirname, "index.html"),
      },
    },
  },
});
```

Template 
---------

Open up the `index.html` and update it with the following:

```markup
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/src/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lit Sheet Music</title>
    <script type="module" src="/src/sheet-music.ts"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
      }
    </style>
  </head>

  <body>
    <sheet-music
      src="https://raw.githubusercontent.com/opensheetmusicdisplay/opensheetmusicdisplay/develop/demo/BrahWiMeSample.musicxml"
    >
    </sheet-music>
  </body>
</html>
```

If local [musicxml](https://www.musicxml.com/) is intended to be used update `index.html` with the following:

```markup
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/src/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lit Sheet Music</title>
    <script type="module" src="/src/sheet-music.ts"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
      }
    </style>
  </head>

  <body>
    <sheet-music>
      <script type="text/xml">
        <?xml version="1.0" standalone="no"?>
        <!DOCTYPE score-partwise PUBLIC
            "-//Recordare//DTD MusicXML Partwise//EN"
            "http://www.musicxml.org/dtds/partwise.dtd">
          <score-partwise>
            <part-list>
              <score-part id="P1">
                <part-name>Voice</part-name>
              </score-part>
            </part-list>
            <part id="P1">
              <measure number="0" implicit="yes">
                <attributes>
                  <divisions>4</divisions>
                  <key>
                    <fifths>-3</fifths>
                    <mode>major</mode>
                  </key>
                  <time>
                    <beats>2</beats>
                    <beat-type>4</beat-type>
                  </time>
                  <clef>
                    <sign>G</sign>
                    <line>2</line>
                  </clef>
                  <directive>Langsam, innig.</directive>
                </attributes>
                <note>
                  <pitch>
                    <step>G</step>
                    <octave>4</octave>
                  </pitch>
                  <duration>2</duration>
                  <type>eighth</type>
                  <stem>up</stem>
                  <notations>
                    <dynamics>
                      <p/>
                    </dynamics>
                  </notations>
                  <lyric>
                    <syllabic>single</syllabic>
                    <text>W&auml;rst</text>
                  </lyric>
                </note>
              </measure>
              <measure number="1">
                <note>
                  <pitch>
                    <step>F</step>
                    <octave>4</octave>
                  </pitch>
                  <duration>3</duration>
                  <type>eighth</type>
                  <dot/>
                  <stem>up</stem>
                  <lyric>
                    <syllabic>single</syllabic>
                    <text>du</text>
                  </lyric>
                </note>
                <note>
                  <pitch>
                    <step>E</step>
                    <alter>-1</alter>
                    <octave>4</octave>
                  </pitch>
                  <duration>1</duration>
                  <type>16th</type>
                  <stem>up</stem>
                  <lyric>
                    <syllabic>single</syllabic>
                    <text>nicht,</text>
                  </lyric>
                </note>
                <note>
                  <pitch>
                    <step>E</step>
                    <alter>-1</alter>
                    <octave>4</octave>
                  </pitch>
                  <duration>2</duration>
                  <type>eighth</type>
                  <stem>up</stem>
                  <lyric>
                    <syllabic>begin</syllabic>
                    <text>heil</text>
                  </lyric>
                </note>
                <note>
                  <pitch>
                    <step>B</step>
                    <alter>-1</alter>
                    <octave>4</octave>
                  </pitch>
                  <duration>1</duration>
                  <type>16th</type>
                  <stem>up</stem>
                  <beam number="1">begin</beam>
                  <beam number="2">begin</beam>
                  <notations>
                    <slur type="start" number="1"/>
                  </notations>
                  <lyric>
                    <syllabic>end</syllabic>
                    <text>ger</text>
                    <extend/>
                  </lyric>
                </note>
                <note>
                  <pitch>
                    <step>G</step>
                    <octave>4</octave>
                  </pitch>
                  <duration>1</duration>
                  <type>16th</type>
                  <stem>up</stem>
                  <beam number="1">end</beam>
                  <beam number="2">end</beam>
                  <notations>
                    <slur type="stop" number="1"/>
                  </notations>
                  <lyric>
                    <extend/>
                  </lyric>
                </note>
              </measure>
            </part>
          </score-partwise>
      </script>
    </sheet-music>
  </body>
</html>
```

We are passing a src attribute to the web component for this example but we can also add a script tag with the type attribute set to `text/xml` with the contents containing the json.

Web Component 
--------------

Before we update our component we need to rename `my-element.ts` to `sheet-music.ts`

Open up `sheet-music.ts` and update it with the following:

```javascript
import { html, css, LitElement } from "lit";
import { customElement, property, query } from "lit/decorators.js";
import { IOSMDOptions, OpenSheetMusicDisplay } from "opensheetmusicdisplay";

type BackendType = "svg" | "canvas";
type DrawingType = "compact" | "default";

@customElement("sheet-music")
export class SheetMusic extends LitElement {
  _zoom = 1.0;

  @property({ type: Boolean }) allowDrop = false;
  @property() src = "";

  @query("main") canvas!: HTMLElement;

  controller?: OpenSheetMusicDisplay;
  options: IOSMDOptions = {
    autoResize: true,
    backend: "canvas" as BackendType,
    drawingParameters: "default" as DrawingType,
  };

  static styles = css`
    main {
      overflow-x: auto;
    }
  `;

  render() {
    return html`<main></main>`;
  }

  async renderMusic(content: string) {
    if (!this.controller) return;
    await this.controller.load(content);
    this.controller.zoom = this._zoom;
    this.controller.render();
    this.requestUpdate();
  }

  private async getMusic(): Promise<string> {
    // Check if src attribute is set and prefer it over the slot
    if (this.src.length > 0) return fetch(this.src).then((res) => res.text());

    // Check if slot children exist and return the xml
    const elem = this.parentElement?.querySelector(
      'script[type="text/xml"]'
    ) as HTMLScriptElement;
    if (elem) return elem.innerHTML;

    // Return nothing if neither is found
    return "";
  }

  async firstUpdated() {
    this.controller = new OpenSheetMusicDisplay(this.canvas, this.options);
    this.requestUpdate();

    // Check for any music and update if found
    const music = await this.getMusic();
    if (music.length > 0) this.renderMusic(music);
  }
}

declare global {
  interface HTMLElementTagNameMap {
    "sheet-music": SheetMusic;
  }
}

```

Run `npm run dev` and the following should appear if all went well:

![](../../assets/s_1_4wd2mls47h.webp)

Conclusion 
-----------

If you want to learn more about building with Lit you can read the docs [here](https://lit.dev/).

The source for this example can be found [here](https://github.com/rodydavis/lit-sheet-music).

![](../../assets/s_2_mkoqbtpadj.gif)
