---
title: Flutter Native HTTP Client
description: >
  This blog post explores how to optimize HTTP client selection in Flutter
  applications based on the platform, using Cronet on Android and Cupertino's
  native client on iOS for improved performance and caching.
date: '2025-01-19 05:39:48.030Z'
draft: false
tags:
  - Dart
  - Flutter
summary: >-
  Flutter app initialization code using Cronet and Cupertino HTTP clients,
  dynamically selecting the appropriate client based on the device platform
  (Android or iOS).
embedding: >-
  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
related:
  - flutter-and-lit.md
  - flutter-ssr-rfw.md
  - host-flutter-rest-api.md
  - flutter-one-click-release.md
  - flutter-and-xcode-cloud.md
---

```dart
import 'package:cronet_http/cronet_http.dart';
import 'package:cupertino_http/cupertino_http.dart';
import 'package:device_info_plus/device_info_plus.dart';
import 'package:flutter/material.dart';
import 'package:http/http.dart';
import 'package:platform_info/platform_info.dart';

void main() async {
  var clientFactory = Client.new;
  final device = DeviceInfoPlugin();
  if (platform.isAndroid) {
    final engine = CronetEngine.build(
      cacheMode: CacheMode.memory,
      userAgent: (await device.androidInfo).model,
    );
    clientFactory = () => CronetClient.fromCronetEngine(engine);
  } else if (platform.isCupertino) {
    clientFactory = CupertinoClient.defaultSessionConfiguration.call;
  }
  runWithClient(() => runApp(const MyApp()),clientFactory);
}
```
