---
title: Flutter Input Output Preview
description: >
  Build responsive Flutter apps with a reusable `TwoPane` widget and an
  `InputOutputPreview` component for side-by-side code and preview display on
  both mobile and desktop.
date: '2025-01-19 05:35:39.744Z'
draft: false
tags:
  - UI-UX
  - Dart
  - Flutter
summary: >-
  Flutter widget for a responsive two-pane layout with customizable primary and
  secondary content, title, actions, and dark mode support.
embedding: >-
  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
related:
  - snippets/flutter-master-detail-view.md
  - flutter-multi-touch-canvas.md
  - snippets/flutter-markdown-view-material-3.md
  - first-flutter-project.md
  - snippets/flutter-stream-widget.md
---

First we need a two pane widget to properly render on mobile and desktop:

```dart
import 'package:flutter/material.dart';

class TwoPane extends StatefulWidget {
  const TwoPane({
    super.key,
    required this.primary,
    required this.secondary,
    required this.title,
    this.actions = const [],
    this.loading = false,
  });

  final (String, WidgetBuilder) primary, secondary;
  final List<Widget> actions;
  final String title;
  final bool loading;

  @override
  State<TwoPane> createState() => _TwoPaneState();
}

class _TwoPaneState extends State<TwoPane> {
  bool darkMode = false;

  void toggleDarkMode() {
    if (mounted) {
      setState(() {
        darkMode = !darkMode;
      });
    }
  }

  ThemeData theme(Color color, Brightness brightness) {
    return ThemeData(
      brightness: brightness,
      colorScheme: ColorScheme.fromSeed(
        seedColor: color,
        brightness: brightness,
      ),
      useMaterial3: true,
    );
  }

  @override
  void didUpdateWidget(covariant TwoPane oldWidget) {
    if (oldWidget.loading != widget.loading ||
        oldWidget.title != widget.title ||
        oldWidget.actions != widget.actions) {
      if (mounted) setState(() {});
    }
    super.didUpdateWidget(oldWidget);
  }

  @override
  Widget build(BuildContext context) {
    return Theme(
      data: theme(Colors.purple, darkMode ? Brightness.dark : Brightness.light),
      child: Builder(builder: (context) {
        final (primaryTitle, primaryBuilder) = widget.primary;
        final (secondaryTitle, secondaryBuilder) = widget.secondary;
        return Scaffold(
            appBar: AppBar(
              title: Text(widget.title),
              centerTitle: false,
              actions: [
                IconButton(
                  tooltip: 'Toggle dark mode',
                  onPressed: toggleDarkMode,
                  icon: Icon(darkMode ? Icons.light_mode : Icons.dark_mode),
                ),
                ...widget.actions,
              ],
            ),
            body: LayoutBuilder(
              builder: (context, dimens) {
                if (dimens.maxWidth > 800 && dimens.maxHeight > 600) {
                  return Column(
                    children: [
                      if (widget.loading) const LinearProgressIndicator(),
                      Expanded(
                        child: Row(
                          children: [
                            Flexible(
                              flex: 1,
                              child: primaryBuilder(context),
                            ),
                            Flexible(
                              flex: 1,
                              child: secondaryBuilder(context),
                            ),
                          ],
                        ),
                      ),
                    ],
                  );
                }
                return DefaultTabController(
                  length: 2,
                  child: Column(
                    children: [
                      SizedBox(
                        height: kToolbarHeight,
                        width: double.infinity,
                        child: TabBar(
                          tabs: [
                            Tab(text: primaryTitle),
                            Tab(text: secondaryTitle),
                          ],
                        ),
                      ),
                      if (widget.loading) const LinearProgressIndicator(),
                      Expanded(
                        child: TabBarView(
                          children: [
                            primaryBuilder(context),
                            secondaryBuilder(context),
                          ],
                        ),
                      ),
                    ],
                  ),
                );
              },
            ));
      }),
    );
  }
}
```

Then we can pass some text fields for one pane to render an output:

```dart
import 'package:flutter/material.dart';

import 'two_pane.dart';

class InputOutputPreview extends StatefulWidget {
  const InputOutputPreview({
    super.key,
    required this.title,
    required this.input,
    required this.output,
    required this.preview,
    required this.placeholder,
    this.actions = const [],
    this.codeTitle = 'Code',
    this.previewTitle = 'Preview',
    this.loading = false,
    this.lazy = false,
    this.previewSize = const Size(300, 700),
  });

  final (
    String,
    ValueChanged<(TextEditingController, TextEditingController)>
  ) input, output;
  final Widget? preview;
  final Widget placeholder;
  final String title;
  final List<Widget> actions;
  final String codeTitle, previewTitle;
  final Size? previewSize;
  final bool loading;
  final bool lazy;

  @override
  State<InputOutputPreview> createState() => _InputOutputPreviewState();
}

class _InputOutputPreviewState extends State<InputOutputPreview> {
  final input = TextEditingController();
  final output = TextEditingController();
  String? lastInput;
  String? lastOutput;

  @override
  void initState() {
    super.initState();
    if (!widget.lazy) input.addListener(onInput);
    output.addListener(onOutput);
  }

  @override
  void dispose() {
    super.dispose();
    if (!widget.lazy) input.removeListener(onInput);
    output.removeListener(onOutput);
    input.dispose();
    output.dispose();
  }

  void onInput() {
    final (_, update) = widget.input;
    final str = input.text;
    if (lastInput == str) return;
    update((input, output));
    lastInput = str;
  }

  void onOutput() {
    final (_, update) = widget.output;
    final str = output.text;
    if (lastOutput == str) return;
    update((output, input));
    lastOutput = str;
  }

  @override
  Widget build(BuildContext context) {
    final (inputTitle, _) = widget.input;
    final (outputTitle, _) = widget.output;
    return TwoPane(
      title: widget.title,
      actions: widget.actions,
      loading: widget.loading,
      primary: (
        widget.codeTitle,
        (context) => SizedBox(
              height: double.infinity,
              child: Column(
                children: [
                  Flexible(
                    child: Padding(
                      padding: const EdgeInsets.all(8),
                      child: Card(
                        child: ListTile(
                          title: Text(inputTitle),
                          subtitle: TextField(
                            maxLines: null,
                            controller: input,
                            expands: true,
                            decoration: InputDecoration(
                              isCollapsed: true,
                              border: InputBorder.none,
                              suffix: widget.lazy
                                  ? IconButton(
                                      onPressed: onInput,
                                      icon: const Icon(Icons.save),
                                      tooltip: 'Submit',
                                    )
                                  : null,
                            ),
                          ),
                        ),
                      ),
                    ),
                  ),
                  Flexible(
                    child: Padding(
                      padding: const EdgeInsets.all(8),
                      child: Card(
                        child: ListTile(
                          title: Text(outputTitle),
                          subtitle: TextField(
                            maxLines: null,
                            controller: output,
                            expands: true,
                            decoration: const InputDecoration(
                              isCollapsed: true,
                              border: InputBorder.none,
                            ),
                          ),
                        ),
                      ),
                    ),
                  ),
                ],
              ),
            ),
      ),
      secondary: (
        widget.previewTitle,
        (context) => Container(
              color: Theme.of(context).colorScheme.surfaceVariant,
              child: Builder(builder: (context) {
                if (widget.previewSize == null) {
                  return widget.preview ?? widget.placeholder;
                }
                return Center(
                  child: Material(
                    elevation: 8,
                    child: SizedBox.fromSize(
                      size: widget.previewSize,
                      child: widget.preview ?? widget.placeholder,
                    ),
                  ),
                );
              }),
            )
      ),
    );
  }
}
```
