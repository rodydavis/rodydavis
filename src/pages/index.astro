---
import Layout from "../layouts/RootLayout.astro";
import NoteList from "../components/NoteList.astro";

import { getConfig } from "../consts";
import type { MarkdownInstance } from "astro";

const { title, description } = getConfig().site;

// Check for readme in notes
let readme: MarkdownInstance<Record<string, any>> | null = null;
try {
  const items = await Astro.glob("../../notes/readme.md");
  readme = items[0];
} catch (error) {}
const { Content } = readme || { Content: () => null };
---

<Layout title={title} description={description}>
  <main>
    {
      readme != null && (
        <article>
          <Content />
        </article>
      )
    }
    <div class="notes">
      <NoteList />
    </div>
  </main>
</Layout>

<style>
  article {
    max-width: 960px;
    margin: 0 auto;
  }
</style>
