<!DOCTYPE html>
<html lang="en" class="astro-MDYSN4OI">
  <head>
    <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta name="generator" content="Astro v2.0.4">

<!-- Canonical URL -->
<link rel="canonical" href="https://rodydavis.com/posts/flutter-and-xcode-cloud/">

<!-- Primary Meta Tags -->
<title>How to build a Flutter app on Xcode Cloud</title>
<meta name="title" content="How to build a Flutter app on Xcode Cloud">
<meta name="description">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://rodydavis.com/posts/flutter-and-xcode-cloud/">
<meta property="og:title" content="How to build a Flutter app on Xcode Cloud">
<meta property="og:description">
<meta property="og:image" content="https://rodydavis.com/placeholder-social.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://rodydavis.com/posts/flutter-and-xcode-cloud/">
<meta property="twitter:title" content="How to build a Flutter app on Xcode Cloud">
<meta property="twitter:description">
<meta property="twitter:image" content="https://rodydavis.com/placeholder-social.jpg">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JQNPVBL9DR"></script>

    
  <link rel="stylesheet" href="/_astro/_...slug_.75960322.css" />
<link rel="stylesheet" href="/_astro/_...slug_.7a06253d.css" /><script type="module">window.dataLayer=window.dataLayer||[];function a(){dataLayer.push(arguments)}a("js",new Date);a("config","G-JQNPVBL9DR");
</script></head>

  <body class="markdown-body astro-MDYSN4OI">
    <header class="astro-3EF6KSR2">
  <h2 class="astro-3EF6KSR2">
    <a href="/" class="astro-3EF6KSR2">Rody Davis</a>
  </h2>
  <nav class="astro-3EF6KSR2">
    <a href="/search?tags=app" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Apps</div>
</a><a href="/search?tags=posts" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Blog</div>
</a><a href="/talks" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Talks</div>
</a><a href="/about" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> About</div>
</a>
  </nav>
</header>
    <main class="astro-MDYSN4OI">
      <style>
	@media (min-width: 860px) {
		main {
			display: flex;
			flex-direction: row;
			justify-content: space-between;
		}
		article {
			flex: 1;
		}
		aside {
			display: block;
			position: sticky;
			top: 0;
			right: 0;
			max-height: 100vh;
			overflow-y: auto;
		}
	}
	</style><main class="astro-BVZIHDZO">
    <article class="astro-BVZIHDZO">
      
      <h1 class="title astro-BVZIHDZO">How to build a Flutter app on Xcode Cloud</h1>
      
      
      <hr class="astro-BVZIHDZO">
      <p>In this article we are going to go over how to setup <a href="https://developer.apple.com/xcode-cloud/">Xcode Cloud</a> to build your <a href="https://flutter.dev/">Flutter</a> application for <a href="https://developer.apple.com/testflight/">TestFlight</a> and the <a href="https://developer.apple.com/app-store/">AppStore</a>.</p>
<h2 id=""><a aria-hidden="true" tabindex="-1" href="#"><span class="icon icon-link"></span></a>Step 1</h2>
<p>Before we begin Flutter needs to be installed, and you can check by running the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">flutter doctor -v</span></span></code></pre>
<p>After it is installed we can run the following command to create and open our Flutter project (skip down to step 2 if adding to an existing app).</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">mkdir flutter_ci_example</span></span>
<span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> flutter_ci_example</span></span>
<span class="line"><span style="color: #C9D1D9">flutter create </span><span style="color: #79C0FF">.</span></span></code></pre>
<p>If you need more help with creating the first project you can check out my previous blog post <a href="https://rodydavis.com/posts/first-flutter-project/">here</a>.</p>
<p>After the project is created open it in your favorite code editor.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">code </span><span style="color: #79C0FF">.</span></span></code></pre>
<h2 id="-1"><a aria-hidden="true" tabindex="-1" href="#-1"><span class="icon icon-link"></span></a>Step 2</h2>
<p>The generated files should look like the following:</p>
<p><img src="/attachments/flutter_files.png" alt="flutter files"></p>
<p>Create a new file at <code>ios/ci_scripts/ci_post_install.sh</code> and update it with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #8B949E">#!/bin/sh</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Install CocoaPods using Homebrew.</span></span>
<span class="line"><span style="color: #C9D1D9">brew install cocoapods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Install Flutter</span></span>
<span class="line"><span style="color: #C9D1D9">brew install --cask flutter</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Run Flutter doctor</span></span>
<span class="line"><span style="color: #C9D1D9">flutter doctor</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Get packages</span></span>
<span class="line"><span style="color: #C9D1D9">flutter packages get</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Update generated files</span></span>
<span class="line"><span style="color: #C9D1D9">flutter pub run build_runner build</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Build ios app</span></span>
<span class="line"><span style="color: #C9D1D9">flutter build ios --no-codesign</span></span></code></pre>
<p>This is a file Xcode Cloud needs to run after the project is downloaded. We need to install <a href="https://cocoapods.org/">cocoapods</a> for any plugins we are using and Flutter to prebuild our application.</p>
<p>Then run the following command which will make the script executable:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">chmod +x ios/ci_scripts/ci_post_clone.sh</span></span></code></pre>
<h2 id="-2"><a aria-hidden="true" tabindex="-1" href="#-2"><span class="icon icon-link"></span></a>Step 3</h2>
<p>Open up the iOS project in Xcode by right clicking on the iOS folder and selecting “Open in Xcode”.</p>
<p><img src="/attachments/flutter_xcode-open.png" alt="flutter xcode open"></p>
<p>You can also open the project by double clicking on the <code>ios/Runner.xcworkspace</code> file.</p>
<p><img src="/attachments/flutter_xcode-launch.png" alt="flutter xcode launch"></p>
<p>Make sure you have the latest version of Xcode Cloud install and that you have <a href="https://developer.apple.com/xcode-cloud/beta/">access to the beta</a>. Create a new workflow by the menu <code>Product > Xcode Cloud > Create Workflow</code>:</p>
<p><img src="/attachments/flutter_workflow-create.png" alt="flutter workflow create"></p>
<p>Follow the flow to add the project and choose which type of build you want.</p>
<p>Make sure to remove MacOS as a target in the workflow by selecting <code>Archive - MacOS</code> and the delete icon on the top right.</p>
<p>If you want to build and release the MacOS app you will need to do that with another script in the macos folder and a workflow in that Xcode workspace.</p>
<p>You can create the file <code>macos/ci_scripts/ci_post_clone.sh</code> and update it with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #8B949E">#!/bin/sh</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Install CocoaPods using Homebrew.</span></span>
<span class="line"><span style="color: #C9D1D9">brew install cocoapods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Install Flutter</span></span>
<span class="line"><span style="color: #C9D1D9">brew install --cask flutter</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Run Flutter doctor</span></span>
<span class="line"><span style="color: #C9D1D9">flutter doctor</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Enable macos</span></span>
<span class="line"><span style="color: #C9D1D9">flutter config --enable-macos-desktop</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Get packages</span></span>
<span class="line"><span style="color: #C9D1D9">flutter packages get</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Update generated files</span></span>
<span class="line"><span style="color: #C9D1D9">flutter pub run build_runner build</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E"># Build ios app</span></span>
<span class="line"><span style="color: #C9D1D9">flutter build ios --no-codesign</span></span></code></pre>
<p>If all goes well it will look like the following after a successful build:</p>
<p><img src="/attachments/flutter_workflow-done.png" alt="flutter workflow done"></p>
<h2 id="-3"><a aria-hidden="true" tabindex="-1" href="#-3"><span class="icon icon-link"></span></a>Conclusion</h2>
<p>Flutter makes it ease to build and deploy to multiple platforms and Xcode Cloud takes care of the signing for Apple platforms.</p>
<p>You can learn more about cd and flutter <a href="https://docs.flutter.dev/deployment/cd">here</a>.</p>
    </article>
    <aside class="astro-BVZIHDZO">
      <nav class="astro-XVRFUPWN">
  <h2 class="astro-XVRFUPWN">Table of Contents</h2>
  <ul class="astro-XVRFUPWN">
    <li class="astro-XVRFUPWN">
          <a href="#" class="heading-depth-2 astro-XVRFUPWN">
            Step 1
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-1" class="heading-depth-2 astro-XVRFUPWN">
            Step 2
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-2" class="heading-depth-2 astro-XVRFUPWN">
            Step 3
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-3" class="heading-depth-2 astro-XVRFUPWN">
            Conclusion
          </a>
        </li>
  </ul>
</nav>
    </aside>
  </main>
    </main>
    <footer class="astro-SZ7XMLTE">
  <div class="links astro-AUSHCPD5">
  <a class="social-icon astro-AUSHCPD5" href="https://github.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/github.svg" alt="github" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://twitter.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/twitter.svg" alt="twitter" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://facebook.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/facebook.svg" alt="facebook" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://instagram.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/instagram.svg" alt="instagram" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://youtube.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/youtube.svg" alt="youtube" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://tiktok.com/@rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/tiktok.svg" alt="tiktok" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://linkedin.com/in/rodydavis" target="_blank" rel="noopener">
            <img src="/social/linkedin.svg" alt="linkedin" class="astro-AUSHCPD5">
          </a>
</div>

  <div class="copyright astro-SZ7XMLTE">
    &copy; 2023
    Rody Davis. All rights reserved.
  </div>
</footer>
  </body></html>