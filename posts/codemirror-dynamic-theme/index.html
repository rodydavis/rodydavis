<!DOCTYPE html>
<html lang="en" class="astro-MDYSN4OI">
  <head>
    <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta name="generator" content="Astro v2.0.4">

<!-- Canonical URL -->
<link rel="canonical" href="https://rodydavis.com/posts/codemirror-dynamic-theme/">

<!-- Primary Meta Tags -->
<title>Dynamic Themes with CodeMirror</title>
<meta name="title" content="Dynamic Themes with CodeMirror">
<meta name="description">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://rodydavis.com/posts/codemirror-dynamic-theme/">
<meta property="og:title" content="Dynamic Themes with CodeMirror">
<meta property="og:description">
<meta property="og:image" content="https://rodydavis.com/placeholder-social.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://rodydavis.com/posts/codemirror-dynamic-theme/">
<meta property="twitter:title" content="Dynamic Themes with CodeMirror">
<meta property="twitter:description">
<meta property="twitter:image" content="https://rodydavis.com/placeholder-social.jpg">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JQNPVBL9DR"></script>

    
  <link rel="stylesheet" href="/_astro/_...slug_.a5420181.css" />
<link rel="stylesheet" href="/_astro/_...slug_.543d6cb2.css" /><script type="module" src="/_astro/hoisted.523c151d.js"></script></head>

  <body class="markdown-body astro-MDYSN4OI">
    <header class="astro-3EF6KSR2">
  <h2 class="astro-3EF6KSR2">
    <a href="/" class="astro-3EF6KSR2">Rody Davis</a>
  </h2>
  <nav class="astro-3EF6KSR2">
    <a href="/search?tags=app" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Apps</div>
</a><a href="/search?tags=posts" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Blog</div>
</a><a href="/talks" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Talks</div>
</a><a href="/about" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> About</div>
</a>
  </nav>
</header>
    <main class="astro-MDYSN4OI">
      <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).idle=t=>{const e=async()=>{await(await t())()};"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,200)},window.dispatchEvent(new Event("astro:idle"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><main class="astro-BVZIHDZO">
    <article class="markdown-body astro-BVZIHDZO">
      <!-- {
        image !== undefined && (
          <img width={720} height={360} src={image} alt="" />
        )
      } -->
      <h1 class="title astro-BVZIHDZO">Dynamic Themes with CodeMirror</h1>
      <time class="astro-BVZIHDZO">March 17, 2022</time>
      
      <div class="tags astro-BVZIHDZO">
        <astro-island uid="Z13Ahbp" component-url="/_astro/TagChip.aa70bafd.js" component-export="default" renderer-url="/_astro/client.15ddb572.js" props="{&quot;tag&quot;:[0,&quot;posts&quot;],&quot;active&quot;:[0,false],&quot;onClick&quot;:[0,null],&quot;class&quot;:[0,&quot;astro-BVZIHDZO&quot;]}" ssr="" client="idle" opts="{&quot;name&quot;:&quot;TagChip&quot;,&quot;value&quot;:true}" await-children=""><div style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; background-color: var(--tag-background); color: var(--tag-color); cursor: pointer; white-space: nowrap; display: flex; flex-direction: row; align-items: center; gap: 0.25rem;">posts</div></astro-island><astro-island uid="ZdX9iC" component-url="/_astro/TagChip.aa70bafd.js" component-export="default" renderer-url="/_astro/client.15ddb572.js" props="{&quot;tag&quot;:[0,&quot;web&quot;],&quot;active&quot;:[0,false],&quot;onClick&quot;:[0,null],&quot;class&quot;:[0,&quot;astro-BVZIHDZO&quot;]}" ssr="" client="idle" opts="{&quot;name&quot;:&quot;TagChip&quot;,&quot;value&quot;:true}" await-children=""><div style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; background-color: var(--tag-background); color: var(--tag-color); cursor: pointer; white-space: nowrap; display: flex; flex-direction: row; align-items: center; gap: 0.25rem;">web</div></astro-island><astro-island uid="427dl" component-url="/_astro/TagChip.aa70bafd.js" component-export="default" renderer-url="/_astro/client.15ddb572.js" props="{&quot;tag&quot;:[0,&quot;lit&quot;],&quot;active&quot;:[0,false],&quot;onClick&quot;:[0,null],&quot;class&quot;:[0,&quot;astro-BVZIHDZO&quot;]}" ssr="" client="idle" opts="{&quot;name&quot;:&quot;TagChip&quot;,&quot;value&quot;:true}" await-children=""><div style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; background-color: var(--tag-background); color: var(--tag-color); cursor: pointer; white-space: nowrap; display: flex; flex-direction: row; align-items: center; gap: 0.25rem;">lit</div></astro-island><astro-island uid="14MSyW" component-url="/_astro/TagChip.aa70bafd.js" component-export="default" renderer-url="/_astro/client.15ddb572.js" props="{&quot;tag&quot;:[0,&quot;vite&quot;],&quot;active&quot;:[0,false],&quot;onClick&quot;:[0,null],&quot;class&quot;:[0,&quot;astro-BVZIHDZO&quot;]}" ssr="" client="idle" opts="{&quot;name&quot;:&quot;TagChip&quot;,&quot;value&quot;:true}" await-children=""><div style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; background-color: var(--tag-background); color: var(--tag-color); cursor: pointer; white-space: nowrap; display: flex; flex-direction: row; align-items: center; gap: 0.25rem;">vite</div></astro-island><astro-island uid="ZyACRo" component-url="/_astro/TagChip.aa70bafd.js" component-export="default" renderer-url="/_astro/client.15ddb572.js" props="{&quot;tag&quot;:[0,&quot;css&quot;],&quot;active&quot;:[0,false],&quot;onClick&quot;:[0,null],&quot;class&quot;:[0,&quot;astro-BVZIHDZO&quot;]}" ssr="" client="idle" opts="{&quot;name&quot;:&quot;TagChip&quot;,&quot;value&quot;:true}" await-children=""><div style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; background-color: var(--tag-background); color: var(--tag-color); cursor: pointer; white-space: nowrap; display: flex; flex-direction: row; align-items: center; gap: 0.25rem;">css</div></astro-island><astro-island uid="n5Dum" component-url="/_astro/TagChip.aa70bafd.js" component-export="default" renderer-url="/_astro/client.15ddb572.js" props="{&quot;tag&quot;:[0,&quot;material-design&quot;],&quot;active&quot;:[0,false],&quot;onClick&quot;:[0,null],&quot;class&quot;:[0,&quot;astro-BVZIHDZO&quot;]}" ssr="" client="idle" opts="{&quot;name&quot;:&quot;TagChip&quot;,&quot;value&quot;:true}" await-children=""><div style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; background-color: var(--tag-background); color: var(--tag-color); cursor: pointer; white-space: nowrap; display: flex; flex-direction: row; align-items: center; gap: 0.25rem;">material-design</div></astro-island><astro-island uid="ZkrCw" component-url="/_astro/TagChip.aa70bafd.js" component-export="default" renderer-url="/_astro/client.15ddb572.js" props="{&quot;tag&quot;:[0,&quot;dynamic-color&quot;],&quot;active&quot;:[0,false],&quot;onClick&quot;:[0,null],&quot;class&quot;:[0,&quot;astro-BVZIHDZO&quot;]}" ssr="" client="idle" opts="{&quot;name&quot;:&quot;TagChip&quot;,&quot;value&quot;:true}" await-children=""><div style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; background-color: var(--tag-background); color: var(--tag-color); cursor: pointer; white-space: nowrap; display: flex; flex-direction: row; align-items: center; gap: 0.25rem;">dynamic-color</div></astro-island><astro-island uid="1EQIUc" component-url="/_astro/TagChip.aa70bafd.js" component-export="default" renderer-url="/_astro/client.15ddb572.js" props="{&quot;tag&quot;:[0,&quot;playground&quot;],&quot;active&quot;:[0,false],&quot;onClick&quot;:[0,null],&quot;class&quot;:[0,&quot;astro-BVZIHDZO&quot;]}" ssr="" client="idle" opts="{&quot;name&quot;:&quot;TagChip&quot;,&quot;value&quot;:true}" await-children=""><div style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; background-color: var(--tag-background); color: var(--tag-color); cursor: pointer; white-space: nowrap; display: flex; flex-direction: row; align-items: center; gap: 0.25rem;">playground</div></astro-island>
      </div>
      <div class="headings astro-BVZIHDZO">
            <details class="astro-XVRFUPWN">
  <summary class="astro-XVRFUPWN">Table of Contents</summary>
  <ul class="astro-XVRFUPWN">
    <li class="astro-XVRFUPWN">
          <a href="#" class="heading-depth-2 astro-XVRFUPWN">
            Prerequisites
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-1" class="heading-depth-2 astro-XVRFUPWN">
            Getting Started
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-2" class="heading-depth-2 astro-XVRFUPWN">
            Template
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-3" class="heading-depth-2 astro-XVRFUPWN">
            Web Component
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-4" class="heading-depth-2 astro-XVRFUPWN">
            Conclusion
          </a>
        </li>
  </ul>
</details>
          </div>
      <p>In this article I will go over how to set up a <a href="https://lit.dev">Lit</a> web component and use it to create a a code window that uses <a href="https://codemirror.net">CodeMirror</a> and apply a dynamic theme with <a href="https://material.io">Material Design</a>.</p>
<blockquote>
<p><strong>TLDR</strong> The final source <a href="https://github.com/rodydavis/codemirror-dynamic-theme">here</a> and an online <a href="https://rodydavis.github.io/codemirror-dynamic-theme/">demo</a>.</p>
</blockquote>
<h2 id=""><a aria-hidden="true" tabindex="-1" href="#"><span class="icon icon-link"></span></a>Prerequisites</h2>
<ul>
<li>Vscode</li>
<li>Node >= 16</li>
<li>Typescript</li>
</ul>
<h2 id="-1"><a aria-hidden="true" tabindex="-1" href="#-1"><span class="icon icon-link"></span></a>Getting Started</h2>
<p>We can start off by navigating in terminal to the location of the project and run the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">npm init @vitejs/app --template lit-ts</span></span></code></pre>
<p>Then enter a project name <code>codemirror-dynamic-theme</code> and now open the project in vscode and install the dependencies:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> codemirror-dynamic-theme</span></span>
<span class="line"><span style="color: #C9D1D9">npm i lit codemirror @material/material-color-utilities</span></span>
<span class="line"><span style="color: #C9D1D9">npm i -D @types/node @types/codemirror</span></span>
<span class="line"><span style="color: #C9D1D9">code </span><span style="color: #79C0FF">.</span></span></code></pre>
<p>Update the <code>vite.config.ts</code> with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { defineConfig } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"vite"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { resolve } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"path"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> </span><span style="color: #D2A8FF">defineConfig</span><span style="color: #FFA657">({</span></span>
<span class="line"><span style="color: #FFA657">  </span><span style="color: #C9D1D9">base: </span><span style="color: #A5D6FF">"/codemirror-dynamic-theme/"</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">  </span><span style="color: #C9D1D9">build: {</span></span>
<span class="line"><span style="color: #C9D1D9">    rollupOptions: {</span></span>
<span class="line"><span style="color: #C9D1D9">      input: {</span></span>
<span class="line"><span style="color: #C9D1D9">        main: </span><span style="color: #D2A8FF">resolve</span><span style="color: #C9D1D9">(__dirname, </span><span style="color: #A5D6FF">"index.html"</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">      },</span></span>
<span class="line"><span style="color: #C9D1D9">    },</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">})</span><span style="color: #C9D1D9">;</span></span></code></pre>
<h2 id="-2"><a aria-hidden="true" tabindex="-1" href="#-2"><span class="icon icon-link"></span></a>Template</h2>
<p>Open up the <code>index.html</code> and update it with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&#x3C;!</span><span style="color: #7EE787">DOCTYPE</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">html</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;</span><span style="color: #7EE787">html</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">lang</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"en"</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;</span><span style="color: #7EE787">head</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">meta</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">charset</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"UTF-8"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">link</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">rel</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"icon"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">type</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"image/svg+xml"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">href</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"/src/favicon.svg"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">meta</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">name</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"viewport"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">content</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"width=device-width, initial-scale=1.0"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">title</span><span style="color: #C9D1D9">>CodeMirror Dynamic Theme&#x3C;/</span><span style="color: #7EE787">title</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">type</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"module"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">src</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"/src/code-window.ts"</span><span style="color: #C9D1D9">>&#x3C;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">style</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #7EE787">body</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">margin</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">padding</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;/</span><span style="color: #7EE787">style</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;/</span><span style="color: #7EE787">head</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;</span><span style="color: #7EE787">body</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">code-window</span><span style="color: #C9D1D9">> &#x3C;/</span><span style="color: #7EE787">code-window</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;/</span><span style="color: #7EE787">body</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;/</span><span style="color: #7EE787">html</span><span style="color: #C9D1D9">></span></span></code></pre>
<h2 id="-3"><a aria-hidden="true" tabindex="-1" href="#-3"><span class="icon icon-link"></span></a>Web Component</h2>
<p>Before we update our component we need to rename <code>my-element.ts</code> to <code>code-window.ts</code></p>
<p>Open up <code>code-window.ts</code> and update it with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { html, css, LitElement, unsafeCSS } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { customElement, property } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit/decorators.js"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  applyTheme,</span></span>
<span class="line"><span style="color: #C9D1D9">  argbFromHex,</span></span>
<span class="line"><span style="color: #C9D1D9">  hexFromArgb,</span></span>
<span class="line"><span style="color: #C9D1D9">  themeFromSourceColor,</span></span>
<span class="line"><span style="color: #C9D1D9">} </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"@material/material-color-utilities"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> CodeMirror </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"codemirror"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> codemirrorStyles </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"codemirror/lib/codemirror.css"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">customElement</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"code-window"</span><span style="color: #C9D1D9">)</span></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">CodeWindow</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">LitElement</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">static</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">styles</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">css</span><span style="color: #A5D6FF">`</span></span>
<span class="line"><span style="color: #A5D6FF">    ${</span><span style="color: #D2A8FF">unsafeCSS</span><span style="color: #A5D6FF">(</span><span style="color: #C9D1D9">codemirrorStyles</span><span style="color: #A5D6FF">)</span><span style="color: #A5D6FF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    main {</span></span>
<span class="line"><span style="color: #A5D6FF">      width: 100vw;</span></span>
<span class="line"><span style="color: #A5D6FF">      height: 100vh;</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: var(--md-sys-color-background);</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--md-sys-color-on-background);</span></span>
<span class="line"><span style="color: #A5D6FF">      --header-height: 48px;</span></span>
<span class="line"><span style="color: #A5D6FF">      --input-size: 32px;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .toolbar {</span></span>
<span class="line"><span style="color: #A5D6FF">      height: var(--header-height);</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: var(--md-sys-color-primary-container);</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--md-sys-color-on-primary-container);</span></span>
<span class="line"><span style="color: #A5D6FF">      display: flex;</span></span>
<span class="line"><span style="color: #A5D6FF">      align-items: center;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .actions > * {</span></span>
<span class="line"><span style="color: #A5D6FF">      margin-left: 4px;</span></span>
<span class="line"><span style="color: #A5D6FF">      margin-right: 4px;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .toolbar .title {</span></span>
<span class="line"><span style="color: #A5D6FF">      font-family: sans-serif;</span></span>
<span class="line"><span style="color: #A5D6FF">      font-size: 18px;</span></span>
<span class="line"><span style="color: #A5D6FF">      padding-left: 4px;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .toolbar .actions {</span></span>
<span class="line"><span style="color: #A5D6FF">      display: flex;</span></span>
<span class="line"><span style="color: #A5D6FF">      align-items: center;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .toolbar a {</span></span>
<span class="line"><span style="color: #A5D6FF">      padding: 0;</span></span>
<span class="line"><span style="color: #A5D6FF">      margin: 0;</span></span>
<span class="line"><span style="color: #A5D6FF">      padding-left: 8px;</span></span>
<span class="line"><span style="color: #A5D6FF">      padding-right: 8px;</span></span>
<span class="line"><span style="color: #A5D6FF">      display: flex;</span></span>
<span class="line"><span style="color: #A5D6FF">      align-items: center;</span></span>
<span class="line"><span style="color: #A5D6FF">      cursor: pointer;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    input[type="color"] {</span></span>
<span class="line"><span style="color: #A5D6FF">      width: calc(var(--input-size) * 2);</span></span>
<span class="line"><span style="color: #A5D6FF">      height: var(--input-size);</span></span>
<span class="line"><span style="color: #A5D6FF">      outline: none;</span></span>
<span class="line"><span style="color: #A5D6FF">      border: none;</span></span>
<span class="line"><span style="color: #A5D6FF">      border-radius: 50%;</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: var(--md-sys-color-primary-container);</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"><span style="color: #A5D6FF">    input[type="color"]::-webkit-color-swatch-wrapper {</span></span>
<span class="line"><span style="color: #A5D6FF">      padding: 0;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"><span style="color: #A5D6FF">    input[type="color"]::-webkit-color-swatch {</span></span>
<span class="line"><span style="color: #A5D6FF">      border: none;</span></span>
<span class="line"><span style="color: #A5D6FF">      border-radius: var(--input-size);</span></span>
<span class="line"><span style="color: #A5D6FF">      border: var(--md-sys-color-outline) solid 1px;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    button {</span></span>
<span class="line"><span style="color: #A5D6FF">      border: none;</span></span>
<span class="line"><span style="color: #A5D6FF">      border-radius: 4px;</span></span>
<span class="line"><span style="color: #A5D6FF">      padding: 8px;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .tertiary {</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: var(--md-sys-color-tertiary);</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--md-sys-color-on-tertiary);</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .secondary {</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: var(--md-sys-color-secondary);</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--md-sys-color-on-secondary);</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .spacer {</span></span>
<span class="line"><span style="color: #A5D6FF">      flex: 1;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .editor {</span></span>
<span class="line"><span style="color: #A5D6FF">      height: calc(100% - var(--header-height));</span></span>
<span class="line"><span style="color: #A5D6FF">      width: 100%;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"><span style="color: #A5D6FF">  `</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">() </span><span style="color: #FFA657">value</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> [</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`import {html, css, LitElement} from 'lit';`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`import {customElement, property} from 'lit/decorators.js';`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">``</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`@customElement('simple-greeting')`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`export class SimpleGreeting extends LitElement {`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`  static styles = css</span><span style="color: #79C0FF">\`</span><span style="color: #A5D6FF">p { color: blue }</span><span style="color: #79C0FF">\`</span><span style="color: #A5D6FF">;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">``</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`  @property()`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`  name = 'Somebody';`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">``</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`  render() {`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`    return html</span><span style="color: #79C0FF">\`</span><span style="color: #A5D6FF">&#x3C;p>Hello, </span><span style="color: #79C0FF">\$</span><span style="color: #A5D6FF">{this.name}!&#x3C;/p></span><span style="color: #79C0FF">\`</span><span style="color: #A5D6FF">;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`  }`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">`}`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">  ].</span><span style="color: #D2A8FF">join</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"</span><span style="color: #79C0FF">\n</span><span style="color: #A5D6FF">"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">() </span><span style="color: #FFA657">color</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"#6750A4"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">({ type: Boolean }) </span><span style="color: #FFA657">dark</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> window.</span><span style="color: #D2A8FF">matchMedia</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">"(prefers-color-scheme: dark)"</span></span>
<span class="line"><span style="color: #C9D1D9">  ).matches;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">render</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">`&#x3C;main></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;header class="toolbar"></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;div class="title">${</span><span style="color: #C9D1D9">document</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">title</span><span style="color: #A5D6FF">}&#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;div class="spacer">&#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;div class="actions"></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;button class="secondary" @click=${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">toggleDark</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">bind</span><span style="color: #A5D6FF">(</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">)</span><span style="color: #A5D6FF">}></span></span>
<span class="line"><span style="color: #A5D6FF">            ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">dark</span><span style="color: #A5D6FF"> </span><span style="color: #FF7B72">?</span><span style="color: #A5D6FF"> </span><span style="color: #A5D6FF">"Light"</span><span style="color: #A5D6FF"> </span><span style="color: #FF7B72">:</span><span style="color: #A5D6FF"> </span><span style="color: #A5D6FF">"Dark"}</span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;/button></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;button class="tertiary" @click=${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">randomColor</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">bind</span><span style="color: #A5D6FF">(</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">)</span><span style="color: #A5D6FF">}></span></span>
<span class="line"><span style="color: #A5D6FF">            Random</span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;/button></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;input</span></span>
<span class="line"><span style="color: #A5D6FF">            type="color"</span></span>
<span class="line"><span style="color: #A5D6FF">            .value=${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">color</span><span style="color: #A5D6FF">}</span></span>
<span class="line"><span style="color: #A5D6FF">            @input=${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">onColor</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">bind</span><span style="color: #A5D6FF">(</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">)</span><span style="color: #A5D6FF">}</span></span>
<span class="line"><span style="color: #A5D6FF">          /></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/header></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div class="editor">&#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;/main>`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">firstUpdated</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">root</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.shadowRoot</span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">querySelector</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">".editor"</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLElement</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">editor</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">CodeMirror</span><span style="color: #C9D1D9">(root, {</span></span>
<span class="line"><span style="color: #C9D1D9">      value: </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.value,</span></span>
<span class="line"><span style="color: #C9D1D9">      mode: </span><span style="color: #A5D6FF">"javascript"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      lineNumbers: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      lineWrapping: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      indentUnit: </span><span style="color: #79C0FF">4</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      tabSize: </span><span style="color: #79C0FF">4</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      indentWithTabs: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      autofocus: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">debug</span><span style="color: #C9D1D9">(editor);</span></span>
<span class="line"><span style="color: #C9D1D9">    editor.</span><span style="color: #D2A8FF">setSize</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"100%"</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">`100%`</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">updateTheme</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    window</span></span>
<span class="line"><span style="color: #C9D1D9">      .</span><span style="color: #D2A8FF">matchMedia</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"(prefers-color-scheme: dark)"</span><span style="color: #C9D1D9">)</span></span>
<span class="line"><span style="color: #C9D1D9">      .</span><span style="color: #D2A8FF">addEventListener</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"change"</span><span style="color: #C9D1D9">, (</span><span style="color: #FFA657">e</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.dark </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> e.matches;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">updateTheme</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">      });</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">updateTheme</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">   </span><span style="color: #8B949E">// TODO: Generate Theme</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">setColor</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">val</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.color </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> val;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">updateTheme</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">onColor</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">e</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Event</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">target</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> e.target </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLInputElement</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setColor</span><span style="color: #C9D1D9">(target.value);</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">randomColor</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">letters</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"0123456789ABCDEF"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">let</span><span style="color: #C9D1D9"> color </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"#"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">for</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">let</span><span style="color: #C9D1D9"> i </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">; i </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">6</span><span style="color: #C9D1D9">; i</span><span style="color: #FF7B72">++</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">      color </span><span style="color: #FF7B72">+=</span><span style="color: #C9D1D9"> letters[Math.</span><span style="color: #D2A8FF">floor</span><span style="color: #C9D1D9">(Math.</span><span style="color: #D2A8FF">random</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">16</span><span style="color: #C9D1D9">)];</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setColor</span><span style="color: #C9D1D9">(color);</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">toggleDark</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.dark </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">!</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.dark;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">updateTheme</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">declare</span><span style="color: #C9D1D9"> global {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">interface</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLElementTagNameMap</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">"code-window"</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">CodeWindow</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<p>Here we are setting up some of the editor basics to load in the styles needed for the basic layout.</p>
<p>There are also few methods that handle updating of properties on the element such as <code>toggleDark</code> and <code>setColor</code>. When you run the application you should see the following:</p>
<p><img src="/attachments/dynamic-theme_start.webp" alt="start"></p>
<p>It doesnt look great yet, but now we can add a CodeMirror theme to import. Create a file <code>src/theme.ts</code> and update it with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { css } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">codeMirrorTheme</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">css</span><span style="color: #A5D6FF">`</span></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror {</span></span>
<span class="line"><span style="color: #A5D6FF">    background-color: var(--md-sys-color-background);</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-sys-color-on-background);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-gutters {</span></span>
<span class="line"><span style="color: #A5D6FF">    background: var(--md-sys-color-surface-variant);</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-sys-color-on-surface-variant);</span></span>
<span class="line"><span style="color: #A5D6FF">    border: none;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-guttermarker,</span></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-guttermarker-subtle,</span></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-linenumber {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-sys-color-on-background);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-cursor {</span></span>
<span class="line"><span style="color: #A5D6FF">    border-left: 1px solid var(--md-sys-color-primary);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"><span style="color: #A5D6FF">  .cm-fat-cursor .CodeMirror-cursor {</span></span>
<span class="line"><span style="color: #A5D6FF">    background-color: var(--md-sys-color-background);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"><span style="color: #A5D6FF">  .cm-animate-fat-cursor {</span></span>
<span class="line"><span style="color: #A5D6FF">    background-color: var(--md-sys-color-background);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  div.CodeMirror-selected {</span></span>
<span class="line"><span style="color: #A5D6FF">    background: var(--md-sys-color-surface-variant);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-focused div.CodeMirror-selected {</span></span>
<span class="line"><span style="color: #A5D6FF">    background: var(--md-sys-color-surface-variant);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-line::selection,</span></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-line > span::selection,</span></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-line > span > span::selection {</span></span>
<span class="line"><span style="color: #A5D6FF">    background: var(--md-sys-color-surface-variant);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-line::-moz-selection,</span></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-line > span::-moz-selection,</span></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-line > span > span::-moz-selection {</span></span>
<span class="line"><span style="color: #A5D6FF">    background: var(--md-sys-color-surface-variant);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-activeline-background {</span></span>
<span class="line"><span style="color: #A5D6FF">    background: var(--md-sys-color-surface);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-keyword {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-keyword) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-operator {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-operator) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-variable-2 {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-variable-2) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-variable-3,</span></span>
<span class="line"><span style="color: #A5D6FF">  .cm-type {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-variable-3) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-builtin {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-builtin) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-atom {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-atom) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-number {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-number) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-def {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-def) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-string {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-string) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-string-2 {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-string-2) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-comment {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-comment) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-variable {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-variable) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-tag {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-tag) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-meta {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-meta) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-attribute {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-attribute) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-property {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-property) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-qualifier {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-qualifier) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-variable-3,</span></span>
<span class="line"><span style="color: #A5D6FF">  .cm-type {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-custom-color-variable-3) !important;</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .cm-error {</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-sys-color-on-error);</span></span>
<span class="line"><span style="color: #A5D6FF">    background-color: var(--md-sys-color-error);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">  .CodeMirror-matchingbracket {</span></span>
<span class="line"><span style="color: #A5D6FF">    text-decoration: underline;</span></span>
<span class="line"><span style="color: #A5D6FF">    color: var(--md-sys-color-on-surface);</span></span>
<span class="line"><span style="color: #A5D6FF">  }</span></span>
<span class="line"><span style="color: #A5D6FF">`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span></code></pre>
<p>Here we are defining all the styles as <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties">CSS Custom Properties</a> so we can easily update them.</p>
<p>Now import the theme and apply the styles in the component:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { codeMirrorTheme } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./theme"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">customElement</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"code-window"</span><span style="color: #C9D1D9">)</span></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">CodeWindow</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">LitElement</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">static</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">styles</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">css</span><span style="color: #A5D6FF">`</span></span>
<span class="line"><span style="color: #A5D6FF">    ${</span><span style="color: #D2A8FF">unsafeCSS</span><span style="color: #A5D6FF">(</span><span style="color: #C9D1D9">codemirrorStyles</span><span style="color: #A5D6FF">)</span><span style="color: #A5D6FF">}</span></span>
<span class="line"><span style="color: #A5D6FF">    ${</span><span style="color: #C9D1D9">codeMirrorTheme</span><span style="color: #A5D6FF">}</span></span>
<span class="line"><span style="color: #A5D6FF">    ...</span></span></code></pre>
<p>Now we need to implement the <code>updateTheme</code> method in our element:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #D2A8FF">updateTheme</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">source</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.color;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">dark</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.dark;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">target</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.shadowRoot</span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">querySelector</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"main"</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLElement</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">properties</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> [</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-keyword: #c75779;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-operator: #008800;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-variable: #90ccff;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-variable-2: #dd7700;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-variable-3: #3333bb;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-variable-3: #decb6b;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-builtin: #003388;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-atom: #bb4646;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-number: #b4c5ff;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-def: #82aaff;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-string: #ffb4a9;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-string-2: #ffb4a9;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-comment: #888888;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-tag: #000080;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-meta: #a9c7ff;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-attribute: #008080;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-property: #336699;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-qualifier: #690;`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    ];</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">customColors</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> properties.</span><span style="color: #D2A8FF">map</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">property</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> [</span><span style="color: #79C0FF">key</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">value</span><span style="color: #C9D1D9">] </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> property.</span><span style="color: #D2A8FF">split</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">":"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">name</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> key.</span><span style="color: #D2A8FF">trim</span><span style="color: #C9D1D9">().</span><span style="color: #D2A8FF">replace</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">/</span><span style="color: #FF7B72">^</span><span style="color: #A5D6FF">--md-custom-color-/</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">""</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">color</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">argbFromHex</span><span style="color: #C9D1D9">(value.</span><span style="color: #D2A8FF">trim</span><span style="color: #C9D1D9">().</span><span style="color: #D2A8FF">replace</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">";"</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">""</span><span style="color: #C9D1D9">));</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        name,</span></span>
<span class="line"><span style="color: #C9D1D9">        value: color,</span></span>
<span class="line"><span style="color: #C9D1D9">        blend: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        };</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">theme</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">themeFromSourceColor</span><span style="color: #C9D1D9">(</span><span style="color: #D2A8FF">argbFromHex</span><span style="color: #C9D1D9">(source), customColors);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">applyTheme</span><span style="color: #C9D1D9">(theme, { target, dark });</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">for</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">custom</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">of</span><span style="color: #C9D1D9"> theme.customColors) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">name</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> custom.color.name;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">section</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> dark </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> custom.dark </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> custom.light;</span></span>
<span class="line"><span style="color: #C9D1D9">        target.style.</span><span style="color: #D2A8FF">setProperty</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">`--md-custom-color-${</span><span style="color: #C9D1D9">name</span><span style="color: #A5D6FF">}`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #D2A8FF">hexFromArgb</span><span style="color: #C9D1D9">(section.color)</span></span>
<span class="line"><span style="color: #C9D1D9">        );</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>Here we are using the <a href="https://github.com/material-foundation/material-color-utilities">Material Color Utilities</a> package and generating a theme from a source color. We can take advantage of Custom Colors to blend the values to the theme.</p>
<p>After the theme is generated we can apply them to the root element and have the custom properties update the editor.</p>
<p><img src="/attachments/dynamic-theme_purple-light.webp" alt="purple theme light"></p>
<p>Changing the source color can update the theme:</p>
<p><img src="/attachments/dynamic-theme_green-light.webp" alt="green theme light"></p>
<p>Changing the brightness can set the colors as well:</p>
<p><img src="/attachments/dynamic-theme_purple-dark.webp" alt="purple theme dark">
<img src="/attachments/dynamic-theme_green-dark.webp" alt="green theme dark"></p>
<h2 id="-4"><a aria-hidden="true" tabindex="-1" href="#-4"><span class="icon icon-link"></span></a>Conclusion</h2>
<p>If you want to learn more about building with Lit you can read the docs <a href="https://lit.dev">here</a>.</p>
<p>The source for this example can be found <a href="https://github.com/rodydavis/codemirror-dynamic-theme">here</a>.</p>
<p>If you want to check out dynamic themes for VSCode I created an extension <a href="https://github.com/rodydavis/vscode-dynamic-theme">here</a>.</p>
    </article>
  </main>
    </main>
    <footer class="astro-SZ7XMLTE">
  <div class="links astro-AUSHCPD5">
  <a class="social-icon astro-AUSHCPD5" href="https://github.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/github.svg" alt="github" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://twitter.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/twitter.svg" alt="twitter" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://facebook.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/facebook.svg" alt="facebook" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://instagram.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/instagram.svg" alt="instagram" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://youtube.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/youtube.svg" alt="youtube" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://tiktok.com/@rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/tiktok.svg" alt="tiktok" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://linkedin.com/in/rodydavis" target="_blank" rel="noopener">
            <img src="/social/linkedin.svg" alt="linkedin" class="astro-AUSHCPD5">
          </a>
</div>

  <div class="copyright astro-SZ7XMLTE">
    &copy; 2023
    Rody Davis. All rights reserved.
  </div>
</footer>
  </body></html>



