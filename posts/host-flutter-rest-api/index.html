<!DOCTYPE html><html domain=rodydavis.com ga-id=G-JQNPVBL9DR lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="/img/favicon/favicon-32x32.png?hash=3df5885280" rel=icon type=image/png><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>Host your Flutter Project as a REST API</title><meta content="Host your Flutter Project as a REST API" property=og:title><meta content="After you build your flutter project you may want to reuse the models and business logic from your lib folder. I will show you how to go..." name=description><meta content="After you build your flutter project you may want to reuse the models and business logic from your lib folder. I will show you how to go..." property=og:description><meta content=summary_large_image name=twitter:card><meta content=@rodydavis name=twitter:site><meta content=@rodydavis name=twitter:creator><meta content=https://rodydavis.com/img/remote/Z1D401D.jpeg property=og:image><link href=https://rodydavis.com/posts/host-flutter-rest-api/ rel=canonical><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate type=application/atom+xml title="Rody Davis"><link href=/ rel=preconnect crossorigin=""><script src="/js/min.js?hash=c372ec6a84" async defer></script><script src="/js/cached.js?hash=9030142fbb" async defer></script><script csp-hash="">if (/Mac OS X/.test(navigator.userAgent)) 
        document
          .documentElement
          .classList
          .add('apple')</script><script type=text/javascript>function getCode(repo, path, branch) {
        const url = `https://raw.githubusercontent.com/rodydavis/${repo}/${branch}/${path}`;
        return fetch(url).then((res) => res.text());
      }
      async function addFiles(tag, path, branch = "main") {
          const ide = document.querySelector('playground-ide');
          const ui = await getCode(tag, 'index.html', branch);
          const code = await getCode(tag, `src/${path}`, branch);
          const name = path.split('.ts').join('.js');
          const config = { files: {} };
          config.files['index.html'] = { content:  ui.split(`/src/${path}`).join(`./${name}`) };
          config.files[path] = { content: code };
          ide.config = config;
      }</script><style>playground-id {
        height: 500px;
        width: 100%;
      }</style><script src=https://unpkg.com/playground-elements@0.10.0/playground-ide.js?module type=module></script><style>@import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css);:root{--primary: #f9c412;--on-primary: #181818;--secondary: #e7bf60;--background: #181818;--on-background: #eee;--surface: #fff}.tags{display:wrap}.click{cursor:pointer;text-decoration:none}.chip{display:inline-block;padding:0 15px;border-radius:25px;margin:4px;background-color:var(--primary);color:var(--on-primary)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{z-index:1;position:fixed;top:0;left:0;width:100vw;padding:.375em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}:root{--main-width: calc(100vw - 3em)}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80;z-index:1000}header aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress{z-index:1;background-color:var(--primary);width:100vw;position:absolute;left:0;top:0;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:100;src:url(/fonts/Inter-Thin.woff2) format("woff2"),url(/fonts/Inter-Thin.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:100;src:url(/fonts/Inter-ThinItalic.woff2) format("woff2"),url(/fonts/Inter-ThinItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:200;src:url(/fonts/Inter-ExtraLight.woff2) format("woff2"),url(/fonts/Inter-ExtraLight.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:200;src:url(/fonts/Inter-ExtraLightItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraLightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:300;src:url(/fonts/Inter-Light.woff2) format("woff2"),url(/fonts/Inter-Light.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:300;src:url(/fonts/Inter-LightItalic.woff2) format("woff2"),url(/fonts/Inter-LightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:400;src:url(/fonts/Inter-Regular.woff2) format("woff2"),url(/fonts/Inter-Regular.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:400;src:url(/fonts/Inter-Italic.woff2) format("woff2"),url(/fonts/Inter-Italic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:500;src:url(/fonts/Inter-Medium.woff2) format("woff2"),url(/fonts/Inter-Medium.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:500;src:url(/fonts/Inter-MediumItalic.woff2) format("woff2"),url(/fonts/Inter-MediumItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:600;src:url(/fonts/Inter-SemiBold.woff2) format("woff2"),url(/fonts/Inter-SemiBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:600;src:url(/fonts/Inter-SemiBoldItalic.woff2) format("woff2"),url(/fonts/Inter-SemiBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:700;src:url(/fonts/Inter-Bold.woff2) format("woff2"),url(/fonts/Inter-Bold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:700;src:url(/fonts/Inter-BoldItalic.woff2) format("woff2"),url(/fonts/Inter-BoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:800;src:url(/fonts/Inter-ExtraBold.woff2) format("woff2"),url(/fonts/Inter-ExtraBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:800;src:url(/fonts/Inter-ExtraBoldItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:900;src:url(/fonts/Inter-Black.woff2) format("woff2"),url(/fonts/Inter-Black.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:900;src:url(/fonts/Inter-BlackItalic.woff2) format("woff2"),url(/fonts/Inter-BlackItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:normal;font-named-instance:"Regular";src:url(/fonts/Inter-roman.var.woff2) format("woff2")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:italic;font-named-instance:"Italic";src:url(/fonts/Inter-italic.var.woff2) format("woff2")}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}b{font-weight:700}img{border-style:none}button,input{font-family:inherit;font-size:100%;line-height:1.15;overflow:visible}button{text-transform:none}input{margin:0}[type=button],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}template{display:none}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}h1,h2,h3{margin-bottom:1.36rem}h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem;line-height:1.6rem}body,p,pre,ul{font-size:1em}p,pre,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem}h2{font-size:1.728rem}body,p,pre,ul{font-size:1rem;line-height:1.6}p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}h3{font-size:2.1989rem;line-height:2.64rem}body,p,pre,ul{font-size:1.1rem;line-height:1.6}h1,h2,h3,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h2{font-size:4.05rem;line-height:4.8rem}h3{font-size:2.7rem;line-height:2.88rem}body,p,pre,ul{font-size:1.2rem;line-height:1.6}h1,h2,h3,p,pre,ul{margin-bottom:1.632rem}}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre code:not([class]){padding:1.5em;overflow-x:scroll}code{border-radius:.3em;color:#e2777a;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d;padding:0}h1,h2,h3{font-family:var(--font-family)}h2{font-style:italic}a:hover{text-decoration:underline}dt{font-weight:600;padding-top:.75em;padding-left:.75em}@media (max-width:767px){x:-moz-any-link{display:table-cell}}@supports (font-variation-settings:normal){html{font-family:Inter UI var alt,sans-serif;--font-family: Inter UI var alt, sans-serif}}button,input{border-radius:.3em;max-width:100%}input{padding:.75em;margin-bottom:1.5em;display:inline}button,input[type=submit]{background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover,input[type=submit]:hover{background:#d9d9d9;color:var(--surface)}button:not([disabled]),button[type=submit],input[type=submit]{background:#f9c412;color:#181818}button:not([disabled]):hover,button[type=submit]:hover,input[type=submit]:hover{background:#ba9005;color:#000}input[type=date],input[type=datetime],input[type=file],input[type=number],input[type=text],input[type=time],input[type=url]{border:1px solid #595959;padding:.75em}*{border:0;box-sizing:border-box}header,img,video{margin:0 auto;max-width:100%}img,video{height:auto}body,header nav a{font-family:var(--font-family)}body{background:var(--background);color:var(--on-background)}header{padding:4.5em 1.5em 3em;width:37.5em;text-align:center;display:flex;align-items:center;flex-direction:column}header p,ul{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto;border-top:.5px solid #ccc}footer{background:var(--background);color:var(--on-background);text-align:center;padding:2em 2em 100px}footer>*{margin:.6em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li ul{margin-bottom:0}blockquote{border-left:1px solid #f9c412;padding:0 1.5em;margin:1.5em 0 1.5em 1.5em;border-left:1px solid var(--primary)}blockquote footer{background:0 0;display:block;color:#ccc;padding:.75em 0;font-size:90%;text-align:start}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;background:#2d2d2d}.token.comment{color:#999}.token.punctuation{color:#ccc}.token.namespace,.token.tag{color:#e2777a}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.important,.token.keyword{color:#cc99cd}.token.string{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.important{font-weight:700}.token.inserted{color:green}button:not([disabled]),button[type=submit],input[type=submit]{background:var(--primary)}button:not([disabled]):hover,button[type=submit]:hover,input[type=submit]:hover{background:var(--secondary)}</style><header><nav><div id=nav><h1><a href=/ title=Homepage>Rody Davis</a></h1><a href=/about/ >About</a> <a href=/talks/ >Talks</a> <a href=/apps/ >Apps</a></div><div id=reading-progress aria-hidden=true></div></nav><h1>Host your Flutter Project as a REST API</h1><aside>12 min read.</aside><dialog id=message></dialog><noscript><img src="/.netlify/functions/ga?v=1&_v=j83&t=pageview&dr=https%3A%2F%2Fno-script.com&_s=1&dh=rodydavis.com&dp=%2Fposts%2Fhost-flutter-rest-api%2F&ul=en-us&de=UTF-8&dt=Host%20your%20Flutter%20Project%20as%20a%20REST%20API&tid=G-JQNPVBL9DR" style=display:none width=1 alt="" height=1></noscript></header><main><article><div class=tags><a href=/tags/flutter class=click><div class=chip>flutter</div></a><a href=/tags/api class=click><div class=chip>api</div></a></div><p>After you build your flutter project you may want to reuse the models and business logic from your lib folder. I will show you how to go about setting up the project to have iOS, Android, Web, Windows, MacOS, Linux and a REST API interface with one project. The REST API can also be deploy to Google Cloud Run for Dart everywhere.</p><video aria-label=null autoplay loop muted src=/img/gifs/mind_blown.mp4 width=100%></video><blockquote><p>One Codebase for Client and Sever.</blockquote><p>This will allow you to expose your Dart models as a REST API and run your business logic from your lib folder while the application runs the models as they are. <a href=https://github.com/AppleEducate/shared_dart>Here</a> is the final project.<h2 id=setting-up>Setting Up <a href=#setting-up class=direct-link>#</a></h2><p>As with any Flutter project I am going to assume that you already have <a href=https://flutter.dev/ >Flutter</a> installed on your machine and that you can create a project. This is a intermediate level difficulty so read on if you are up to the challenge. You will also need to know the basics of <a href=https://www.docker.com/ >Docker</a>.<h2 id=why-one-project%3F>Why one project? <a href=#why-one-project%3F class=direct-link>#</a></h2><p>It may not be obvious but when building complex applications you will at some point have a server and an application that calls that server. <a href=https://firebase.google.com/ >Firebase</a> is an excellent option for doing this and I use it in almost all my projects. <a href=https://firebase.google.com/products/functions/ >Firebase Functions</a> are really powerful but you are limited by Javascript or Typescript. What if you could use the same packages that you are using in the Flutter project, or better yet what if they both used the same?</p><video aria-label=null autoplay loop muted src=/img/remote/Z16FYH1.mp4 width=100%></video><p>When you have a server project and a client project that communicate over a rest api or client sdk like Firebase then you will run into the problem that the server has models of objects stored and the client has models of the objects that are stored. This can lead to a serious mismatch when it changed without you knowing. GraphQL helps a lot with this since you define the model that you recieve. This approach allows your business logic to be always up to date for both the client and server.<h2 id=client-setup>Client Setup <a href=#client-setup class=direct-link>#</a></h2><p>The first step is to just build your application. The only difference that we will make is keeping the UI and business logic separate. When starting out with Flutter it can be very easy to throw all the logic into the screen and calling setState when the data changes. Even the application when creating a new Flutter project does this. That's why <a href=https://flutter.dev/docs/development/data-and-backend/state-mgmt/options>choosing a state management solution </a>is so important.</p><iframe frameborder=0 src=https://medium.com/media/64311732193c2dd39b2cdbc42965b538></iframe><p>To make things clean and concise we will make 2 folders in our lib folder.<ul><li><p>ui for all Flutter Widgets and Screens<li><p>src for all business logic, classes, models and utility functions</ul><p>This will leave us with main.dart being only the entry point into our client application.<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'plugins/desktop/desktop.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'ui/home/screen.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span><br>  <span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">MaterialApp</span><span class="token punctuation">(</span><br>      title<span class="token punctuation">:</span> <span class="token string">'Flutter Demo'</span><span class="token punctuation">,</span><br>      theme<span class="token punctuation">:</span> ThemeData<span class="token punctuation">.</span><span class="token function">light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      darkTheme<span class="token punctuation">:</span> ThemeData<span class="token punctuation">.</span><span class="token function">dark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      home<span class="token punctuation">:</span> <span class="token function">HomeScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Letâ€™s Start by making a tab bar for the 2 screens. Create a file in the folder ui/home/screen.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'../counter/screen.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'../todo/screen.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">HomeScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span><br>  <span class="token metadata symbol">@override</span><br>  _HomeScreenState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_HomeScreenState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">_HomeScreenState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>HomeScreen<span class="token operator">></span> <span class="token punctuation">{</span><br>  int _currentIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br><span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span><br>      body<span class="token punctuation">:</span> <span class="token function">IndexedStack</span><span class="token punctuation">(</span><br>        index<span class="token punctuation">:</span> _currentIndex<span class="token punctuation">,</span><br>        children<span class="token punctuation">:</span> <span class="token operator">&lt;</span>Widget<span class="token operator">></span><span class="token punctuation">[</span><br>          <span class="token function">CounterScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token function">TodosScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>      bottomNavigationBar<span class="token punctuation">:</span> <span class="token function">BottomNavigationBar</span><span class="token punctuation">(</span><br>        currentIndex<span class="token punctuation">:</span> _currentIndex<span class="token punctuation">,</span><br>        onTap<span class="token punctuation">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span>mounted<span class="token punctuation">)</span><br>            <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>              _currentIndex <span class="token operator">=</span> val<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>        type<span class="token punctuation">:</span> BottomNavigationBarType<span class="token punctuation">.</span>fixed<span class="token punctuation">,</span><br>        items<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>          <span class="token function">BottomNavigationBarItem</span><span class="token punctuation">(</span><br>            icon<span class="token punctuation">:</span> <span class="token function">Icon</span><span class="token punctuation">(</span>Icons<span class="token punctuation">.</span>add<span class="token punctuation">)</span><span class="token punctuation">,</span><br>            title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Counter'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token function">BottomNavigationBarItem</span><span class="token punctuation">(</span><br>            icon<span class="token punctuation">:</span> <span class="token function">Icon</span><span class="token punctuation">(</span>Icons<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">,</span><br>            title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Todos'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>This is just a basic screen and should look very normal.<h3 id=counter-example>Counter Example <a href=#counter-example class=direct-link>#</a></h3><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZQcuG2-1920w.avif 1920w, /img/remote/ZQcuG2-1280w.avif 1280w, /img/remote/ZQcuG2-640w.avif 640w, /img/remote/ZQcuG2-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZQcuG2-1920w.webp 1920w, /img/remote/ZQcuG2-1280w.webp 1280w, /img/remote/ZQcuG2-640w.webp 640w, /img/remote/ZQcuG2-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZQcuG2-1920w.jpg 1920w, /img/remote/ZQcuG2-1280w.jpg 1280w, /img/remote/ZQcuG2-640w.jpg 640w, /img/remote/ZQcuG2-320w.jpg 320w" type=image/jpeg><img src=/img/remote/ZQcuG2-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1168 2096'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVQI12NwCsvOrFp1+3/rxnv/Wzbc+1+98uZ/j/DsbIb83Jysz+/f/AeCHyD85ePb/2WlJXkMOTm5WS9evvr/58/fP0D8++WrV/9LiktyGIqLipNev379//fv339AGMSurKxMZyguLk5+BVT17du3PyAMYkMkioqSQar+/fv3B4TfvHnzv7KiIp2hqLAoCaQKatRvkH1l5UCJsrKy1I+fPoFc9QuEz9x9+z81rzKLITIiInTvvv3/QXjfvn3/d+3Z+z86OjaKAQg42NnY9KSlpcIkJSXD+Lg59YBinABIzKSvPTlBJAAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><p>Now create a file ui/counter/screen.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'package:shared_dart/src/models/counter.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">CounterScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span><br>  <span class="token metadata symbol">@override</span><br>  _CounterScreenState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_CounterScreenState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">_CounterScreenState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>CounterScreen<span class="token operator">></span> <span class="token punctuation">{</span><br>  CounterModel _counterModel <span class="token operator">=</span> <span class="token function">CounterModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">void</span> <span class="token function">_incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// This call to setState tells the Flutter framework that something has</span><br>      <span class="token comment">// changed in this State, which causes it to rerun the build method below</span><br>      <span class="token comment">// so that the display can reflect the updated values. If we changed</span><br>      <span class="token comment">// _counter without calling setState(), then the build method would not be</span><br>      <span class="token comment">// called again, and so nothing would appear to happen.</span><br>      _counterModel<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br><span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// This method is rerun every time setState is called, for instance as done</span><br>    <span class="token comment">// by the _incrementCounter method above.</span><br>    <span class="token comment">//</span><br>    <span class="token comment">// The Flutter framework has been optimized to make rerunning build methods</span><br>    <span class="token comment">// fast, so that you can just rebuild anything that needs updating rather</span><br>    <span class="token comment">// than having to individually change instances of widgets.</span><br>    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span><br>      appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span><br>        <span class="token comment">// Here we take the value from the MyCounterPage object that was created by</span><br>        <span class="token comment">// the App.build method, and use it to set our appbar title.</span><br>        title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Counter Screen'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>      body<span class="token punctuation">:</span> <span class="token function">Center</span><span class="token punctuation">(</span><br>        <span class="token comment">// Center is a layout widget. It takes a single child and positions it</span><br>        <span class="token comment">// in the middle of the parent.</span><br>        child<span class="token punctuation">:</span> <span class="token function">Column</span><span class="token punctuation">(</span><br>          <span class="token comment">// Column is also a layout widget. It takes a list of children and</span><br>          <span class="token comment">// arranges them vertically. By default, it sizes itself to fit its</span><br>          <span class="token comment">// children horizontally, and tries to be as tall as its parent.</span><br>          <span class="token comment">//</span><br>          <span class="token comment">// Invoke "debug painting" (press "p" in the console, choose the</span><br>          <span class="token comment">// "Toggle Debug Paint" action from the Flutter Inspector in Android</span><br>          <span class="token comment">// Studio, or the "Toggle Debug Paint" command in Visual Studio Code)</span><br>          <span class="token comment">// to see the wireframe for each widget.</span><br>          <span class="token comment">//</span><br>          <span class="token comment">// Column has various properties to control how it sizes itself and</span><br>          <span class="token comment">// how it positions its children. Here we use mainAxisAlignment to</span><br>          <span class="token comment">// center the children vertically; the main axis here is the vertical</span><br>          <span class="token comment">// axis because Columns are vertical (the cross axis would be</span><br>          <span class="token comment">// horizontal).</span><br>          mainAxisAlignment<span class="token punctuation">:</span> MainAxisAlignment<span class="token punctuation">.</span>center<span class="token punctuation">,</span><br>          children<span class="token punctuation">:</span> <span class="token operator">&lt;</span>Widget<span class="token operator">></span><span class="token punctuation">[</span><br>            <span class="token function">Text</span><span class="token punctuation">(</span><br>              <span class="token string">'You have pushed the button this many times:'</span><span class="token punctuation">,</span><br>            <span class="token punctuation">)</span><span class="token punctuation">,</span><br>            <span class="token function">Text</span><span class="token punctuation">(</span><br>              <span class="token string">'${_counterModel.count}'</span><span class="token punctuation">,</span><br>              style<span class="token punctuation">:</span> Theme<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>textTheme<span class="token punctuation">.</span>display1<span class="token punctuation">,</span><br>            <span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token punctuation">]</span><span class="token punctuation">,</span><br>        <span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>      floatingActionButton<span class="token punctuation">:</span> <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span><br>        onPressed<span class="token punctuation">:</span> _incrementCounter<span class="token punctuation">,</span><br>        tooltip<span class="token punctuation">:</span> <span class="token string">'Increment'</span><span class="token punctuation">,</span><br>        child<span class="token punctuation">:</span> <span class="token function">Icon</span><span class="token punctuation">(</span>Icons<span class="token punctuation">.</span>add<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// This trailing comma makes auto-formatting nicer for build methods.</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>This is the default counter app you get when you create a Flutter application but with one change, it uses <code>CounterModel</code> to hold the logic.<p>Create the counter model at src/models/counter.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token keyword">class</span> <span class="token class-name">CounterModel</span> <span class="token punctuation">{</span><br>  <span class="token function">CounterModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  int _count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br>  int <span class="token keyword">get</span> count <span class="token operator">=</span><span class="token operator">></span> _count<span class="token punctuation">;</span><br><br>  <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> _count<span class="token operator">++</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">void</span> <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> _count<span class="token operator">--</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">void</span> <span class="token keyword">set</span><span class="token punctuation">(</span>int val<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> _count <span class="token operator">=</span> val<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>As you can see it is really easy to expose only what we want to while still having complete flexibility. You could use provider here if you choose, or even bloc and/or streams.<h3 id=todo-example>Todo Example <a href=#todo-example class=direct-link>#</a></h3><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z1uVRaJ-1920w.avif 1920w, /img/remote/Z1uVRaJ-1280w.avif 1280w, /img/remote/Z1uVRaJ-640w.avif 640w, /img/remote/Z1uVRaJ-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z1uVRaJ-1920w.webp 1920w, /img/remote/Z1uVRaJ-1280w.webp 1280w, /img/remote/Z1uVRaJ-640w.webp 640w, /img/remote/Z1uVRaJ-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z1uVRaJ-1920w.jpg 1920w, /img/remote/Z1uVRaJ-1280w.jpg 1280w, /img/remote/Z1uVRaJ-640w.jpg 640w, /img/remote/Z1uVRaJ-320w.jpg 320w" type=image/jpeg><img src=/img/remote/Z1uVRaJ-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1168 2096'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6ElEQVQI1yWOvU7DMBSFvRW/Qskz9B3YeIH+CKkMrVCFDcQSaUnUMiFeBbEh9hgeAzGQnwElxGKolcGhrg5OeqTvDvfT1T3kZMgvV08feHj5wuNrgvXzJ07HnJNrztjPdw7AGjdMvf3FahncEMY4S9MMxhhr9/tdVSkEt8EV8X1/lqZpJ1qKokAURotWzLMsQ13XtqUTkRNCiHme551omsYqpQ4XwhezJEmgtbYuO6UqhHfhgrhHF2VZukL4a9lqjfvNhpHJeDKM4xhSSsSxhHx7x/l0ekZcjiilA8/zRsf9/oj2egO3o/9uQqNxJ0EqAgAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><p>Lets create a file at ui/todos/screen.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'../../src/classes/todo.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'../../src/models/todos.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">TodosScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span><br>  <span class="token metadata symbol">@override</span><br>  _TodosScreenState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_TodosScreenState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">_TodosScreenState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>TodosScreen<span class="token operator">></span> <span class="token punctuation">{</span><br>  <span class="token keyword">final</span> _model <span class="token operator">=</span> <span class="token function">TodosModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  List<span class="token operator">&lt;</span>ToDo<span class="token operator">></span> _todos<span class="token punctuation">;</span><br><br><span class="token metadata symbol">@override</span><br>  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    _model<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>mounted<span class="token punctuation">)</span><br>        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          _todos <span class="token operator">=</span> val<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br><span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span><br>      appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span><br>        title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Todos Screen'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>      body<span class="token punctuation">:</span> <span class="token function">Builder</span><span class="token punctuation">(</span><br>        builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">if</span> <span class="token punctuation">(</span>_todos <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> ListView<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><br>              itemCount<span class="token punctuation">:</span> _todos<span class="token punctuation">.</span>length<span class="token punctuation">,</span><br>              itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">final</span> _item <span class="token operator">=</span> _todos<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span><br>                <span class="token keyword">return</span> <span class="token function">ListTile</span><span class="token punctuation">(</span><br>                  title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span>_item<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span><br>                  subtitle<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span>_item<span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token string">'Completed'</span> <span class="token punctuation">:</span> <span class="token string">'Pending'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>                <span class="token punctuation">)</span><span class="token punctuation">;</span><br>              <span class="token punctuation">}</span><span class="token punctuation">,</span><br>            <span class="token punctuation">)</span><span class="token punctuation">;</span><br>          <span class="token punctuation">}</span><br>          <span class="token keyword">return</span> <span class="token function">Center</span><span class="token punctuation">(</span><br>            child<span class="token punctuation">:</span> <span class="token function">CircularProgressIndicator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>You will see that we have the logic in TodosModel and uses the class ToDo for toJson and fromJson.<p>Create a file at the location src/classes/todo.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token comment">// To parse this JSON data, do</span><br><span class="token comment">//</span><br><span class="token comment">//     final toDo = toDoFromJson(jsonString);</span><br><br><span class="token keyword">import</span> <span class="token string">'dart:convert'</span><span class="token punctuation">;</span><br><br>List<span class="token operator">&lt;</span>ToDo<span class="token operator">></span> <span class="token function">toDoFromJson</span><span class="token punctuation">(</span>String str<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> List<span class="token operator">&lt;</span>ToDo<span class="token operator">></span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> ToDo<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>String <span class="token function">toDoToJson</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>ToDo<span class="token operator">></span> data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> json<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span><span class="token keyword">dynamic</span><span class="token operator">></span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> x<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">ToDo</span> <span class="token punctuation">{</span><br>    int userId<span class="token punctuation">;</span><br>    int id<span class="token punctuation">;</span><br>    String title<span class="token punctuation">;</span><br>    bool completed<span class="token punctuation">;</span><br><br><span class="token function">ToDo</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>userId<span class="token punctuation">,</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>completed<span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">factory</span> ToDo<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> <span class="token keyword">dynamic</span><span class="token operator">></span> json<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">ToDo</span><span class="token punctuation">(</span><br>        userId<span class="token punctuation">:</span> json<span class="token punctuation">[</span><span class="token string">"userId"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>        id<span class="token punctuation">:</span> json<span class="token punctuation">[</span><span class="token string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>        title<span class="token punctuation">:</span> json<span class="token punctuation">[</span><span class="token string">"title"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>        completed<span class="token punctuation">:</span> json<span class="token punctuation">[</span><span class="token string">"completed"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> <span class="token keyword">dynamic</span><span class="token operator">></span> <span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token string">"userId"</span><span class="token punctuation">:</span> userId<span class="token punctuation">,</span><br>        <span class="token string">"id"</span><span class="token punctuation">:</span> id<span class="token punctuation">,</span><br>        <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span><br>        <span class="token string">"completed"</span><span class="token punctuation">:</span> completed<span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>and create the model src/models/todo.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'dart:convert'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'package:http/http.dart'</span> <span class="token operator">as</span> http<span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'package:shared_dart/src/classes/todo.dart'</span> <span class="token operator">as</span> t<span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">TodosModel</span> <span class="token punctuation">{</span><br>  <span class="token keyword">final</span> kTodosUrl <span class="token operator">=</span> <span class="token string">'[https://jsonplaceholder.typicode.com/todos'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>jsonplaceholder<span class="token punctuation">.</span>typicode<span class="token punctuation">.</span>com<span class="token operator">/</span>todos'<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>Future<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>t<span class="token punctuation">.</span>ToDo<span class="token operator">>></span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span><br>    <span class="token keyword">final</span> _response <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>kTodosUrl<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_response <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">final</span> _todos <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">toDoFromJson</span><span class="token punctuation">(</span>_response<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>_todos <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> _todos<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>Future<span class="token operator">&lt;</span>t<span class="token punctuation">.</span>ToDo<span class="token operator">></span> <span class="token function">getItem</span><span class="token punctuation">(</span>int id<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span><br>    <span class="token keyword">final</span> _response <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'$kTodosUrl/$id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_response <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">final</span> _todo <span class="token operator">=</span> t<span class="token punctuation">.</span>ToDo<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>_response<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>_todo <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> _todo<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Here we just get dummy data from a url that emits json and convert them to our classes. This is an example I want to show with networking. There is only one place that fetches the data.<h3 id=run-the-project-(web)>Run the Project (Web) <a href=#run-the-project-(web) class=direct-link>#</a></h3><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1UtyyW-1920w.avif 1920w, /img/remote/1UtyyW-1280w.avif 1280w, /img/remote/1UtyyW-640w.avif 640w, /img/remote/1UtyyW-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1UtyyW-1920w.webp 1920w, /img/remote/1UtyyW-1280w.webp 1280w, /img/remote/1UtyyW-640w.webp 640w, /img/remote/1UtyyW-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1UtyyW-1920w.jpg 1920w, /img/remote/1UtyyW-1280w.jpg 1280w, /img/remote/1UtyyW-640w.jpg 640w, /img/remote/1UtyyW-320w.jpg 320w" type=image/jpeg><img src=/img/remote/1UtyyW-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2624 2490'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuUlEQVQY012LywrCQAxF57MFv0NFUD/BCuK27ny2SEHUbjqjWEVRBOlM51GNiYMbA4ec3CRsGOWdUXKfDuJr2F9exoEnDKLLLJiINtsen+nuVIBHws/Ts4TN4bFmlS1X8HYAL2vh5SoPOma4WzApVWKMBW1MVWoNBDlluIuYUiqx+IBU6ECQUyaVP4hpMFjYHYGqv5lWc6bLMnPOgUXcH/mtSFmWZXUu9l3ORVMI0SI45w3svUWyrX0A9RXp7Lc6ISoAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z16GArz-1920w.avif 1920w, /img/remote/Z16GArz-1280w.avif 1280w, /img/remote/Z16GArz-640w.avif 640w, /img/remote/Z16GArz-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z16GArz-1920w.webp 1920w, /img/remote/Z16GArz-1280w.webp 1280w, /img/remote/Z16GArz-640w.webp 640w, /img/remote/Z16GArz-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z16GArz-1920w.jpg 1920w, /img/remote/Z16GArz-1280w.jpg 1280w, /img/remote/Z16GArz-640w.jpg 640w, /img/remote/Z16GArz-320w.jpg 320w" type=image/jpeg><img src=/img/remote/Z16GArz-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2624 2490'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxklEQVQY0z3LbWvCMBAH8HzswT6Hk8H0I6yC+Na9mw+rk4KKZSXJVCzxodo1bc0l7ky24MGPu/9xR7rh5qUXHQedya7/+iHegn/9IBTD4J0/k88vEc/XOcZpicutvHN5sTrNyM/5OEWjEK8AlvEAfzUaqMdkfzhE5zxHKUujFOBFKedvLssqJEKISEqJAGCXCj1jM1aVPUjTdFIUhVu60t7FH4xIlmXUfWmt78D3uq5jkiTJI+e8xRh7sr3pUMYbjH+3KaUPN18T6RLlgG7jAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><p>As you can see when you run your project on chrome you will get the same application that you got on mobile. Even the networking is working in the web. You can call the model and retrieve the list just like you would expect.<h2 id=server-setup>Server Setup <a href=#server-setup class=direct-link>#</a></h2><blockquote><p>Now time for the magic..</blockquote><p>In the root of the project folder create a file Dockerfile and add the following:<pre class=language-yaml><code class=language-yaml><span class="token comment"># Use Google's official Dart image.</span><br><span class="token comment"># [https://hub.docker.com/r/google/dart-runtime/](https://hub.docker.com/r/google/dart-runtime/)</span><br>FROM google/dart<span class="token punctuation">-</span>runtime</code></pre><p>Create another file at the root called service.yaml and add the following:<pre class=language-yaml><code class=language-yaml><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> serving.knative.dev/v1<br>    <span class="token atrule key">kind</span><span class="token punctuation">:</span> Service<br>    <span class="token atrule key">metadata</span><span class="token punctuation">:</span><br>      <span class="token atrule key">name</span><span class="token punctuation">:</span> PROJECT_NAME<br>      <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default<br>    <span class="token atrule key">spec</span><span class="token punctuation">:</span><br>      <span class="token atrule key">template</span><span class="token punctuation">:</span><br>        <span class="token atrule key">spec</span><span class="token punctuation">:</span><br>          <span class="token atrule key">containers</span><span class="token punctuation">:</span><br>            <span class="token punctuation">-</span> <span class="token atrule key">image</span><span class="token punctuation">:</span> docker.io/YOUR_DOCKER_NAME/PROJECT_NAME<br>              <span class="token atrule key">env</span><span class="token punctuation">:</span><br>                <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> TARGET<br>                  <span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token string">"PROJECT_NAME v1"</span></code></pre><p>Replace PROJECT_NAME with your project name, mine is shared-dart for this example.<p>You will also need to replace YOUR_DOCKER_NAME with your docker username so the container can be deployed correctly.<p>Update your pubspec.yaml with the following:<pre class=language-yaml><code class=language-yaml><span class="token atrule key">name</span><span class="token punctuation">:</span> shared_dart<br><span class="token atrule key">description</span><span class="token punctuation">:</span> A new Flutter project.<br><span class="token atrule key">publish_to</span><span class="token punctuation">:</span> none<br><span class="token atrule key">version</span><span class="token punctuation">:</span> 1.0.0+1<br><br><span class="token atrule key">environment</span><span class="token punctuation">:</span><br>  <span class="token atrule key">sdk</span><span class="token punctuation">:</span> <span class="token string">">=2.1.0 &lt;3.0.0"</span><br><br><span class="token atrule key">dependencies</span><span class="token punctuation">:</span><br>  <span class="token atrule key">flutter</span><span class="token punctuation">:</span><br>    <span class="token atrule key">sdk</span><span class="token punctuation">:</span> flutter<br>  <span class="token atrule key">shelf</span><span class="token punctuation">:</span> ^0.7.3<br>  <span class="token atrule key">cupertino_icons</span><span class="token punctuation">:</span> ^0.1.2<br>  <span class="token atrule key">http</span><span class="token punctuation">:</span> ^0.12.0+2<br><br><span class="token atrule key">dev_dependencies</span><span class="token punctuation">:</span><br>  <span class="token atrule key">flutter_test</span><span class="token punctuation">:</span><br>    <span class="token atrule key">sdk</span><span class="token punctuation">:</span> flutter<br><br><span class="token atrule key">flutter</span><span class="token punctuation">:</span><br>  <span class="token atrule key">uses-material-design</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre><p>The important package here is shelf as it allows us to run a http server with dart.<p>Create a folder in the root of the project called bin then add a file server.dart and replace it with the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'dart:io'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'package:shelf/shelf.dart'</span> <span class="token operator">as</span> shelf<span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'package:shelf/shelf_io.dart'</span> <span class="token operator">as</span> io<span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'src/routing.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">final</span> handler <span class="token operator">=</span> <span class="token keyword">const</span> shelf<span class="token punctuation">.</span><span class="token function">Pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">addMiddleware</span><span class="token punctuation">(</span>shelf<span class="token punctuation">.</span><span class="token function">logRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>RouteUtils<span class="token punctuation">.</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">final</span> port <span class="token operator">=</span> int<span class="token punctuation">.</span><span class="token function">tryParse</span><span class="token punctuation">(</span>Platform<span class="token punctuation">.</span>environment<span class="token punctuation">[</span><span class="token string">'PORT'</span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token string">'8080'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">final</span> address <span class="token operator">=</span> InternetAddress<span class="token punctuation">.</span>anyIPv4<span class="token punctuation">;</span><br><br>io<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span>handler<span class="token punctuation">,</span> address<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    server<span class="token punctuation">.</span>autoCompress <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'Serving at [http://${server.address.host}:${server.port}'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>$<span class="token punctuation">{</span>server<span class="token punctuation">.</span>address<span class="token punctuation">.</span>host<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>server<span class="token punctuation">.</span>port<span class="token punctuation">}</span>'<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>This will tell the container what port to listen for and how to handle the requests.<p>Create a folder src in the bin folder and add a file routing.dart and replace the contents with the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'dart:async'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'package:shelf/shelf.dart'</span> <span class="token operator">as</span> shelf<span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'controllers/index.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'result.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">RouteUtils</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> FutureOr<span class="token operator">&lt;</span>shelf<span class="token punctuation">.</span>Response<span class="token operator">></span> <span class="token function">handler</span><span class="token punctuation">(</span>shelf<span class="token punctuation">.</span>Request request<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> component <span class="token operator">=</span> request<span class="token punctuation">.</span>url<span class="token punctuation">.</span>pathSegments<span class="token punctuation">.</span>first<span class="token punctuation">;</span><br>    <span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token function">_handlers</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">[</span>component<span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> shelf<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">notFound</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> handler<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br><span class="token keyword">static</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> FutureOr<span class="token operator">&lt;</span>shelf<span class="token punctuation">.</span>Response<span class="token operator">>></span> <span class="token function">_handlers</span><span class="token punctuation">(</span><br>      shelf<span class="token punctuation">.</span>Request request<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">{</span><br>      <span class="token string">'info'</span><span class="token punctuation">:</span> <span class="token function">ServerResponse</span><span class="token punctuation">(</span><span class="token string">'Info'</span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>        <span class="token string">"version"</span><span class="token punctuation">:</span> <span class="token string">'v1.0.0'</span><span class="token punctuation">,</span><br>        <span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token string">'counter'</span><span class="token punctuation">:</span> <span class="token function">CounterController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token string">'todos'</span><span class="token punctuation">:</span> <span class="token function">TodoController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>There is still nothing imported from our main project but you will start to see some similarities. Here we specify controllers for todos and counter url paths.<pre class=language-dart><code class=language-dart><span class="token string">'counter'</span><span class="token punctuation">:</span> <span class="token function">CounterController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token string">'todos'</span><span class="token punctuation">:</span> <span class="token function">TodoController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre><p>that means any url with the following:<a href=https://mydomain.com/todos>https://mydomain.com/todos</a> , <a href=https://mydomain.com/todos>https://mydomain.com/todos</a>/1<p>will get routed to the TodoController to handle the request.<blockquote><p>This is also the first time I found out about FutureOr. It allows you to return a sync or async function.</blockquote><p>And important part about build a REST API is having a consistent response body, so here we can create a wrapper that adds fields we always want to return, like the status of the call, a message and the body.<p>Create a file at src/result.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'dart:convert'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'package:shelf/shelf.dart'</span> <span class="token operator">as</span> shelf<span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">ServerResponse</span> <span class="token punctuation">{</span><br>  <span class="token keyword">final</span> String message<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> <span class="token keyword">dynamic</span> body<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> StatusType type<span class="token punctuation">;</span><br><br><span class="token function">ServerResponse</span><span class="token punctuation">(</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> StatusType<span class="token punctuation">.</span>success<span class="token punctuation">,</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> <span class="token keyword">dynamic</span><span class="token operator">></span> <span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">{</span><br>      <span class="token string">"status"</span><span class="token punctuation">:</span> type<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'StatusType.'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token string">"message"</span><span class="token punctuation">:</span> message<span class="token punctuation">,</span><br>      <span class="token string">"body"</span><span class="token punctuation">:</span> body <span class="token operator">?</span><span class="token operator">?</span> <span class="token string">''</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>String <span class="token function">toJsonString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> json<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>shelf<span class="token punctuation">.</span>Response <span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> shelf<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><br>      <span class="token function">toJsonString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>        <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">enum</span> StatusType <span class="token punctuation">{</span> success<span class="token punctuation">,</span> error <span class="token punctuation">}</span><br><br><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">ResponseImpl</span> <span class="token punctuation">{</span><br>  Future<span class="token operator">&lt;</span>shelf<span class="token punctuation">.</span>Response<span class="token operator">></span> <span class="token function">result</span><span class="token punctuation">(</span>shelf<span class="token punctuation">.</span>Request request<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>This will always return json and the fields that we want to show. You could also include your paging meta data here.<p>Create a file in at the location src/controllers/counter.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'package:shared_dart/src/models/counter.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'package:shelf/shelf.dart'</span> <span class="token operator">as</span> shelf<span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'../result.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">CounterController</span> <span class="token keyword">implements</span> <span class="token class-name">ResponseImpl</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token function">CounterController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token metadata symbol">@override</span><br>  Future<span class="token operator">&lt;</span>shelf<span class="token punctuation">.</span>Response<span class="token operator">></span> <span class="token function">result</span><span class="token punctuation">(</span>shelf<span class="token punctuation">.</span>Request request<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span><br>    <span class="token keyword">final</span> _model <span class="token operator">=</span> <span class="token function">CounterModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">final</span> _params <span class="token operator">=</span> request<span class="token punctuation">.</span>url<span class="token punctuation">.</span>queryParameters<span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>_params <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">final</span> _val <span class="token operator">=</span> int<span class="token punctuation">.</span><span class="token function">tryParse</span><span class="token punctuation">(</span>_params<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      _model<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>_val<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      _model<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> <span class="token function">ServerResponse</span><span class="token punctuation">(</span><span class="token string">'Info'</span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>      <span class="token string">"counter"</span><span class="token punctuation">:</span> _model<span class="token punctuation">.</span>count<span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>You will see the import to the lib folder of the root project. Since it shares the pubspec.yaml all the packages can be shared. You can import the CounterModel that we created earlier.<p>Create a file in at the location src/controllers/todos.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'package:shared_dart/src/models/todos.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'package:shelf/src/request.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'package:shelf/src/response.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'../result.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">TodoController</span> <span class="token keyword">implements</span> <span class="token class-name">ResponseImpl</span> <span class="token punctuation">{</span><br>  <span class="token metadata symbol">@override</span><br>  Future<span class="token operator">&lt;</span>Response<span class="token operator">></span> <span class="token function">result</span><span class="token punctuation">(</span>Request request<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span><br>    <span class="token keyword">final</span> _model <span class="token operator">=</span> <span class="token function">TodosModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span>pathSegments<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">final</span> _id <span class="token operator">=</span> int<span class="token punctuation">.</span><span class="token function">tryParse</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span>pathSegments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">final</span> _todo <span class="token operator">=</span> <span class="token keyword">await</span> _model<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>_id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">return</span> <span class="token function">ServerResponse</span><span class="token punctuation">(</span><span class="token string">'Todo Item'</span><span class="token punctuation">,</span> body<span class="token punctuation">:</span> _todo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">final</span> _todos <span class="token operator">=</span> <span class="token keyword">await</span> _model<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token function">ServerResponse</span><span class="token punctuation">(</span><br>      <span class="token string">'List Todos'</span><span class="token punctuation">,</span><br>      body<span class="token punctuation">:</span> _todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> t<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Just like before we are importing the TodosModel model from the lib folder.<p>For convenience add a file at the location src/controllers/index.dart and add the following:<pre class=language-dart><code class=language-dart><span class="token keyword">export</span> <span class="token string">'counter.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token string">'todo.dart'</span><span class="token punctuation">;</span></code></pre><p>This will make it easier to import all the controllers.<h2 id=run-the-project-(server)>Run the Project (Server) <a href=#run-the-project-(server) class=direct-link>#</a></h2><p>If you are using <a href=https://code.visualstudio.com/ >VSCode</a> then you will need to update your launch.json with the following:<pre class=language-json><code class=language-json><span class="token punctuation">{</span><br>    <span class="token comment">// Use IntelliSense to learn about possible attributes.</span><br>    <span class="token comment">// Hover to view descriptions of existing attributes.</span><br>    <span class="token comment">// For more information, visit: [https://go.microsoft.com/fwlink/?linkid=830387](https://go.microsoft.com/fwlink/?linkid=830387)</span><br>    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span><br>    <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>        <span class="token punctuation">{</span><br>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Client"</span><span class="token punctuation">,</span><br>            <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span><br>            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"dart"</span><span class="token punctuation">,</span><br>            <span class="token property">"program"</span><span class="token operator">:</span> <span class="token string">"lib/main.dart"</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <br>          <span class="token punctuation">{</span><br>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Server"</span><span class="token punctuation">,</span><br>            <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span><br>            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"dart"</span><span class="token punctuation">,</span><br>            <span class="token property">"program"</span><span class="token operator">:</span> <span class="token string">"bin/server.dart"</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre><p>Now when you hit run with Server selected you will see the output:</p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1h3KXj-1920w.avif 1920w, /img/remote/1h3KXj-1280w.avif 1280w, /img/remote/1h3KXj-640w.avif 640w, /img/remote/1h3KXj-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1h3KXj-1920w.webp 1920w, /img/remote/1h3KXj-1280w.webp 1280w, /img/remote/1h3KXj-640w.webp 640w, /img/remote/1h3KXj-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1h3KXj-1920w.jpg 1920w, /img/remote/1h3KXj-1280w.jpg 1280w, /img/remote/1h3KXj-640w.jpg 640w, /img/remote/1h3KXj-320w.jpg 320w" type=image/jpeg><img src=/img/remote/1h3KXj-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 738 166'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAECAIAAAAI1ii7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfUlEQVQI11WMSQoEIRAE/YbQbo3LKNoi4gKC/3/WJC1zmDhVVUYlsdYaY5xztVYpJVattVIqhPB5SSlBuO8bM1LyPE+MEde1FlTvPVQMrbUxRikFRahDFyL8kGMDfM85c87weu942HtjpZQyxjjn1wu5frAXIQSyY5wL/+cLwksdIMnVza0AAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><p>You can navigate to this in a browser but you can also work with this in <a href=https://www.getpostman.com/ >Postman</a>.</p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z2l4J6d-1920w.avif 1920w, /img/remote/Z2l4J6d-1280w.avif 1280w, /img/remote/Z2l4J6d-640w.avif 640w, /img/remote/Z2l4J6d-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z2l4J6d-1920w.webp 1920w, /img/remote/Z2l4J6d-1280w.webp 1280w, /img/remote/Z2l4J6d-640w.webp 640w, /img/remote/Z2l4J6d-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z2l4J6d-1920w.jpg 1920w, /img/remote/Z2l4J6d-1280w.jpg 1280w, /img/remote/Z2l4J6d-640w.jpg 640w, /img/remote/Z2l4J6d-320w.jpg 320w" type=image/jpeg><img src=/img/remote/Z2l4J6d-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2398 1738'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAIAAABV+fA3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAVklEQVQI153JOwqAQAwE0Nz/bh7CwlLYlYT8N4qrpY2PYRgY6K0hIr2upUzbTstKIMI+mcXNVM2dWKG3o3c2D4+cUQ+NUDMQEkbPUaOe1NuQmfXh73cCW0i5bFq3DjYAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/j8cLh-1920w.avif 1920w, /img/remote/j8cLh-1280w.avif 1280w, /img/remote/j8cLh-640w.avif 640w, /img/remote/j8cLh-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/j8cLh-1920w.webp 1920w, /img/remote/j8cLh-1280w.webp 1280w, /img/remote/j8cLh-640w.webp 640w, /img/remote/j8cLh-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/j8cLh-1920w.jpg 1920w, /img/remote/j8cLh-1280w.jpg 1280w, /img/remote/j8cLh-640w.jpg 640w, /img/remote/j8cLh-320w.jpg 320w" type=image/jpeg><img src=/img/remote/j8cLh-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2394 1750'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAIAAABV+fA3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAa0lEQVQI112LWw5CMQhE2f/aXIS//hhN2mkLDEjvNRqdEB5zGBmAHrJDNYN2ueJ2b1Kn+3ark7VpcSybgDwfHbWS5rvUfOp+7xgy2xzdGRn5rlOMkMqPVn8ZH/tkpCwsNPsDX7ZzlqZJ/2Evnsi5TY8cO0MAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><p>Just by adding to the url todos and todos/1 it will return different responses.<p>For the counter model we can use query parameters too!</p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/UDzHf-1920w.avif 1920w, /img/remote/UDzHf-1280w.avif 1280w, /img/remote/UDzHf-640w.avif 640w, /img/remote/UDzHf-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/UDzHf-1920w.webp 1920w, /img/remote/UDzHf-1280w.webp 1280w, /img/remote/UDzHf-640w.webp 640w, /img/remote/UDzHf-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/UDzHf-1920w.jpg 1920w, /img/remote/UDzHf-1280w.jpg 1280w, /img/remote/UDzHf-640w.jpg 640w, /img/remote/UDzHf-320w.jpg 320w" type=image/jpeg><img src=/img/remote/UDzHf-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2384 1746'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAIAAABV+fA3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWUlEQVQI153JOw6AIBBF0dn/3tyDia2RgAzMj0EsJNp6cpuXByEcKUV8ZEShsu1lWRGYqnsz06E1G8mgVkkgxjNjZVHRJnZHojw+ZqiZmMx7n03g/p4ff78LY5a5g8hwesYAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/oTc6v-1920w.avif 1920w, /img/remote/oTc6v-1280w.avif 1280w, /img/remote/oTc6v-640w.avif 640w, /img/remote/oTc6v-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/oTc6v-1920w.webp 1920w, /img/remote/oTc6v-1280w.webp 1280w, /img/remote/oTc6v-640w.webp 640w, /img/remote/oTc6v-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/oTc6v-1920w.jpg 1920w, /img/remote/oTc6v-1280w.jpg 1280w, /img/remote/oTc6v-640w.jpg 640w, /img/remote/oTc6v-320w.jpg 320w" type=image/jpeg><img src=/img/remote/oTc6v-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2380 1662'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAGCAIAAACepSOSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAATklEQVQI132JSw6AIBBD5/43NW4wMDCdH8LGldq8pkkf9VYBwaqI7oFBjiJn6cTMA1A1NTePxRCEO2RQvRo3eKzMB4+pHrS/9+Sny/x1N/ean2mp3ryrAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><p>Just by adding ?count=22 it will update the model with the input.<blockquote><p>Keep in mind this is running your Dart code from you lib folder in your Flutter project without needing the Flutter widgets!</blockquote><p>As a side benefit we can also run this project on Desktop. Check out the final project for the desktop folders needed from <a href=https://github.com/google/flutter-desktop-embedding>Flutter Desktop Embedding</a>.</p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/i9eeY-1920w.avif 1920w, /img/remote/i9eeY-1280w.avif 1280w, /img/remote/i9eeY-640w.avif 640w, /img/remote/i9eeY-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/i9eeY-1920w.webp 1920w, /img/remote/i9eeY-1280w.webp 1280w, /img/remote/i9eeY-640w.webp 640w, /img/remote/i9eeY-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/i9eeY-1920w.jpg 1920w, /img/remote/i9eeY-1280w.jpg 1280w, /img/remote/i9eeY-640w.jpg 640w, /img/remote/i9eeY-320w.jpg 320w" type=image/jpeg><img src=/img/remote/i9eeY-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1824 1468'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA40lEQVQY002KwUrDQBRF53cEf6hu7ELcuJAi1oVpN/onLvwAQScKDcTsAt2JNDopFFocnWlq2knnzcQ8XyiCi3PP5b7Hjm8nhyd3X+89Xqa9h2J8+aTHrU/5d3p2r8TgJj1i6YsI3hZLnGmD8xX8w+KC/DqdX7HZVPTXqyV62Fr88TXWrm52WOqo1WfAsiy7UFqjqSq/3mwacgPgGksBzuGHlEMmhDhXSqHW2hLeGOOdcwRsySilDFie54OiKLAsSwQAbA+tK7vr9HTNwjDcS5KkG0VRJ47jgz8eR3HnmXbO+f4v6rzWMXdKGo8AAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z1ryrVm-1920w.avif 1920w, /img/remote/Z1ryrVm-1280w.avif 1280w, /img/remote/Z1ryrVm-640w.avif 640w, /img/remote/Z1ryrVm-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z1ryrVm-1920w.webp 1920w, /img/remote/Z1ryrVm-1280w.webp 1280w, /img/remote/Z1ryrVm-640w.webp 640w, /img/remote/Z1ryrVm-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z1ryrVm-1920w.jpg 1920w, /img/remote/Z1ryrVm-1280w.jpg 1280w, /img/remote/Z1ryrVm-640w.jpg 640w, /img/remote/Z1ryrVm-320w.jpg 320w" type=image/jpeg><img src=/img/remote/Z1ryrVm-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1824 1468'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVQY0x2OQUsCQRTH5+sEfSG95MFLJ6WoDq5e9Jt46xrUVKi4GyEIelOCpIK2dtQt19SZ93bZ13s78OP3/n+GmadOrxcntbuf17pOxmf6d9J4iCfiGufz2/Wi2R1X1ew98sINULhx9JUAfSdYuMjcz9/CtopX5jLPkBiXgs3A7jOxZOnj1dJTUWSuAJCYdH845NvtXy52UiDSemlayhhzgRwYx6RyCiPanUV6+Yg8udQEALIOSCzwK8S/FXvdTD87Smt9FARB5XHgl4a+X+a57LN7/X5p9PxUCXr3x//Qq9eSxaJ8MgAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><h2 id=conclusion>Conclusion <a href=#conclusion class=direct-link>#</a></h2><p>Now if you wanted to deploy the container to Cloud Run you could with the following command:<p>gcloud builds submit â€” tag <a href=http://gcr.io/YOUR_GOOGLE_PROJECT_ID/PROJECT_NAME>gcr.io/YOUR_GOOGLE_PROJECT_ID/PROJECT_NAME</a> .<p>Replace PROJECT_NAME with your project name, mine is shared-dart for this example.<p>You will also need to replace YOUR_GOOGLE_PROJECT_ID with your Google Cloud Project ID. You can create one <a href=https://cloud.google.com/cloud-build/docs/quickstart-docker>here</a>.<p>Again the final project source code is <a href=https://github.com/AppleEducate/shared_dart>here</a>. Let me know your thoughts!<h1>ðŸ™ðŸ™ðŸ™</h1><p>Since you've made it this far, <a href=https://rodydavis.com/posts/host-flutter-rest-api/ on-click=share>sharing</a> this article on your favorite social media network would be highly appreciated ðŸ’–! For feedback, please <a href=https://twitter.com/rodydavis rel=noopener target=_blank>ping me on Twitter.</a></p><share-widget><button aria-label=Share href=https://rodydavis.com/posts/host-flutter-rest-api/ on-click=share><div></div></button></share-widget><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Host your Flutter Project as a REST API","image":["https://rodydavis.com/img/remote/ZQcuG2-1920w.jpg","https://rodydavis.com/img/remote/Z1uVRaJ-1920w.jpg","https://rodydavis.com/img/remote/1UtyyW-1920w.jpg","https://rodydavis.com/img/remote/Z16GArz-1920w.jpg","https://rodydavis.com/img/remote/1h3KXj-1920w.jpg","https://rodydavis.com/img/remote/Z2l4J6d-1920w.jpg","https://rodydavis.com/img/remote/j8cLh-1920w.jpg","https://rodydavis.com/img/remote/UDzHf-1920w.jpg","https://rodydavis.com/img/remote/oTc6v-1920w.jpg","https://rodydavis.com/img/remote/i9eeY-1920w.jpg","https://rodydavis.com/img/remote/Z1ryrVm-1920w.jpg"],"author":"Rody Davis","genre":"https://schema.org/Code","publisher":{"@type":"Organization","name":"Rody Davis","logo":{"@type":"ImageObject","url":"/img/favicon/favicon-32x32.png?hash=3df5885280"}},"url":"https://rodydavis.com/posts/host-flutter-rest-api/","mainEntityOfPage":"https://rodydavis.com/posts/host-flutter-rest-api/","datePublished":"2019-10-18","dateModified":"2021-07-08","description":"After you build your flutter project you may want to reuse the models and business logic from your lib folder. I will show you how to go..."}</script><p>Published <time datetime=2019-10-18>18 Oct 2019</time></article></main><footer><a href=https://twitter.com/rodydavis class="fab fa-twitter" rel="noopener noreferrer" target=_blank></a> <a href=https://facebook.com/rodydavisjr class="fab fa-facebook" rel="noopener noreferrer" target=_blank></a> <a href=https://www.linkedin.com/in/rodydavis class="fab fa-linkedin" rel="noopener noreferrer" target=_blank></a> <a href=https://www.youtube.com/rodydavis class="fab fa-youtube" rel="noopener noreferrer" target=_blank></a> <a href=https://www.instagram.com/rodydavisjr class="fab fa-instagram" rel="noopener noreferrer" target=_blank></a> <a href=https://www.github.com/rodydavis class="fab fa-github" rel="noopener noreferrer" target=_blank></a> <a href=https://www.tiktok.com/@rodydavisjr class="fab fa-tiktok" rel="noopener noreferrer" target=_blank></a></footer><script src="https://www.googletagmanager.com/gtag/js?id=G-JQNPVBL9DR" async></script><script>window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-JQNPVBL9DR');</script>