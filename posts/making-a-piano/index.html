<!DOCTYPE html>
<html lang="en" class="astro-MDYSN4OI">
  <head>
    <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta name="generator" content="Astro v2.0.4">

<!-- Canonical URL -->
<link rel="canonical" href="https://rodydavis.com/posts/making-a-piano/">

<!-- Primary Meta Tags -->
<title>Building A Piano with Flutter</title>
<meta name="title" content="Building A Piano with Flutter">
<meta name="description">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://rodydavis.com/posts/making-a-piano/">
<meta property="og:title" content="Building A Piano with Flutter">
<meta property="og:description">
<meta property="og:image" content="https://rodydavis.com/placeholder-social.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://rodydavis.com/posts/making-a-piano/">
<meta property="twitter:title" content="Building A Piano with Flutter">
<meta property="twitter:description">
<meta property="twitter:image" content="https://rodydavis.com/placeholder-social.jpg">
    
  <link rel="stylesheet" href="/_astro/_...slug_.53535a8b.css" />
<link rel="stylesheet" href="/_astro/_...slug_.7a06253d.css" /></head>

  <body class="markdown-body astro-MDYSN4OI">
    <header class="astro-3EF6KSR2">
  <h2 class="astro-3EF6KSR2">
    <a href="/" class="astro-3EF6KSR2">Rody Davis</a>
  </h2>
  <nav class="astro-3EF6KSR2">
    <a href="/search?tags=app" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Apps</div>
</a><a href="/search?tags=posts" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Blog</div>
</a><a href="/talks" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Talks</div>
</a><a href="/about" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> About</div>
</a><a href="/search" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Search</div>
</a>
  </nav>
</header>
    <main class="astro-MDYSN4OI">
      <style>
	@media (min-width: 860px) {
		main {
			display: flex;
			flex-direction: row;
			justify-content: space-between;
		}
		article {
			flex: 1;
		}
		aside {
			display: block;
			position: sticky;
			top: 0;
			right: 0;
			max-height: 100vh;
			overflow-y: auto;
		}
	}
	</style><main class="astro-BVZIHDZO">
    <article class="astro-BVZIHDZO">
      
      <h1 class="title astro-BVZIHDZO">Building A Piano with Flutter</h1>
      
      
      <hr class="astro-BVZIHDZO">
      <blockquote>
<p><strong>TLDR</strong> The final source <a href="https://github.com/rodydavis/flutter_piano/tree/5k">here</a> and an online <a href="https://pocketpiano.app">demo</a>.</p>
</blockquote>
<iframe class="app" src="https://pocketpiano.app"></iframe>
<p>This piano uses only <code>5032</code> bytes of Dart Code!</p>
<p>Winner of the <a href="https://flutter.dev/create">Flutter Create Contest</a> and you can see the certificate <a href="https://www.credential.net/exbvca0q?key=8be94f32ad2f56882045e013e960fa888afa4edd52edb963c48df351c7d1e443">here</a>!</p>
<h2 id=""><a aria-hidden="true" tabindex="-1" href="#"><span class="icon icon-link"></span></a>What you will learn</h2>
<ul>
<li>Working with Dark Mode</li>
<li>Forcing app to be in landscape</li>
<li>Working with custom files bundled with the app</li>
<li>Working with midi and sounds in flutter</li>
<li>Working with <code>StatefulWidget</code></li>
<li>Using <code>SafeArea</code> and <code>Semantics</code></li>
<li>Building an app with minimal code</li>
</ul>
<h2 id="-1"><a aria-hidden="true" tabindex="-1" href="#-1"><span class="icon icon-link"></span></a>What you need</h2>
<ul>
<li><a href="https://flutter.dev/docs/get-started/install">Flutter SDK</a> Installed (<a href="https://flutter.dev/docs/get-started/codelab">More Info</a>)</li>
<li>A <code>.sf2</code> SoundFont File like <a href="https://github.com/rodydavis/flutter_piano/blob/5k/assets/sounds/Piano.sf2">this one</a></li>
<li>Physical iOS device (iOS Simulator does not work with this plugin for playing the sounds) or Android Emulator/Device</li>
</ul>
<h2 id="-2"><a aria-hidden="true" tabindex="-1" href="#-2"><span class="icon icon-link"></span></a>Setting Up</h2>
<p>You can either create a new project with Android Studio or VSCode using the GUI or navigate to the location you want your project and using this command in the terminal: <code>flutter create -i swift -a kotlin flutter_piano</code>. Make sure to include Swift and Kotlin Support!</p>
<p>Now that you have your project created it should look like this.</p>
<p><img src="/attachments/flutter_piano_starter.png" alt="app-icon"></p>
<p>Let’s start by adding some dependencies to our `pubspec.yaml’</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #7EE787">dependencies</span><span style="color: #C9D1D9">:</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">flutter</span><span style="color: #C9D1D9">:</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">sdk</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">flutter</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">tonic</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">^0.2.3</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">flutter_midi</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">^0.1.1+3</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">cupertino_icons</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">^0.1.2</span></span></code></pre>
<p>and add the .sf2 file</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> </span><span style="color: #7EE787">assets</span><span style="color: #C9D1D9">:</span></span>
<span class="line"><span style="color: #C9D1D9">   - </span><span style="color: #A5D6FF">assets/sounds/Piano.sf2</span></span></code></pre>
<p>If you haven’t already create a new folder at the top of your project call <code>assets</code> and a subfolder called <code>sounds</code> and place the .sf2 file there and make sure it is named <code>Piano.sf2</code></p>
<p>Because our app will only work in landscape we need to update those settings as well.</p>
<p>navigate to the <code>/android/app/src/main/AndroidManifest.xml</code> and add this line inside <code>&#x3C;activity</code> in the <code>&#x3C;application</code>:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">android:screenOrientation="landscape"</span></span></code></pre>
<p>Example:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&#x3C;</span><span style="color: #7EE787">manifest</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">xmlns:android</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"http://schemas.android.com/apk/res/android"</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">package</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"com.rodydavis.flutter_piano"</span><span style="color: #C9D1D9">></span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #8B949E">&#x3C;!-- io.flutter.app.FlutterApplication is an android.app.Application that</span></span>
<span class="line"><span style="color: #8B949E">         calls FlutterMain.startInitialization(this); in its onCreate method.</span></span>
<span class="line"><span style="color: #8B949E">         In most cases you can leave this as-is, but you if you want to provide</span></span>
<span class="line"><span style="color: #8B949E">         additional functionality it is fine to subclass or reimplement</span></span>
<span class="line"><span style="color: #8B949E">         FlutterApplication and put your custom class here. --></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">application</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">android:name</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"io.flutter.app.FlutterApplication"</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">android:label</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"flutter_piano"</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">android:icon</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"@mipmap/ic_launcher"</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">        &#x3C;</span><span style="color: #7EE787">activity</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">android:name</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">".MainActivity"</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">android:launchMode</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"singleTop"</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">android:theme</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"@style/LaunchTheme"</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">android:configChanges</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">android:hardwareAccelerated</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"true"</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">android:screenOrientation</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"landscape"</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">android:windowSoftInputMode</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"adjustResize"</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #8B949E">&#x3C;!-- This keeps the window background of the activity showing</span></span>
<span class="line"><span style="color: #8B949E">                 until Flutter renders its first frame. It can be removed if</span></span>
<span class="line"><span style="color: #8B949E">                 there is no splash screen (such as the default splash screen</span></span>
<span class="line"><span style="color: #8B949E">                 defined in @style/LaunchTheme). --></span></span>
<span class="line"><span style="color: #C9D1D9">            &#x3C;</span><span style="color: #7EE787">meta-data</span></span>
<span class="line"><span style="color: #C9D1D9">                </span><span style="color: #79C0FF">android:name</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"io.flutter.app.android.SplashScreenUntilFirstFrame"</span></span>
<span class="line"><span style="color: #C9D1D9">                </span><span style="color: #79C0FF">android:value</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"true"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">            &#x3C;</span><span style="color: #7EE787">intent-filter</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">                &#x3C;</span><span style="color: #7EE787">action</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">android:name</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"android.intent.action.MAIN"</span><span style="color: #C9D1D9">/></span></span>
<span class="line"><span style="color: #C9D1D9">                &#x3C;</span><span style="color: #7EE787">category</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">android:name</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"android.intent.category.LAUNCHER"</span><span style="color: #C9D1D9">/></span></span>
<span class="line"><span style="color: #C9D1D9">            &#x3C;/</span><span style="color: #7EE787">intent-filter</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">        &#x3C;/</span><span style="color: #7EE787">activity</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;/</span><span style="color: #7EE787">application</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;/</span><span style="color: #7EE787">manifest</span><span style="color: #C9D1D9">></span></span>
<span class="line"></span></code></pre>
<p>navigate to <code>/ios/Runner/info.plist</code> and change:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">&#x3C;key>UISupportedInterfaceOrientations&#x3C;/key></span></span>
<span class="line"><span style="color: #c9d1d9">&#x3C;array></span></span>
<span class="line"><span style="color: #c9d1d9">    &#x3C;string>UIInterfaceOrientationLandscapeLeft&#x3C;/string></span></span>
<span class="line"><span style="color: #c9d1d9">    &#x3C;string>UIInterfaceOrientationLandscapeRight&#x3C;/string></span></span>
<span class="line"><span style="color: #c9d1d9">&#x3C;/array></span></span></code></pre>
<p>Now we can start with the UI! When you run the application now it should start in landscape!</p>
<p><img src="/attachments/flutter_piano_landscape.png" alt="landscape"></p>
<h2 id="-3"><a aria-hidden="true" tabindex="-1" href="#-3"><span class="icon icon-link"></span></a>Step 1</h2>
<p>To make it eaiser to read lets remove the comments. Use “find and replace” and search for <code>\/\/.*</code></p>
<p><img src="/attachments/flutter_piano_comments.png" alt="comments"></p>
<p>choose the “select all occurrances” button and hit <code>backspace</code> to delete.</p>
<p><img src="/attachments/flutter_piano_selectall.png" alt="select all"></p>
<p>Hit save and you should see the code format for you.</p>
<p>The ‘main.dart’ file should look like this:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatelessWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        primarySwatch</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.blue,</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyHomePage</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo Home Page'</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyHomePage</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">MyHomePage</span><span style="color: #C9D1D9">({</span><span style="color: #79C0FF">Key</span><span style="color: #C9D1D9"> key, </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.title}) </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">(key</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> key);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9"> title;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_MyHomePageState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyHomePageState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyHomePageState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">MyHomePage</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> _counter </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_incrementCounter</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">setState</span><span style="color: #C9D1D9">(() {</span></span>
<span class="line"><span style="color: #C9D1D9">      _counter</span><span style="color: #FF7B72">++</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      appBar</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">AppBar</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(widget.title),</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">      body</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Center</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Column</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          mainAxisAlignment</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisAlignment</span><span style="color: #C9D1D9">.center,</span></span>
<span class="line"><span style="color: #C9D1D9">          children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #A5D6FF">'You have pushed the button this many times:'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            ),</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #A5D6FF">'$</span><span style="color: #79C0FF">_counter</span><span style="color: #A5D6FF">'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">              style</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Theme</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">of</span><span style="color: #C9D1D9">(context).textTheme.display1,</span></span>
<span class="line"><span style="color: #C9D1D9">            ),</span></span>
<span class="line"><span style="color: #C9D1D9">          ],</span></span>
<span class="line"><span style="color: #C9D1D9">        ),</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">      floatingActionButton</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">FloatingActionButton</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        onPressed</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> _incrementCounter,</span></span>
<span class="line"><span style="color: #C9D1D9">        tooltip</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Increment'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Icon</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">Icons</span><span style="color: #C9D1D9">.add),</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<h2 id="-4"><a aria-hidden="true" tabindex="-1" href="#-4"><span class="icon icon-link"></span></a>Step 2</h2>
<p>Delete the <code>MyHomePage</code> widget so you are left with this.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatelessWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        primarySwatch</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.blue,</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyHomePage</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo Home Page'</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<p>You should get an error and thats ok, we will fix that next.</p>
<p>Replace <code>MyHomePage(title: 'Flutter Demo Home Page')</code> with a <code>Scaffold()</code></p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatelessWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        primarySwatch</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.blue,</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<h2 id="-5"><a aria-hidden="true" tabindex="-1" href="#-5"><span class="icon icon-link"></span></a>Step 3</h2>
<p>Change <code>MyApp</code> to a <code>StatefulWidget</code>. You can do this quickly by selecting <code>MyApp</code> and choose “Convert to StatefulWidget” with the helper.</p>
<p><img src="/attachments/flutter_piano_convert.png" alt="convert"></p>
<p>It should look like this now:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        primarySwatch</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.blue,</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<h1 id="-6"><a aria-hidden="true" tabindex="-1" href="#-6"><span class="icon icon-link"></span></a>Step 4</h1>
<p>Change the theme to dark. You can do this by setting the <code>ThemeData</code> in <code>MaterialApp</code></p>
<p>change:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        primarySwatch</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.blue,</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span></code></pre>
<p>to this</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">dark</span><span style="color: #C9D1D9">(),</span></span></code></pre>
<p>Add and <code>AppBar</code> to the <code>Scaffold</code></p>
<p><code>  appBar: AppBar(title: Text("Flutter Piano")),</code></p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">dark</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        appBar</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">AppBar</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Flutter Piano"</span><span style="color: #C9D1D9">)),</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<p>Now build and run your app, it should look like this.</p>
<p><img src="/attachments/flutter_piano_darkmode.png" alt="dark-mode"></p>
<h2 id="-7"><a aria-hidden="true" tabindex="-1" href="#-7"><span class="icon icon-link"></span></a>Step 5</h2>
<p>We need to add some imports to the top:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/services.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter_midi/flutter_midi.dart'</span><span style="color: #C9D1D9">;</span></span></code></pre>
<p>If you get an error make sure they are added in the <code>pubspec.yaml</code> from earlier, then restart the app. Be sure to run <code>flutter packages get</code> everytime you add a dependency.</p>
<p>Now we can add out <code>initState()</code> to our app.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">   </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">unmute</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">   rootBundle.</span><span style="color: #D2A8FF">load</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"assets/sounds/Piano.sf2"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((sf2) {</span></span>
<span class="line"><span style="color: #C9D1D9">     </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">prepare</span><span style="color: #C9D1D9">(sf2</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> sf2, name</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"Piano.sf2"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">   });</span></span>
<span class="line"><span style="color: #C9D1D9">   </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9"> }</span></span>
<span class="line"></span></code></pre>
<p>Run the app and make sure you do not get any errors. If you are running this on the iOS Simulator you will get the following error:</p>
<blockquote>
<p>Could Not Load Midi on this Device. (Cannot run on simulator), have you included the sound font?</p>
</blockquote>
<p>It is ok for developing the UI but once we start with the midi you will need to plug in a real device.</p>
<p>Your code so far should look like this:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/services.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter_midi/flutter_midi.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">unmute</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    rootBundle.</span><span style="color: #D2A8FF">load</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"assets/sounds/Piano.sf2"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((sf2) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">prepare</span><span style="color: #C9D1D9">(sf2</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> sf2, name</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"Piano.sf2"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">dark</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        appBar</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">AppBar</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Flutter Piano"</span><span style="color: #C9D1D9">)),</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<h2 id="-8"><a aria-hidden="true" tabindex="-1" href="#-8"><span class="icon icon-link"></span></a>Step 6</h2>
<p>To make Flutter development faster we start with containers and colors so we can make sure everything is the right size.</p>
<p>Lets start by adding a <code>Drawer</code> with a <code>ListView</code> to our <code>Scaffold</code>.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        appBar</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">AppBar</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Flutter Piano"</span><span style="color: #C9D1D9">)),</span></span>
<span class="line"><span style="color: #C9D1D9">        drawer</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Drawer</span><span style="color: #C9D1D9">(child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">SafeArea</span><span style="color: #C9D1D9">(child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">(children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[]))),</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span></code></pre>
<p>You should now get a menu icon that when you press looks like this.</p>
<p><img src="/attachments/flutter_piano_menu.png" alt="menu"></p>
<p>Now lets add a ListView that scrolls Horizontially to the body of the <code>Scaffold</code></p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> body</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">builder</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">            itemCount</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">7</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            scrollDirection</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Axis</span><span style="color: #C9D1D9">.horizontal,</span></span>
<span class="line"><span style="color: #C9D1D9">            itemBuilder</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context, </span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> index) {</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">          )</span></span></code></pre>
<p>We need 7 <code>itemCount</code> for 7 octaves on the Piano.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/services.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter_midi/flutter_midi.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">unmute</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    rootBundle.</span><span style="color: #D2A8FF">load</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"assets/sounds/Piano.sf2"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((sf2) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">prepare</span><span style="color: #C9D1D9">(sf2</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> sf2, name</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"Piano.sf2"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">dark</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          appBar</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">AppBar</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Flutter Piano"</span><span style="color: #C9D1D9">)),</span></span>
<span class="line"><span style="color: #C9D1D9">          drawer</span><span style="color: #FF7B72">:</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #79C0FF">Drawer</span><span style="color: #C9D1D9">(child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">SafeArea</span><span style="color: #C9D1D9">(child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">(children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[]))),</span></span>
<span class="line"><span style="color: #C9D1D9">          body</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">builder</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">            itemCount</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">7</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            scrollDirection</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Axis</span><span style="color: #C9D1D9">.horizontal,</span></span>
<span class="line"><span style="color: #C9D1D9">            itemBuilder</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context, </span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> index) {</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">          )),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<h2 id="-9"><a aria-hidden="true" tabindex="-1" href="#-9"><span class="icon icon-link"></span></a>Step 7</h2>
<p>Now we need to build the octave section that will be repeated. Since every octave is identical we can repeat the octaves with minor adjustments.</p>
<p>Lets add some parameters for use to define for our UI. Add these underneath the initState function.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">get</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">keyWidth</span><span style="color: #C9D1D9"> => </span><span style="color: #79C0FF">80</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">80</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> _widthRatio);</span></span>
<span class="line"><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> _widthRatio </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> _showLabels </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">;</span></span></code></pre>
<p>We will use these to dynamily update the keys.</p>
<p>Under the <code>itemBuilder</code> lets define which octave we are working with by adding:
<code>final int i = index * 12;</code></p>
<p>Our code should look like this now:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/services.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter_midi/flutter_midi.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">unmute</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    rootBundle.</span><span style="color: #D2A8FF">load</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"assets/sounds/Piano.sf2"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((sf2) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">prepare</span><span style="color: #C9D1D9">(sf2</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> sf2, name</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"Piano.sf2"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">  </span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">get</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">keyWidth</span><span style="color: #C9D1D9"> => </span><span style="color: #79C0FF">80</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">80</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> _widthRatio);</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> _widthRatio </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> _showLabels </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">dark</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          appBar</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">AppBar</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Flutter Piano"</span><span style="color: #C9D1D9">)),</span></span>
<span class="line"><span style="color: #C9D1D9">          drawer</span><span style="color: #FF7B72">:</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #79C0FF">Drawer</span><span style="color: #C9D1D9">(child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">SafeArea</span><span style="color: #C9D1D9">(child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">(children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[]))),</span></span>
<span class="line"><span style="color: #C9D1D9">          body</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">builder</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">            itemCount</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">7</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            scrollDirection</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Axis</span><span style="color: #C9D1D9">.horizontal,</span></span>
<span class="line"><span style="color: #C9D1D9">            itemBuilder</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context, </span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> index) {</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> i </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> index </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">12</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">          )),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<h2 id="-10"><a aria-hidden="true" tabindex="-1" href="#-10"><span class="icon icon-link"></span></a>Step 8</h2>
<p>Now we need to add a <code>Stack</code> for our octave:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">SafeArea</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">               child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Stack</span><span style="color: #C9D1D9">(children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">                 </span><span style="color: #79C0FF">Row</span><span style="color: #C9D1D9">(mainAxisSize</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisSize</span><span style="color: #C9D1D9">.min, children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">                   </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">24</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                   </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">26</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                   </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">28</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                   </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">29</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                   </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">31</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                   </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">33</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                   </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">35</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                 ]),</span></span>
<span class="line"><span style="color: #C9D1D9">                 </span><span style="color: #79C0FF">Positioned</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                     left</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                     right</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                     bottom</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">100</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                     top</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                     child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Row</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                         mainAxisAlignment</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisAlignment</span><span style="color: #C9D1D9">.spaceBetween,</span></span>
<span class="line"><span style="color: #C9D1D9">                         mainAxisSize</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisSize</span><span style="color: #C9D1D9">.min,</span></span>
<span class="line"><span style="color: #C9D1D9">                         children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">                           </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">5</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                           </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">25</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                           </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">27</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                           </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth),</span></span>
<span class="line"><span style="color: #C9D1D9">                           </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">30</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                           </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">32</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                           </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">34</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                           </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">5</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                         ])),</span></span>
<span class="line"><span style="color: #C9D1D9">               ]),</span></span>
<span class="line"><span style="color: #C9D1D9">             );</span></span></code></pre>
<p>Here we have defined which midi notes are played for each octave.</p>
<p>Now add the function <code>_buildKey</code> underneath our <code>build</code> function.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> midi, </span><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> accidental) {</span></span>
<span class="line"><span style="color: #C9D1D9">     </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (accidental) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">          color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.black,</span></span>
<span class="line"><span style="color: #C9D1D9">          margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">          padding</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">1</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">          child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Material</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">            elevation</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">6.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">            shadowColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Color</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0x802196F3</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">          ));</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">        color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white,</span></span>
<span class="line"><span style="color: #C9D1D9">        margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">));</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span></code></pre>
<p>Also add <code>borderRadius</code> to the bottom of <code>main.dart</code></p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">BorderRadiusGeometry</span><span style="color: #C9D1D9"> borderRadius </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">BorderRadius</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">only</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">    bottomLeft</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Radius</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">circular</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10.0</span><span style="color: #C9D1D9">), bottomRight</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Radius</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">circular</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10.0</span><span style="color: #C9D1D9">));</span></span>
<span class="line"></span></code></pre>
<p>Your app should look like this:</p>
<p><img src="/attachments/flutter_piano_keys.png" alt="keys"></p>
<p>Your code should look like this:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/services.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter_midi/flutter_midi.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">unmute</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    rootBundle.</span><span style="color: #D2A8FF">load</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"assets/sounds/Piano.sf2"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((sf2) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">prepare</span><span style="color: #C9D1D9">(sf2</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> sf2, name</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"Piano.sf2"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">get</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">keyWidth</span><span style="color: #C9D1D9"> => </span><span style="color: #79C0FF">80</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">80</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> _widthRatio);</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> _widthRatio </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> _showLabels </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">dark</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          appBar</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">AppBar</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Flutter Piano"</span><span style="color: #C9D1D9">)),</span></span>
<span class="line"><span style="color: #C9D1D9">          drawer</span><span style="color: #FF7B72">:</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #79C0FF">Drawer</span><span style="color: #C9D1D9">(child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">SafeArea</span><span style="color: #C9D1D9">(child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">(children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[]))),</span></span>
<span class="line"><span style="color: #C9D1D9">          body</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">builder</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">            itemCount</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">7</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            scrollDirection</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Axis</span><span style="color: #C9D1D9">.horizontal,</span></span>
<span class="line"><span style="color: #C9D1D9">            itemBuilder</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context, </span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> index) {</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> i </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> index </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">12</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">SafeArea</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Stack</span><span style="color: #C9D1D9">(children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">                  </span><span style="color: #79C0FF">Row</span><span style="color: #C9D1D9">(mainAxisSize</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisSize</span><span style="color: #C9D1D9">.min, children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">24</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">26</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">28</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">29</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">31</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">33</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">35</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                  ]),</span></span>
<span class="line"><span style="color: #C9D1D9">                  </span><span style="color: #79C0FF">Positioned</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                      left</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                      right</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                      bottom</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">100</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                      top</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                      child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Row</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                          mainAxisAlignment</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisAlignment</span><span style="color: #C9D1D9">.spaceBetween,</span></span>
<span class="line"><span style="color: #C9D1D9">                          mainAxisSize</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisSize</span><span style="color: #C9D1D9">.min,</span></span>
<span class="line"><span style="color: #C9D1D9">                          children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">5</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">25</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">27</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">30</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">32</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">34</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">5</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                          ])),</span></span>
<span class="line"><span style="color: #C9D1D9">                ]),</span></span>
<span class="line"><span style="color: #C9D1D9">              );</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">          )),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> midi, </span><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> accidental) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (accidental) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">          color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.black,</span></span>
<span class="line"><span style="color: #C9D1D9">          margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">          padding</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">1</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">          child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Material</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">            elevation</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">6.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">            shadowColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Color</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0x802196F3</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">          ));</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">        color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white,</span></span>
<span class="line"><span style="color: #C9D1D9">        margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">));</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">BorderRadiusGeometry</span><span style="color: #C9D1D9"> borderRadius </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">BorderRadius</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">only</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">    bottomLeft</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Radius</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">circular</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10.0</span><span style="color: #C9D1D9">), bottomRight</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Radius</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">circular</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10.0</span><span style="color: #C9D1D9">));</span></span>
<span class="line"></span></code></pre>
<h2 id="-11"><a aria-hidden="true" tabindex="-1" href="#-11"><span class="icon icon-link"></span></a>Step 9</h2>
<p>Time to add midi by adding the following import to the top of the file:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:tonic/tonic.dart'</span><span style="color: #C9D1D9">;</span></span></code></pre>
<p>In the <code>-buildKey</code> function you can add this line:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> pitchName </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Pitch</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">fromMidiNumber</span><span style="color: #C9D1D9">(midi).</span><span style="color: #D2A8FF">toString</span><span style="color: #C9D1D9">();</span></span></code></pre>
<p>We can also create the piano key itself underneath it:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> pianoKey </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Stack</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">     children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">       </span><span style="color: #79C0FF">Semantics</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">           button</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">           hint</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> pitchName,</span></span>
<span class="line"><span style="color: #C9D1D9">           child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Material</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">               borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">               color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> accidental </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.black </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white,</span></span>
<span class="line"><span style="color: #C9D1D9">               child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">InkWell</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                 borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">                 highlightColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.grey,</span></span>
<span class="line"><span style="color: #C9D1D9">                 onTap</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> () {},</span></span>
<span class="line"><span style="color: #C9D1D9">                 onTapDown</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (_) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">playMidiNote</span><span style="color: #C9D1D9">(midi</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> midi),</span></span>
<span class="line"><span style="color: #C9D1D9">               ))),</span></span>
<span class="line"><span style="color: #C9D1D9">       </span><span style="color: #79C0FF">Positioned</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">           left</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">           right</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">           bottom</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">20.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">           child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> _showLabels</span></span>
<span class="line"><span style="color: #C9D1D9">               </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(pitchName,</span></span>
<span class="line"><span style="color: #C9D1D9">                   textAlign</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">TextAlign</span><span style="color: #C9D1D9">.center,</span></span>
<span class="line"><span style="color: #C9D1D9">                   style</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">TextStyle</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                       color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9">accidental </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.black </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white))</span></span>
<span class="line"><span style="color: #C9D1D9">               </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">()),</span></span>
<span class="line"><span style="color: #C9D1D9">     ],</span></span>
<span class="line"><span style="color: #C9D1D9">   );</span></span></code></pre>
<p>Remove the color from the container and replace it with <code>child: pianoKey,</code></p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (accidental) {</span></span>
<span class="line"><span style="color: #C9D1D9">     </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">         width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">         margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">         padding</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">1</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">         child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Material</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">             elevation</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">6.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">             borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">             shadowColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Color</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0x802196F3</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">             child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> pianoKey));</span></span>
<span class="line"><span style="color: #C9D1D9">   }</span></span>
<span class="line"><span style="color: #C9D1D9">   </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">       width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">       child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> pianoKey,</span></span>
<span class="line"><span style="color: #C9D1D9">       margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">));</span></span></code></pre>
<p>The complete function should look like this:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> midi, </span><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> accidental) {</span></span>
<span class="line"><span style="color: #C9D1D9">   </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> pitchName </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Pitch</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">fromMidiNumber</span><span style="color: #C9D1D9">(midi).</span><span style="color: #D2A8FF">toString</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">   </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> pianoKey </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Stack</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">     children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">       </span><span style="color: #79C0FF">Semantics</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">           button</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">           hint</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> pitchName,</span></span>
<span class="line"><span style="color: #C9D1D9">           child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Material</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">               borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">               color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> accidental </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.black </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white,</span></span>
<span class="line"><span style="color: #C9D1D9">               child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">InkWell</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                 borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">                 highlightColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.grey,</span></span>
<span class="line"><span style="color: #C9D1D9">                 onTap</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> () {},</span></span>
<span class="line"><span style="color: #C9D1D9">                 onTapDown</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (_) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">playMidiNote</span><span style="color: #C9D1D9">(midi</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> midi),</span></span>
<span class="line"><span style="color: #C9D1D9">               ))),</span></span>
<span class="line"><span style="color: #C9D1D9">       </span><span style="color: #79C0FF">Positioned</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">           left</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">           right</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">           bottom</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">20.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">           child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> _showLabels</span></span>
<span class="line"><span style="color: #C9D1D9">               </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(pitchName,</span></span>
<span class="line"><span style="color: #C9D1D9">                   textAlign</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">TextAlign</span><span style="color: #C9D1D9">.center,</span></span>
<span class="line"><span style="color: #C9D1D9">                   style</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">TextStyle</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                       color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9">accidental </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.black </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white))</span></span>
<span class="line"><span style="color: #C9D1D9">               </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">()),</span></span>
<span class="line"><span style="color: #C9D1D9">     ],</span></span>
<span class="line"><span style="color: #C9D1D9">   );</span></span>
<span class="line"><span style="color: #C9D1D9">   </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (accidental) {</span></span>
<span class="line"><span style="color: #C9D1D9">     </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">         width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">         margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">         padding</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">1</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">         child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Material</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">             elevation</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">6.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">             borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">             shadowColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Color</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0x802196F3</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">             child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> pianoKey));</span></span>
<span class="line"><span style="color: #C9D1D9">   }</span></span>
<span class="line"><span style="color: #C9D1D9">   </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">       width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">       child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> pianoKey,</span></span>
<span class="line"><span style="color: #C9D1D9">       margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">));</span></span>
<span class="line"><span style="color: #C9D1D9"> }</span></span></code></pre>
<p>Now when you run the app it should look like this:</p>
<p><img src="/attachments/flutter_piano_labels.png" alt="labels"></p>
<p>Almost there! Now let’s give our user some control.</p>
<h2 id="-12"><a aria-hidden="true" tabindex="-1" href="#-12"><span class="icon icon-link"></span></a>Step 10</h2>
<p>Add these settings to the <code>Drawer</code></p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(height</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">20.0</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #79C0FF">ListTile</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Change Width"</span><span style="color: #C9D1D9">)),</span></span>
<span class="line"><span style="color: #79C0FF">Slider</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">    activeColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.redAccent,</span></span>
<span class="line"><span style="color: #C9D1D9">    inactiveColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white,</span></span>
<span class="line"><span style="color: #C9D1D9">    min</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    max</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">1.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    value</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> _widthRatio,</span></span>
<span class="line"><span style="color: #C9D1D9">    onChanged</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> value) </span><span style="color: #FF7B72">=></span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #D2A8FF">setState</span><span style="color: #C9D1D9">(() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> _widthRatio </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> value)),</span></span>
<span class="line"><span style="color: #79C0FF">Divider</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #79C0FF">ListTile</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">    title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Show Labels"</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">    trailing</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Switch</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">    value</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> _showLabels,</span></span>
<span class="line"><span style="color: #C9D1D9">    onChanged</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> value) </span><span style="color: #FF7B72">=></span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #D2A8FF">setState</span><span style="color: #C9D1D9">(() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> _showLabels </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> value))),</span></span>
<span class="line"><span style="color: #79C0FF">Divider</span><span style="color: #C9D1D9">(),</span></span></code></pre>
<p>Now you should see this:</p>
<p><img src="/attachments/flutter_piano_settings.png" alt="settings"></p>
<h2 id="-13"><a aria-hidden="true" tabindex="-1" href="#-13"><span class="icon icon-link"></span></a>Step 11</h2>
<p>To start with <code>Middle C</code> lets add an inital scroll offset to the <code>ListView</code></p>
<p><code>  controller: ScrollController(initialScrollOffset: 1500.0),</code></p>
<p>Now when we start the app it should co to C4.</p>
<p>The final App should look like this:</p>
<p><img src="/attachments/flutter_piano_final.png" alt="final"></p>
<p>The final code should look like this:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/services.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter_midi/flutter_midi.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:tonic/tonic.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyAppState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">unmute</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    rootBundle.</span><span style="color: #D2A8FF">load</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"assets/sounds/Piano.sf2"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((sf2) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">prepare</span><span style="color: #C9D1D9">(sf2</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> sf2, name</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"Piano.sf2"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">initState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">get</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">keyWidth</span><span style="color: #C9D1D9"> => </span><span style="color: #79C0FF">80</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">80</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> _widthRatio);</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> _widthRatio </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> _showLabels </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Demo'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">dark</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          appBar</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">AppBar</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Flutter Piano"</span><span style="color: #C9D1D9">)),</span></span>
<span class="line"><span style="color: #C9D1D9">          drawer</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Drawer</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">              child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">SafeArea</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                  child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">(children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(height</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">20.0</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">ListTile</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Change Width"</span><span style="color: #C9D1D9">)),</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">Slider</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                activeColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.redAccent,</span></span>
<span class="line"><span style="color: #C9D1D9">                inactiveColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white,</span></span>
<span class="line"><span style="color: #C9D1D9">                min</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                max</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">1.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                value</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> _widthRatio,</span></span>
<span class="line"><span style="color: #C9D1D9">                onChanged</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">double</span><span style="color: #C9D1D9"> value) </span><span style="color: #FF7B72">=></span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">setState</span><span style="color: #C9D1D9">(() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> _widthRatio </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> value)),</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">Divider</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">ListTile</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"Show Labels"</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                trailing</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Switch</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                    value</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> _showLabels,</span></span>
<span class="line"><span style="color: #C9D1D9">                    onChanged</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> value) </span><span style="color: #FF7B72">=></span></span>
<span class="line"><span style="color: #C9D1D9">                        </span><span style="color: #D2A8FF">setState</span><span style="color: #C9D1D9">(() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> _showLabels </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> value))),</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">Divider</span><span style="color: #C9D1D9">(),</span></span>
<span class="line"><span style="color: #C9D1D9">          ]))),</span></span>
<span class="line"><span style="color: #C9D1D9">          body</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ListView</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">builder</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">            itemCount</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">7</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            scrollDirection</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Axis</span><span style="color: #C9D1D9">.horizontal,</span></span>
<span class="line"><span style="color: #C9D1D9">            controller</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ScrollController</span><span style="color: #C9D1D9">(initialScrollOffset</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">1500.0</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">            itemBuilder</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context, </span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> index) {</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> i </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> index </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">12</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">SafeArea</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Stack</span><span style="color: #C9D1D9">(children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">                  </span><span style="color: #79C0FF">Row</span><span style="color: #C9D1D9">(mainAxisSize</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisSize</span><span style="color: #C9D1D9">.min, children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">24</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">26</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">28</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">29</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">31</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">33</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                    </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">35</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                  ]),</span></span>
<span class="line"><span style="color: #C9D1D9">                  </span><span style="color: #79C0FF">Positioned</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                      left</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                      right</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                      bottom</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">100</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                      top</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                      child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Row</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                          mainAxisAlignment</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisAlignment</span><span style="color: #C9D1D9">.spaceBetween,</span></span>
<span class="line"><span style="color: #C9D1D9">                          mainAxisSize</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MainAxisSize</span><span style="color: #C9D1D9">.min,</span></span>
<span class="line"><span style="color: #C9D1D9">                          children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">5</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">25</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">27</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">30</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">32</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">34</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> i, </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                            </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">5</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">                          ])),</span></span>
<span class="line"><span style="color: #C9D1D9">                ]),</span></span>
<span class="line"><span style="color: #C9D1D9">              );</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">          )),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_buildKey</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">int</span><span style="color: #C9D1D9"> midi, </span><span style="color: #79C0FF">bool</span><span style="color: #C9D1D9"> accidental) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> pitchName </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Pitch</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">fromMidiNumber</span><span style="color: #C9D1D9">(midi).</span><span style="color: #D2A8FF">toString</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> pianoKey </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Stack</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      children</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">Widget</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">[</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">Semantics</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">            button</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            hint</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> pitchName,</span></span>
<span class="line"><span style="color: #C9D1D9">            child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Material</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">                color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> accidental </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.black </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white,</span></span>
<span class="line"><span style="color: #C9D1D9">                child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">InkWell</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                  borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">                  highlightColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.grey,</span></span>
<span class="line"><span style="color: #C9D1D9">                  onTap</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> () {},</span></span>
<span class="line"><span style="color: #C9D1D9">                  onTapDown</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (_) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">FlutterMidi</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">playMidiNote</span><span style="color: #C9D1D9">(midi</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> midi),</span></span>
<span class="line"><span style="color: #C9D1D9">                ))),</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">Positioned</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">            left</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            right</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            bottom</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">20.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">            child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> _showLabels</span></span>
<span class="line"><span style="color: #C9D1D9">                </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(pitchName,</span></span>
<span class="line"><span style="color: #C9D1D9">                    textAlign</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">TextAlign</span><span style="color: #C9D1D9">.center,</span></span>
<span class="line"><span style="color: #C9D1D9">                    style</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">TextStyle</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">                        color</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9">accidental </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.black </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.white))</span></span>
<span class="line"><span style="color: #C9D1D9">                </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">()),</span></span>
<span class="line"><span style="color: #C9D1D9">      ],</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (accidental) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">          margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">          padding</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> .</span><span style="color: #79C0FF">1</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">          child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Material</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">              elevation</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">6.0</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">              borderRadius</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> borderRadius,</span></span>
<span class="line"><span style="color: #C9D1D9">              shadowColor</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Color</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0x802196F3</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">              child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> pianoKey));</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Container</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        width</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> keyWidth,</span></span>
<span class="line"><span style="color: #C9D1D9">        child</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> pianoKey,</span></span>
<span class="line"><span style="color: #C9D1D9">        margin</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EdgeInsets</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">symmetric</span><span style="color: #C9D1D9">(horizontal</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2.0</span><span style="color: #C9D1D9">));</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">BorderRadiusGeometry</span><span style="color: #C9D1D9"> borderRadius </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">BorderRadius</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">only</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">    bottomLeft</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Radius</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">circular</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10.0</span><span style="color: #C9D1D9">), bottomRight</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Radius</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">circular</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">10.0</span><span style="color: #C9D1D9">));</span></span>
<span class="line"></span></code></pre>
<h1 id="-14"><a aria-hidden="true" tabindex="-1" href="#-14"><span class="icon icon-link"></span></a>Conclusion</h1>
<p>If you delete <code>tests/</code> and run <code>find . -name "*.dart" | xargs cat | wc -c</code> you will see that the dart code only uses <code>5032</code> bytes of space!</p>
<p>Now we have a fully functional piano that you can play with and enjoy on iOS and Android.</p>
<p>I was really inspired when creating this for the <a href="https://flutter.dev/create">Flutter Create</a> contest.</p>
<p>Hope you learned something, if you have any questions you can always read out to me. This is an open source piano and would love PRs on the main project <a href="https://github.com/rodydavis/flutter_piano">here</a>!</p>
    </article>
    <aside class="astro-BVZIHDZO">
      <nav class="astro-XVRFUPWN">
  <h2 class="astro-XVRFUPWN">Table of Contents</h2>
  <ul class="astro-XVRFUPWN">
    <li class="astro-XVRFUPWN">
          <a href="#" class="heading-depth-2 astro-XVRFUPWN">
            What you will learn
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-1" class="heading-depth-2 astro-XVRFUPWN">
            What you need
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-2" class="heading-depth-2 astro-XVRFUPWN">
            Setting Up
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-3" class="heading-depth-2 astro-XVRFUPWN">
            Step 1
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-4" class="heading-depth-2 astro-XVRFUPWN">
            Step 2
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-5" class="heading-depth-2 astro-XVRFUPWN">
            Step 3
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-6" class="heading-depth-1 astro-XVRFUPWN">
            Step 4
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-7" class="heading-depth-2 astro-XVRFUPWN">
            Step 5
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-8" class="heading-depth-2 astro-XVRFUPWN">
            Step 6
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-9" class="heading-depth-2 astro-XVRFUPWN">
            Step 7
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-10" class="heading-depth-2 astro-XVRFUPWN">
            Step 8
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-11" class="heading-depth-2 astro-XVRFUPWN">
            Step 9
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-12" class="heading-depth-2 astro-XVRFUPWN">
            Step 10
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-13" class="heading-depth-2 astro-XVRFUPWN">
            Step 11
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-14" class="heading-depth-1 astro-XVRFUPWN">
            Conclusion
          </a>
        </li>
  </ul>
</nav>
    </aside>
  </main>
    </main>
    <footer class="astro-SZ7XMLTE">
  <div class="links astro-AUSHCPD5">
  <a class="social-icon astro-AUSHCPD5" href="https://github.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/github.svg" alt="github" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://twitter.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/twitter.svg" alt="twitter" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://facebook.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/facebook.svg" alt="facebook" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://instagram.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/instagram.svg" alt="instagram" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://youtube.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/youtube.svg" alt="youtube" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://tiktok.com/@rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/tiktok.svg" alt="tiktok" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://linkedin.com/in/rodydavis" target="_blank" rel="noopener">
            <img src="/social/linkedin.svg" alt="linkedin" class="astro-AUSHCPD5">
          </a>
</div>

  <div class="copyright astro-SZ7XMLTE">
    &copy; 2023
    Rody Davis. All rights reserved.
  </div>
</footer>
  </body></html>