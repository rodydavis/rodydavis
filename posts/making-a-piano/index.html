<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="icon" type="image/x-icon" href="/img/favicon/favicon.ico">

<!-- Primary Meta Tags -->
<title>Building A Piano with Flutter</title>
<meta name="title" content="Building A Piano with Flutter">
<meta name="description">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url">
<meta property="og:title" content="Building A Piano with Flutter">
<meta property="og:description">
<meta property="og:image" content="https://astro.build/social.jpg?v=1">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url">
<meta property="twitter:title" content="Building A Piano with Flutter">
<meta property="twitter:description">
<meta property="twitter:image" content="https://astro.build/social.jpg?v=1">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&family=IBM+Plex+Sans:wght@400;700&display=swap">
<link href="https://fonts.googleapis.com/css?family=Material+Icons&display=block" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-themes@1.9.0/themes/prism-lucario.css">
<link rel="stylesheet" href="https://rodydavis.github.io/material-css/all.css"> 

<script type="module" src="https://rodydavis.github.io/material-theme-control/material-theme-control.es.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JQNPVBL9DR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-JQNPVBL9DR');
</script>
	<link rel="stylesheet" href="/assets/_slug_.1ed25ffe.css"></link>
<link rel="stylesheet" href="/assets/social-links.c963b757.css"></link>
<link rel="stylesheet" href="/assets/BlogContent.6b85ce27.css"></link><style astro-style="true">astro-root, astro-fragment { display: contents; }</style><script type="module" astro-script="/posts/making-a-piano//script-0">import "../../client-shim.6d491e7a.js";</script>
<script type="module" data-astro-component-hydration astro-script="/posts/making-a-piano//script-1">import setup from '../../load.732510f7.js';
setup("21bm0X", {name:"app-header",value: true}, async () => {
  await Promise.all([
  import("../../hydration-support.3bb20349.js")]);
await import("../../app-header.a17b272f.js");
  return () => {};

});
</script>
</head>

	<body>
		<astro-root uid="21bm0X"><app-header><template shadowroot="open"><style>
    header {
      --input-size: 32px;
    }
    .spacer {
      flex: 1;
    }
    .title {
      display: block;
      white-space: nowrap;
    }
    .title-prefix {
      display: block;
    }
    .title-details {
      max-width: 200px;
      text-overflow: ellipsis;
      overflow: hidden;
    }
    a {
      text-decoration: none;
      display: inline-flex;
      color: var(--md-sys-color-on-primary-container);
      margin-right: 1rem;
    }
    a:hover {
      text-decoration: underline;
    }
    .links {
      display: none;
      align-items: center;
    }
    @media (min-width: 200px) {
      .title {
        display: block;
      }
    }
    @media (min-width: 600px) {
      .links {
        display: flex;
      }
    }
    @media (min-width: 700px) {
      .title-prefix {
        display: block;
      }
      .title-details {
        max-width: 350px;
      }
    }
    @media (min-width: 900px) {
      .title-details {
        max-width: 450px;
      }
    }
  </style><!--lit-part NEB6RbqyFS0=-->
      <link
        rel="stylesheet"
        href="https://rodydavis.github.io/material-css/all.css"
      />
      <header class="top-app-bar">
        <h1 class="title">
          <a href="/">
            <div class="title-prefix">Rody Davis</div>
            <!--lit-part F7wN3VMcQAI=--><div class="title-prefix">&nbsp;|&nbsp;</div>
                  <div class="title-details"><!--lit-part-->Building A Piano with Flutter<!--/lit-part--></div><!--/lit-part-->
          </a>
        </h1>

        <div class="actions">
          <div class="links">
            <a href="/apps"> Apps </a>
            <a href="/posts"> Blog </a>
            <a href="/talks"> Talks </a>
            <a href="/about"> About </a>
          </div>
          <material-theme-control></material-theme-control>
          <!--lit-part BRUAAAUVAAA=--><?><!--/lit-part-->
        </div>
      </header>
    <!--/lit-part--></template></app-header></astro-root>
		<div class="wrapper">
			<div class="layout astro-6ZXIMRXV">
	<article class="content astro-6ZXIMRXV">
		<div class="astro-6ZXIMRXV">
			<header class="astro-6ZXIMRXV">
				<img width="720" height="420" class="hero-image astro-6ZXIMRXV" loading="lazy" src="/img/flutter_piano/final.png">
				<p class="publish-date astro-6ZXIMRXV">12 Mar 2019 ~ 15 min read</p>
				<h1 class="title astro-6ZXIMRXV">Building A Piano with Flutter</h1>
				<div class="author astro-KO5QTRDP">
	<p class="astro-KO5QTRDP"><a href="/about" class="astro-KO5QTRDP">@rodydavis</a></p>
</div>



				 <tag-list class="astro-6ZXIMRXV"><template shadowroot="open"><style>
    .tags {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      margin-left: 2rem;
      margin-right: 2rem;
      width: calc(100% - 4rem);
    }
    tag-item {
      margin-bottom: 0.4rem;
      margin-top: 0.4rem;
    }
    .tags[card] {
      align-items: flex-start;
      justify-content: flex-start;
      margin-left: 0;
    }
  </style><!--lit-part dtEA4j2r9MY=--> <div class="tags" ><!--lit-node 0-->
      <!--lit-part--><!--lit-part VvgdIGM/dSs=--><tag-item  name="posts"><!--lit-node 0--><template shadowroot="open"><style>
    .tag {
      margin-right: 0.5rem;
      padding: 0.25rem 0.5rem;
      background-color: var(--md-sys-color-tertiary);
      color: var(--md-sys-color-on-tertiary);
      border-radius: 8px;
    }

    a {
      text-decoration: none;
      cursor: pointer;
    }
  </style><!--lit-part i7RKEo91zno=--><a href="/tags/posts"><!--lit-node 0-->
      <span class="tag"><!--lit-part-->posts<!--/lit-part--></span>
    </a><!--/lit-part--></template></tag-item><!--/lit-part--><!--lit-part VvgdIGM/dSs=--><tag-item  name="flutter"><!--lit-node 0--><template shadowroot="open"><style>
    .tag {
      margin-right: 0.5rem;
      padding: 0.25rem 0.5rem;
      background-color: var(--md-sys-color-tertiary);
      color: var(--md-sys-color-on-tertiary);
      border-radius: 8px;
    }

    a {
      text-decoration: none;
      cursor: pointer;
    }
  </style><!--lit-part i7RKEo91zno=--><a href="/tags/flutter"><!--lit-node 0-->
      <span class="tag"><!--lit-part-->flutter<!--/lit-part--></span>
    </a><!--/lit-part--></template></tag-item><!--/lit-part--><!--lit-part VvgdIGM/dSs=--><tag-item  name="music"><!--lit-node 0--><template shadowroot="open"><style>
    .tag {
      margin-right: 0.5rem;
      padding: 0.25rem 0.5rem;
      background-color: var(--md-sys-color-tertiary);
      color: var(--md-sys-color-on-tertiary);
      border-radius: 8px;
    }

    a {
      text-decoration: none;
      cursor: pointer;
    }
  </style><!--lit-part i7RKEo91zno=--><a href="/tags/music"><!--lit-node 0-->
      <span class="tag"><!--lit-part-->music<!--/lit-part--></span>
    </a><!--/lit-part--></template></tag-item><!--/lit-part--><!--/lit-part-->
    </div><!--/lit-part--></template></tag-list>
			</header>
			<main class="astro-6ZXIMRXV">
				<div class="layout astro-W2QVQNXU">
	<article class="content astro-W2QVQNXU">
		<div class="astro-W2QVQNXU">
			<main class="astro-W2QVQNXU">
				<p><strong>TLDR</strong> The final source <a href="https://github.com/rodydavis/flutter_piano/tree/5k">here</a> and an online <a href="https://pocketpiano.app">demo</a>.</p>
<iframe class="app" src="https://pocketpiano.app"></iframe>
<p>This piano uses only <code>5032</code> bytes of Dart Code!</p>
<p>Winner of the <a href="https://flutter.dev/create">Flutter Create Contest</a> and you can see the certificate <a href="https://www.credential.net/exbvca0q?key=8be94f32ad2f56882045e013e960fa888afa4edd52edb963c48df351c7d1e443">here</a>!</p>
<h2 id="what-you-will-learn">What you will learn</h2>
<ul>
<li>Working with Dark Mode</li>
<li>Forcing app to be in landscape</li>
<li>Working with custom files bundled with the app</li>
<li>Working with midi and sounds in flutter</li>
<li>Working with <code>StatefulWidget</code></li>
<li>Using <code>SafeArea</code> and <code>Semantics</code></li>
<li>Building an app with minimal code</li>
</ul>
<h2 id="what-you-need">What you need</h2>
<ul>
<li><a href="https://flutter.dev/docs/get-started/install">Flutter SDK</a> Installed (<a href="https://flutter.dev/docs/get-started/codelab">More Info</a>)</li>
<li>A <code>.sf2</code> SoundFont File like <a href="https://github.com/rodydavis/flutter_piano/blob/5k/assets/sounds/Piano.sf2">this one</a></li>
<li>Physical iOS device (iOS Simulator does not work with this plugin for playing the sounds) or Android Emulator/Device</li>
</ul>
<h2 id="setting-up">Setting Up</h2>
<p>You can either create a new project with Android Studio or VSCode using the GUI or navigate to the location you want your project and using this command in the terminal: <code>lutter create -i swift -a kotlin flutter_piano</code>. Make sure to include Swift and Kotlin Support!</p>
<p>Now that you have your project created it should look like this.</p>
<p><img src="/img/flutter_piano/starter.png" alt="app-icon"></p>
<p>Let’s start by adding some dependencies to our `pubspec.yaml’</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">flutter</span><span class="token punctuation">:</span>
    <span class="token key atrule">sdk</span><span class="token punctuation">:</span> flutter
  <span class="token key atrule">tonic</span><span class="token punctuation">:</span> ^0.2.3
  <span class="token key atrule">flutter_midi</span><span class="token punctuation">:</span> ^0.1.1+3
  <span class="token key atrule">cupertino_icons</span><span class="token punctuation">:</span> ^0.1.2</code></pre>
<p>and add the .sf2 file</p>
<pre class="language-yaml"><code class="language-yaml"> <span class="token key atrule">assets</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> assets/sounds/Piano.sf2</code></pre>
<p>If you haven’t already create a new folder at the top of your project call <code>assets</code> and a subfolder called <code>sounds</code> and place the .sf2 file there and make sure it is named <code>Piano.sf2</code></p>
<p>Because our app will only work in landscape we need to update those settings as well.</p>
<p>navigate to the <code>/android/app/src/main/AndroidManifest.xml</code> and add this line inside <code>&#x3C;activity</code> in the <code>&#x3C;application</code>:</p>
<pre class="language-null"><code class="language-null">android:screenOrientation="landscape"</code></pre>
<p>Example:</p>
<pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name">package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.rodydavis.flutter_piano<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token comment">&lt;!-- io.flutter.app.FlutterApplication is an android.app.Application that
         calls FlutterMain.startInitialization(this); in its onCreate method.
         In most cases you can leave this as-is, but you if you want to provide
         additional functionality it is fine to subclass or reimplement
         FlutterApplication and put your custom class here. --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>io.flutter.app.FlutterApplication<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flutter_piano<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
            <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>launchMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>singleTop<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@style/LaunchTheme<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>configChanges</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>hardwareAccelerated</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>screenOrientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>landscape<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>windowSoftInputMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>adjustResize<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token comment">&lt;!-- This keeps the window background of the activity showing
                 until Flutter renders its first frame. It can be removed if
                 there is no splash screen (such as the default splash screen
                 defined in @style/LaunchTheme). --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span>
                <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>io.flutter.app.android.SplashScreenUntilFirstFrame<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.MAIN<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.LAUNCHER<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">></span></span>
</code></pre>
<p>navigate to <code>/ios/Runner/info.plist</code> and change:</p>
<pre class="language-null"><code class="language-null">&lt;key>UISupportedInterfaceOrientations&lt;/key>
&lt;array>
    &lt;string>UIInterfaceOrientationLandscapeLeft&lt;/string>
    &lt;string>UIInterfaceOrientationLandscapeRight&lt;/string>
&lt;/array></code></pre>
<p>Now we can start with the UI! When you run the application now it should start in landscape!</p>
<p><img src="/img/flutter_piano/landscape.png" alt="landscape"></p>
<h2 id="step-1">Step 1</h2>
<p>To make it eaiser to read lets remove the comments. Use “find and replace” and search for <code>\/\/.*</code></p>
<p><img src="/img/flutter_piano/comments.png" alt="comments"></p>
<p>choose the “select all occurrances” button and hit <code>backspace</code> to delete.</p>
<p><img src="/img/flutter_piano/selectall.png" alt="select all"></p>
<p>Hit save and you should see the code format for you.</p>
<p>The ‘main.dart’ file should look like this:</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">(</span>
        primarySwatch<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">MyHomePage</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo Home Page'</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyHomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token class-name">MyHomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  _MyHomePageState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyHomePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyHomePageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
  int _counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">_incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _counter<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
        title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>
        child<span class="token punctuation">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
          mainAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
          children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span>
              <span class="token string-literal"><span class="token string">'You have pushed the button this many times:'</span></span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span>
              <span class="token string-literal"><span class="token string">'</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">_counter</span></span><span class="token string">'</span></span><span class="token punctuation">,</span>
              style<span class="token punctuation">:</span> <span class="token class-name">Theme</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>textTheme<span class="token punctuation">.</span>display1<span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      floatingActionButton<span class="token punctuation">:</span> <span class="token class-name">FloatingActionButton</span><span class="token punctuation">(</span>
        onPressed<span class="token punctuation">:</span> _incrementCounter<span class="token punctuation">,</span>
        tooltip<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Increment'</span></span><span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>add<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="step-2">Step 2</h2>
<p>Delete the <code>MyHomePage</code> widget so you are left with this.</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">(</span>
        primarySwatch<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">MyHomePage</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo Home Page'</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>You should get an error and thats ok, we will fix that next.</p>
<p>Replace <code>MyHomePage(title: 'Flutter Demo Home Page')</code> with a <code>Scaffold()</code></p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">(</span>
        primarySwatch<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="step-3">Step 3</h2>
<p>Change <code>MyApp</code> to a <code>StatefulWidget</code>. You can do this quickly by selecting <code>MyApp</code> and choose “Convert to StatefulWidget” with the helper.</p>
<p><img src="/img/flutter_piano/convert.png" alt="convert"></p>
<p>It should look like this now:</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  _MyAppState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyAppState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyAppState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">(</span>
        primarySwatch<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h1 id="step-4">Step 4</h1>
<p>Change the theme to dark. You can do this by setting the <code>ThemeData</code> in <code>MaterialApp</code></p>
<p>change:</p>
<pre class="language-dart"><code class="language-dart">theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">(</span>
        primarySwatch<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre>
<p>to this</p>
<pre class="language-dart"><code class="language-dart">theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">.</span><span class="token function">dark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre>
<p>Add and <code>AppBar</code> to the <code>Scaffold</code></p>
<p><code>  appBar: AppBar(title: Text("Flutter Piano")),</code></p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  _MyAppState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyAppState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyAppState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">.</span><span class="token function">dark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
        appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Flutter Piano"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now build and run your app, it should look like this.</p>
<p><img src="/img/flutter_piano/darkmode.png" alt="dark-mode"></p>
<h2 id="step-5">Step 5</h2>
<p>We need to add some imports to the top:</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/services.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_midi/flutter_midi.dart'</span></span><span class="token punctuation">;</span></code></pre>
<p>If you get an error make sure they are added in the <code>pubspec.yaml</code> from earlier, then restart the app. Be sure to run <code>flutter packages get</code> everytime you add a dependency.</p>
<p>Now we can add out <code>initState()</code> to our app.</p>
<pre class="language-dart"><code class="language-dart"> <span class="token metadata function">@override</span>
 <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">unmute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   rootBundle<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"assets/sounds/Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sf2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span>sf2<span class="token punctuation">:</span> sf2<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
<p>Run the app and make sure you do not get any errors. If you are running this on the iOS Simulator you will get the following error:</p>
<p><code>Could Not Load Midi on this Device. (Cannot run on simulator), have you included the sound font?</code></p>
<p>It is ok for developing the UI but once we start with the midi you will need to plug in a real device.</p>
<p>Your code so far should look like this:</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/services.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_midi/flutter_midi.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  _MyAppState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyAppState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyAppState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">unmute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rootBundle<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"assets/sounds/Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sf2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span>sf2<span class="token punctuation">:</span> sf2<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">.</span><span class="token function">dark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
        appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Flutter Piano"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="step-6">Step 6</h2>
<p>To make Flutter development faster we start with containers and colors so we can make sure everything is the right size.</p>
<p>Lets start by adding a <code>Drawer</code> with a <code>ListView</code> to our <code>Scaffold</code>.</p>
<pre class="language-dart"><code class="language-dart"> home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
        appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Flutter Piano"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        drawer<span class="token punctuation">:</span> <span class="token class-name">Drawer</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">SafeArea</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre>
<p>You should now get a menu icon that when you press looks like this.</p>
<p><img src="/img/flutter_piano/menu.png" alt="menu"></p>
<p>Now lets add a ListView that scrolls Horizontially to the body of the <code>Scaffold</code></p>
<pre class="language-dart"><code class="language-dart"> body<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
            itemCount<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
            scrollDirection<span class="token punctuation">:</span> <span class="token class-name">Axis</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span>
            itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">,</span> int index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span></code></pre>
<p>We need 7 <code>itemCount</code> for 7 octaves on the Piano.</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/services.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_midi/flutter_midi.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  _MyAppState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyAppState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyAppState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">unmute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rootBundle<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"assets/sounds/Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sf2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span>sf2<span class="token punctuation">:</span> sf2<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">.</span><span class="token function">dark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
          appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Flutter Piano"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          drawer<span class="token punctuation">:</span>
              <span class="token class-name">Drawer</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">SafeArea</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          body<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
            itemCount<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
            scrollDirection<span class="token punctuation">:</span> <span class="token class-name">Axis</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span>
            itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">,</span> int index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="step-7">Step 7</h2>
<p>Now we need to build the octave section that will be repeated. Since every octave is identical we can repeat the octaves with minor adjustments.</p>
<p>Lets add some parameters for use to define for our UI. Add these underneath the initState function.</p>
<pre class="language-dart"><code class="language-dart">double <span class="token keyword">get</span> keyWidth <span class="token operator">=</span><span class="token operator">></span> <span class="token number">80</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">80</span> <span class="token operator">*</span> _widthRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
double _widthRatio <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
bool _showLabels <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code></pre>
<p>We will use these to dynamily update the keys.</p>
<p>Under the <code>itemBuilder</code> lets define which octave we are working with by adding:
<code>final int i = index * 12;</code></p>
<p>Our code should look like this now:</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/services.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_midi/flutter_midi.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  _MyAppState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyAppState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyAppState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">unmute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rootBundle<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"assets/sounds/Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sf2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span>sf2<span class="token punctuation">:</span> sf2<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  double <span class="token keyword">get</span> keyWidth <span class="token operator">=</span><span class="token operator">></span> <span class="token number">80</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">80</span> <span class="token operator">*</span> _widthRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
  double _widthRatio <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
  bool _showLabels <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">.</span><span class="token function">dark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
          appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Flutter Piano"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          drawer<span class="token punctuation">:</span>
              <span class="token class-name">Drawer</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">SafeArea</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          body<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
            itemCount<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
            scrollDirection<span class="token punctuation">:</span> <span class="token class-name">Axis</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span>
            itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">,</span> int index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">final</span> int i <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">12</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="step-8">Step 8</h2>
<p>Now we need to add a <code>Stack</code> for our octave:</p>
<pre class="language-dart"><code class="language-dart"> <span class="token keyword">return</span> <span class="token class-name">SafeArea</span><span class="token punctuation">(</span>
               child<span class="token punctuation">:</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                 <span class="token class-name">Row</span><span class="token punctuation">(</span>mainAxisSize<span class="token punctuation">:</span> <span class="token class-name">MainAxisSize</span><span class="token punctuation">.</span>min<span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                   <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">24</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">26</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">28</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">29</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">31</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">33</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">35</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                 <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                 <span class="token class-name">Positioned</span><span class="token punctuation">(</span>
                     left<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                     right<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                     bottom<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
                     top<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                     child<span class="token punctuation">:</span> <span class="token class-name">Row</span><span class="token punctuation">(</span>
                         mainAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>spaceBetween<span class="token punctuation">,</span>
                         mainAxisSize<span class="token punctuation">:</span> <span class="token class-name">MainAxisSize</span><span class="token punctuation">.</span>min<span class="token punctuation">,</span>
                         children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                           <span class="token class-name">Container</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                           <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">25</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                           <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">27</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                           <span class="token class-name">Container</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">)</span><span class="token punctuation">,</span>
                           <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                           <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">32</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                           <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">34</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                           <span class="token class-name">Container</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                         <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
               <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Here we have defined which midi notes are played for each octave.</p>
<p>Now add the function <code>_buildKey</code> underneath our <code>build</code> function.</p>
<pre class="language-dart"><code class="language-dart"> <span class="token class-name">Widget</span> <span class="token function">_buildKey</span><span class="token punctuation">(</span>int midi<span class="token punctuation">,</span> bool accidental<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>accidental<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
          width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
          color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
          margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          padding<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token class-name">Material</span><span class="token punctuation">(</span>
            elevation<span class="token punctuation">:</span> <span class="token number">6.0</span><span class="token punctuation">,</span>
            borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
            shadowColor<span class="token punctuation">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0x802196F3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
        color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
        margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre>
<p>Also add <code>borderRadius</code> to the bottom of <code>main.dart</code></p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">const</span> <span class="token class-name">BorderRadiusGeometry</span> borderRadius <span class="token operator">=</span> <span class="token class-name">BorderRadius</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>
    bottomLeft<span class="token punctuation">:</span> <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bottomRight<span class="token punctuation">:</span> <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Your app should look like this:</p>
<p><img src="/img/flutter_piano/keys.png" alt="keys"></p>
<p>Your code should look like this:</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/services.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_midi/flutter_midi.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  _MyAppState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyAppState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyAppState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">unmute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rootBundle<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"assets/sounds/Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sf2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span>sf2<span class="token punctuation">:</span> sf2<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  double <span class="token keyword">get</span> keyWidth <span class="token operator">=</span><span class="token operator">></span> <span class="token number">80</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">80</span> <span class="token operator">*</span> _widthRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
  double _widthRatio <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
  bool _showLabels <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">.</span><span class="token function">dark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
          appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Flutter Piano"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          drawer<span class="token punctuation">:</span>
              <span class="token class-name">Drawer</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">SafeArea</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          body<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
            itemCount<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
            scrollDirection<span class="token punctuation">:</span> <span class="token class-name">Axis</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span>
            itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">,</span> int index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">final</span> int i <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">12</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> <span class="token class-name">SafeArea</span><span class="token punctuation">(</span>
                child<span class="token punctuation">:</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                  <span class="token class-name">Row</span><span class="token punctuation">(</span>mainAxisSize<span class="token punctuation">:</span> <span class="token class-name">MainAxisSize</span><span class="token punctuation">.</span>min<span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">24</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">26</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">28</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">29</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">31</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">33</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">35</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token class-name">Positioned</span><span class="token punctuation">(</span>
                      left<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                      right<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                      bottom<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
                      top<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                      child<span class="token punctuation">:</span> <span class="token class-name">Row</span><span class="token punctuation">(</span>
                          mainAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>spaceBetween<span class="token punctuation">,</span>
                          mainAxisSize<span class="token punctuation">:</span> <span class="token class-name">MainAxisSize</span><span class="token punctuation">.</span>min<span class="token punctuation">,</span>
                          children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                            <span class="token class-name">Container</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">25</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">27</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token class-name">Container</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">32</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">34</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token class-name">Container</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                          <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Widget</span> <span class="token function">_buildKey</span><span class="token punctuation">(</span>int midi<span class="token punctuation">,</span> bool accidental<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>accidental<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
          width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
          color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black<span class="token punctuation">,</span>
          margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          padding<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token class-name">Material</span><span class="token punctuation">(</span>
            elevation<span class="token punctuation">:</span> <span class="token number">6.0</span><span class="token punctuation">,</span>
            borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
            shadowColor<span class="token punctuation">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0x802196F3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
        color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
        margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token class-name">BorderRadiusGeometry</span> borderRadius <span class="token operator">=</span> <span class="token class-name">BorderRadius</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>
    bottomLeft<span class="token punctuation">:</span> <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bottomRight<span class="token punctuation">:</span> <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="step-9">Step 9</h2>
<p>Time to add midi by adding the following import to the top of the file:</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:tonic/tonic.dart'</span></span><span class="token punctuation">;</span></code></pre>
<p>In the <code>-buildKey</code> function you can add this line:</p>
<pre class="language-dart"><code class="language-dart"> <span class="token keyword">final</span> pitchName <span class="token operator">=</span> <span class="token class-name">Pitch</span><span class="token punctuation">.</span><span class="token function">fromMidiNumber</span><span class="token punctuation">(</span>midi<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>We can also create the piano key itself underneath it:</p>
<pre class="language-dart"><code class="language-dart"> <span class="token keyword">final</span> pianoKey <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span>
     children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
       <span class="token class-name">Semantics</span><span class="token punctuation">(</span>
           button<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
           hint<span class="token punctuation">:</span> pitchName<span class="token punctuation">,</span>
           child<span class="token punctuation">:</span> <span class="token class-name">Material</span><span class="token punctuation">(</span>
               borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
               color<span class="token punctuation">:</span> accidental <span class="token operator">?</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black <span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
               child<span class="token punctuation">:</span> <span class="token class-name">InkWell</span><span class="token punctuation">(</span>
                 borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
                 highlightColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">,</span>
                 onTap<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                 onTapDown<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">playMidiNote</span><span class="token punctuation">(</span>midi<span class="token punctuation">:</span> midi<span class="token punctuation">)</span><span class="token punctuation">,</span>
               <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token class-name">Positioned</span><span class="token punctuation">(</span>
           left<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
           right<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
           bottom<span class="token punctuation">:</span> <span class="token number">20.0</span><span class="token punctuation">,</span>
           child<span class="token punctuation">:</span> _showLabels
               <span class="token operator">?</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>pitchName<span class="token punctuation">,</span>
                   textAlign<span class="token punctuation">:</span> <span class="token class-name">TextAlign</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
                   style<span class="token punctuation">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                       color<span class="token punctuation">:</span> <span class="token operator">!</span>accidental <span class="token operator">?</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black <span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">)</span>
               <span class="token punctuation">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Remove the color from the container and replace it with <code>child: pianoKey,</code></p>
<pre class="language-dart"><code class="language-dart"> <span class="token keyword">if</span> <span class="token punctuation">(</span>accidental<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
         width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
         margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         padding<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         child<span class="token punctuation">:</span> <span class="token class-name">Material</span><span class="token punctuation">(</span>
             elevation<span class="token punctuation">:</span> <span class="token number">6.0</span><span class="token punctuation">,</span>
             borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
             shadowColor<span class="token punctuation">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0x802196F3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
             child<span class="token punctuation">:</span> pianoKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
       width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
       child<span class="token punctuation">:</span> pianoKey<span class="token punctuation">,</span>
       margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The complete function should look like this:</p>
<pre class="language-dart"><code class="language-dart"> <span class="token class-name">Widget</span> <span class="token function">_buildKey</span><span class="token punctuation">(</span>int midi<span class="token punctuation">,</span> bool accidental<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">final</span> pitchName <span class="token operator">=</span> <span class="token class-name">Pitch</span><span class="token punctuation">.</span><span class="token function">fromMidiNumber</span><span class="token punctuation">(</span>midi<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">final</span> pianoKey <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span>
     children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
       <span class="token class-name">Semantics</span><span class="token punctuation">(</span>
           button<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
           hint<span class="token punctuation">:</span> pitchName<span class="token punctuation">,</span>
           child<span class="token punctuation">:</span> <span class="token class-name">Material</span><span class="token punctuation">(</span>
               borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
               color<span class="token punctuation">:</span> accidental <span class="token operator">?</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black <span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
               child<span class="token punctuation">:</span> <span class="token class-name">InkWell</span><span class="token punctuation">(</span>
                 borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
                 highlightColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">,</span>
                 onTap<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                 onTapDown<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">playMidiNote</span><span class="token punctuation">(</span>midi<span class="token punctuation">:</span> midi<span class="token punctuation">)</span><span class="token punctuation">,</span>
               <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token class-name">Positioned</span><span class="token punctuation">(</span>
           left<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
           right<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
           bottom<span class="token punctuation">:</span> <span class="token number">20.0</span><span class="token punctuation">,</span>
           child<span class="token punctuation">:</span> _showLabels
               <span class="token operator">?</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>pitchName<span class="token punctuation">,</span>
                   textAlign<span class="token punctuation">:</span> <span class="token class-name">TextAlign</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
                   style<span class="token punctuation">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                       color<span class="token punctuation">:</span> <span class="token operator">!</span>accidental <span class="token operator">?</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black <span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">)</span>
               <span class="token punctuation">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>accidental<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
         width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
         margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         padding<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         child<span class="token punctuation">:</span> <span class="token class-name">Material</span><span class="token punctuation">(</span>
             elevation<span class="token punctuation">:</span> <span class="token number">6.0</span><span class="token punctuation">,</span>
             borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
             shadowColor<span class="token punctuation">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0x802196F3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
             child<span class="token punctuation">:</span> pianoKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
       width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
       child<span class="token punctuation">:</span> pianoKey<span class="token punctuation">,</span>
       margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span></code></pre>
<p>Now when you run the app it should look like this:</p>
<p><img src="/img/flutter_piano/labels.png" alt="labels"></p>
<p>Almost there! Now let’s give our user some control.</p>
<h2 id="step-10">Step 10</h2>
<p>Add these settings to the <code>Drawer</code></p>
<pre class="language-dart"><code class="language-dart"><span class="token class-name">Container</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token class-name">ListTile</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Change Width"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token class-name">Slider</span><span class="token punctuation">(</span>
    activeColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>redAccent<span class="token punctuation">,</span>
    inactiveColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
    min<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
    max<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
    value<span class="token punctuation">:</span> _widthRatio<span class="token punctuation">,</span>
    onChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span>double value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> _widthRatio <span class="token operator">=</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token class-name">ListTile</span><span class="token punctuation">(</span>
    title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Show Labels"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    trailing<span class="token punctuation">:</span> <span class="token class-name">Switch</span><span class="token punctuation">(</span>
    value<span class="token punctuation">:</span> _showLabels<span class="token punctuation">,</span>
    onChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span>bool value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> _showLabels <span class="token operator">=</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre>
<p>Now you should see this:</p>
<p><img src="/img/flutter_piano/settings.png" alt="settings"></p>
<h2 id="step-11">Step 11</h2>
<p>To start with <code>Middle C</code> lets add an inital scroll offset to the <code>ListView</code></p>
<p><code>  controller: ScrollController(initialScrollOffset: 1500.0),</code></p>
<p>Now when we start the app it should co to C4.</p>
<p>The final App should look like this:</p>
<p><img src="/img/flutter_piano/final.png" alt="final"></p>
<p>The final code should look like this:</p>
<pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/services.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_midi/flutter_midi.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:tonic/tonic.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  _MyAppState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyAppState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _MyAppState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">unmute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rootBundle<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"assets/sounds/Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sf2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span>sf2<span class="token punctuation">:</span> sf2<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Piano.sf2"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  double <span class="token keyword">get</span> keyWidth <span class="token operator">=</span><span class="token operator">></span> <span class="token number">80</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">80</span> <span class="token operator">*</span> _widthRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
  double _widthRatio <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
  bool _showLabels <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'Flutter Demo'</span></span><span class="token punctuation">,</span>
      theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">.</span><span class="token function">dark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      home<span class="token punctuation">:</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
          appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Flutter Piano"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          drawer<span class="token punctuation">:</span> <span class="token class-name">Drawer</span><span class="token punctuation">(</span>
              child<span class="token punctuation">:</span> <span class="token class-name">SafeArea</span><span class="token punctuation">(</span>
                  child<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
            <span class="token class-name">Container</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">ListTile</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Change Width"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Slider</span><span class="token punctuation">(</span>
                activeColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>redAccent<span class="token punctuation">,</span>
                inactiveColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
                min<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                max<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
                value<span class="token punctuation">:</span> _widthRatio<span class="token punctuation">,</span>
                onChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span>double value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
                    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> _widthRatio <span class="token operator">=</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">ListTile</span><span class="token punctuation">(</span>
                title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Show Labels"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                trailing<span class="token punctuation">:</span> <span class="token class-name">Switch</span><span class="token punctuation">(</span>
                    value<span class="token punctuation">:</span> _showLabels<span class="token punctuation">,</span>
                    onChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span>bool value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
                        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> _showLabels <span class="token operator">=</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          body<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
            itemCount<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
            scrollDirection<span class="token punctuation">:</span> <span class="token class-name">Axis</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span>
            controller<span class="token punctuation">:</span> <span class="token class-name">ScrollController</span><span class="token punctuation">(</span>initialScrollOffset<span class="token punctuation">:</span> <span class="token number">1500.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">,</span> int index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">final</span> int i <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">12</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> <span class="token class-name">SafeArea</span><span class="token punctuation">(</span>
                child<span class="token punctuation">:</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                  <span class="token class-name">Row</span><span class="token punctuation">(</span>mainAxisSize<span class="token punctuation">:</span> <span class="token class-name">MainAxisSize</span><span class="token punctuation">.</span>min<span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">24</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">26</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">28</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">29</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">31</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">33</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">35</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token class-name">Positioned</span><span class="token punctuation">(</span>
                      left<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                      right<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                      bottom<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
                      top<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
                      child<span class="token punctuation">:</span> <span class="token class-name">Row</span><span class="token punctuation">(</span>
                          mainAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>spaceBetween<span class="token punctuation">,</span>
                          mainAxisSize<span class="token punctuation">:</span> <span class="token class-name">MainAxisSize</span><span class="token punctuation">.</span>min<span class="token punctuation">,</span>
                          children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                            <span class="token class-name">Container</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">25</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">27</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token class-name">Container</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">32</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token function">_buildKey</span><span class="token punctuation">(</span><span class="token number">34</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token class-name">Container</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                          <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Widget</span> <span class="token function">_buildKey</span><span class="token punctuation">(</span>int midi<span class="token punctuation">,</span> bool accidental<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> pitchName <span class="token operator">=</span> <span class="token class-name">Pitch</span><span class="token punctuation">.</span><span class="token function">fromMidiNumber</span><span class="token punctuation">(</span>midi<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> pianoKey <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span>
      children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
        <span class="token class-name">Semantics</span><span class="token punctuation">(</span>
            button<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            hint<span class="token punctuation">:</span> pitchName<span class="token punctuation">,</span>
            child<span class="token punctuation">:</span> <span class="token class-name">Material</span><span class="token punctuation">(</span>
                borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
                color<span class="token punctuation">:</span> accidental <span class="token operator">?</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black <span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span>
                child<span class="token punctuation">:</span> <span class="token class-name">InkWell</span><span class="token punctuation">(</span>
                  borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
                  highlightColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>grey<span class="token punctuation">,</span>
                  onTap<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                  onTapDown<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token class-name">FlutterMidi</span><span class="token punctuation">.</span><span class="token function">playMidiNote</span><span class="token punctuation">(</span>midi<span class="token punctuation">:</span> midi<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Positioned</span><span class="token punctuation">(</span>
            left<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
            right<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
            bottom<span class="token punctuation">:</span> <span class="token number">20.0</span><span class="token punctuation">,</span>
            child<span class="token punctuation">:</span> _showLabels
                <span class="token operator">?</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>pitchName<span class="token punctuation">,</span>
                    textAlign<span class="token punctuation">:</span> <span class="token class-name">TextAlign</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
                    style<span class="token punctuation">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                        color<span class="token punctuation">:</span> <span class="token operator">!</span>accidental <span class="token operator">?</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black <span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">:</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>accidental<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
          width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
          margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          padding<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> keyWidth <span class="token operator">*</span> <span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token class-name">Material</span><span class="token punctuation">(</span>
              elevation<span class="token punctuation">:</span> <span class="token number">6.0</span><span class="token punctuation">,</span>
              borderRadius<span class="token punctuation">:</span> borderRadius<span class="token punctuation">,</span>
              shadowColor<span class="token punctuation">:</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0x802196F3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              child<span class="token punctuation">:</span> pianoKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
        width<span class="token punctuation">:</span> keyWidth<span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> pianoKey<span class="token punctuation">,</span>
        margin<span class="token punctuation">:</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token class-name">BorderRadiusGeometry</span> borderRadius <span class="token operator">=</span> <span class="token class-name">BorderRadius</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>
    bottomLeft<span class="token punctuation">:</span> <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bottomRight<span class="token punctuation">:</span> <span class="token class-name">Radius</span><span class="token punctuation">.</span><span class="token function">circular</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h1 id="conclusion">Conclusion</h1>
<p>If you delete <code>tests/</code> and run <code>find . -name "*.dart" | xargs cat | wc -c</code> you will see that the dart code only uses <code>5032</code> bytes of space!</p>
<p>Now we have a fully functional piano that you can play with and enjoy on iOS and Android.</p>
<p>I was really inspired when creating this for the <a href="https://flutter.dev/create">Flutter Create</a> contest.</p>
<p>Hope you learned something, if you have any questions you can always read out to me. This is an open source piano and would love PRs on the main project <a href="https://github.com/rodydavis/flutter_piano">here</a>!</p>
			</main>
		</div>
	</article>
</div>



			</main>
		</div>
	</article>
</div>



		</div>
		<div style="height: 25px"></div>
		<social-links><template shadowroot="open"><style>
    footer {
      display: flex;
      justify-content: center;
      align-items: center;
      width: var(--width, 100%);
      margin-bottom: 2rem;
    }
    .fab,
    svg {
      --size: 3vw;
      width: var(--size);
      height: var(--size);
      max-width: 30px;
      max-height: 30px;
      min-width: 20px;
      min-height: 20px;
      margin: 0.5rem;
      color: var(--md-sys-color-on-surface);
      font-family: FontAwesome;
      cursor: pointer;
    }
    svg {
      color: var(--md-sys-color-on-surface);
    }
  </style><!--lit-part fkbI1zGBADw=--><footer>
      <a
        target="_blank"
        rel="noopener noreferrer"
        href="https://twitter.com/rodydavis"
        class="fab fa fa-twitter"
      >
        <svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fab"
          data-icon="twitter"
          class="svg-inline--fa fa-twitter fa-w-16"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"
          ></path>
        </svg>
      </a>
      <a
        target="_blank"
        rel="noopener noreferrer"
        href="https://facebook.com/rodydavisjr"
        class="fab fa fa-facebook"
        ><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fab"
          data-icon="facebook-f"
          class="svg-inline--fa fa-facebook-f fa-w-10"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 320 512"
        >
          <path
            fill="currentColor"
            d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"
          ></path></svg
      ></a>
      <a
        target="_blank"
        rel="noopener noreferrer"
        href="https://www.linkedin.com/in/rodydavis"
        class="fab fa fa-linkedin"
        ><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fab"
          data-icon="linkedin-in"
          class="svg-inline--fa fa-linkedin-in fa-w-14"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
        >
          <path
            fill="currentColor"
            d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"
          ></path></svg
      ></a>
      <a
        target="_blank"
        rel="noopener noreferrer"
        href="https://www.youtube.com/rodydavis"
        class="fab fa fa-youtube"
        ><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fab"
          data-icon="youtube"
          class="svg-inline--fa fa-youtube fa-w-18"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 576 512"
        >
          <path
            fill="currentColor"
            d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"
          ></path></svg
      ></a>
      <a
        target="_blank"
        rel="noopener noreferrer"
        href="https://www.instagram.com/rodydavisjr"
        class="fab fa fa-instagram"
        ><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fab"
          data-icon="instagram"
          class="svg-inline--fa fa-instagram fa-w-14"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
        >
          <path
            fill="currentColor"
            d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"
          ></path></svg
      ></a>
      <a
        target="_blank"
        rel="noopener noreferrer"
        href="https://www.github.com/rodydavis"
        class="fab fa fa-github"
        ><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fab"
          data-icon="github"
          class="svg-inline--fa fa-github fa-w-16"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 496 512"
        >
          <path
            fill="currentColor"
            d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"
          ></path></svg
      ></a>
      <a
        target="_blank"
        rel="noopener noreferrer"
        href="https://www.tiktok.com/@rodydavisjr"
        class="fab fa-tiktok"
        ><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fab"
          data-icon="tiktok"
          class="svg-inline--fa fa-tiktok fa-w-14"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
        >
          <path
            fill="currentColor"
            d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"
          ></path></svg
      ></a>
    </footer><!--/lit-part--></template></social-links>
	</body></html>