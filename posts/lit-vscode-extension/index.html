<!DOCTYPE html><html domain=rodydavis.com ga-id=G-JQNPVBL9DR lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="/img/favicon/favicon-32x32.png?hash=3df5885280" rel=icon type=image/png><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>Lit and VSCode Extensions</title><meta content="Lit and VSCode Extensions" property=og:title><meta content="In this article I will go over how to set up a Lit web component and use it to create a VSCode extension. TLDR You can find the final source..." name=description><meta content="In this article I will go over how to set up a Lit web component and use it to create a VSCode extension. TLDR You can find the final source..." property=og:description><meta content=summary_large_image name=twitter:card><meta content=@rodydavis name=twitter:site><meta content=@rodydavis name=twitter:creator><meta content=https://rodydavis.com/img/remote/ZAqrIp.png property=og:image><link href=https://rodydavis.com/posts/lit-vscode-extension/ rel=canonical><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate type=application/atom+xml title="Rody Davis"><link href=/ rel=preconnect crossorigin=""><script src="/js/min.js?hash=c372ec6a84" async defer></script><script src="/js/cached.js?hash=9030142fbb" async defer></script><script csp-hash="">if (/Mac OS X/.test(navigator.userAgent)) 
        document
          .documentElement
          .classList
          .add('apple')</script><script type=text/javascript>function getCode(repo, path, branch) {
        const url = `https://raw.githubusercontent.com/rodydavis/${repo}/${branch}/${path}`;
        return fetch(url).then((res) => res.text());
      }
      async function addFiles(tag, path, branch = "main") {
          const ide = document.querySelector('playground-ide');
          const ui = await getCode(tag, 'index.html', branch);
          const code = await getCode(tag, `src/${path}`, branch);
          const name = path.split('.ts').join('.js');
          const config = { files: {} };
          config.files['index.html'] = { content:  ui.split(`/src/${path}`).join(`./${name}`) };
          config.files[path] = { content: code };
          ide.config = config;
          ide.id = 'playground';
          ide.className = 'playground-theme-tomorrow-night-eighties'
      }</script><script src=https://unpkg.com/playground-elements@0.10.0/playground-ide.js?module type=module></script><style>playground-ide {
        height: 500px;
        width: 100%;
        --playground-preview-width: 40%;
        --playground-code-background: var(--background);
        --playground-tab-bar-background: var(--background);
        --playground-tab-bar-foreground-color: var(--on-background);
        --playground-border: var(--on-background);
        --playground-preview-toolbar-background: var(--background);
        --playground-preview-toolbar-foreground-color: var(--on-background);
        --playground-highlight-color: var(--primary);
        --playground-code-default-color: var(--primary);
        --playground-code-font-family: var(--default-font);
      }</style><style>@import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css);@import url(https://unpkg.com/playground-elements@0.10.0/themes/tomorrow-night-eighties.css);:root{--primary: #f9c412;--on-primary: #181818;--secondary: #e7bf60;--background: #181818;--on-background: #eee}.tags{display:wrap}.click{cursor:pointer;text-decoration:none}.chip{display:inline-block;padding:0 15px;border-radius:25px;margin:4px;background-color:var(--primary);color:var(--on-primary)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{z-index:1;position:fixed;top:0;left:0;width:100vw;padding:.375em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}:root{--main-width: calc(100vw - 3em)}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80;z-index:1000}header aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress{z-index:1;background-color:var(--primary);width:100vw;position:absolute;left:0;top:0;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:100;src:url(/fonts/Inter-Thin.woff2) format("woff2"),url(/fonts/Inter-Thin.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:100;src:url(/fonts/Inter-ThinItalic.woff2) format("woff2"),url(/fonts/Inter-ThinItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:200;src:url(/fonts/Inter-ExtraLight.woff2) format("woff2"),url(/fonts/Inter-ExtraLight.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:200;src:url(/fonts/Inter-ExtraLightItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraLightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:300;src:url(/fonts/Inter-Light.woff2) format("woff2"),url(/fonts/Inter-Light.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:300;src:url(/fonts/Inter-LightItalic.woff2) format("woff2"),url(/fonts/Inter-LightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:400;src:url(/fonts/Inter-Regular.woff2) format("woff2"),url(/fonts/Inter-Regular.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:400;src:url(/fonts/Inter-Italic.woff2) format("woff2"),url(/fonts/Inter-Italic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:500;src:url(/fonts/Inter-Medium.woff2) format("woff2"),url(/fonts/Inter-Medium.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:500;src:url(/fonts/Inter-MediumItalic.woff2) format("woff2"),url(/fonts/Inter-MediumItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:600;src:url(/fonts/Inter-SemiBold.woff2) format("woff2"),url(/fonts/Inter-SemiBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:600;src:url(/fonts/Inter-SemiBoldItalic.woff2) format("woff2"),url(/fonts/Inter-SemiBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:700;src:url(/fonts/Inter-Bold.woff2) format("woff2"),url(/fonts/Inter-Bold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:700;src:url(/fonts/Inter-BoldItalic.woff2) format("woff2"),url(/fonts/Inter-BoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:800;src:url(/fonts/Inter-ExtraBold.woff2) format("woff2"),url(/fonts/Inter-ExtraBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:800;src:url(/fonts/Inter-ExtraBoldItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:900;src:url(/fonts/Inter-Black.woff2) format("woff2"),url(/fonts/Inter-Black.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:900;src:url(/fonts/Inter-BlackItalic.woff2) format("woff2"),url(/fonts/Inter-BlackItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:normal;font-named-instance:"Regular";src:url(/fonts/Inter-roman.var.woff2) format("woff2")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:italic;font-named-instance:"Italic";src:url(/fonts/Inter-italic.var.woff2) format("woff2")}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}b,strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button,input{font-family:inherit;font-size:100%;line-height:1.15;overflow:visible}button{text-transform:none}input{margin:0}[type=button],[type=reset],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}template{display:none}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}body,p,pre,ul{font-size:1em}p,pre,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem;margin-bottom:1.36rem}h2{font-size:1.728rem}body,p,pre,ul{font-size:1rem;line-height:1.6}p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}body,p,pre,ul{font-size:1.1rem;line-height:1.6}h1,h2,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h2{font-size:4.05rem;line-height:4.8rem}body,p,pre,ul{font-size:1.2rem;line-height:1.6}h1,h2,p,pre,ul{margin-bottom:1.632rem}}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre code:not([class]){padding:1.5em;overflow-x:scroll}code{border-radius:.3em;color:#e2777a;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d;padding:0}h1,h2{font-family:var(--font-family)}h2{font-style:italic}a:hover{text-decoration:underline}dt{font-weight:600;padding-top:.75em;padding-left:.75em}@media (max-width:767px){x:-moz-any-link{display:table-cell}}@supports (font-variation-settings:normal){html{font-family:Inter UI var alt,sans-serif;--font-family: Inter UI var alt, sans-serif}}button,input{border-radius:.3em;max-width:100%}input{padding:.75em;margin-bottom:1.5em;display:inline}button,input[type=reset]{background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover,input[type=reset]:hover{background:#d9d9d9;color:var(--surface)}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--secondary)}input[type=datetime],input[type=number],input[type=text],input[type=time],input[type=url]{border:1px solid #595959;padding:.75em}*{border:0;box-sizing:border-box}body,header nav a{font-family:var(--font-family)}body{background:var(--background);color:var(--on-background)}header{padding:4.5em 1.5em 3em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ul{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto;border-top:.5px solid #ccc}footer{background:var(--background);color:var(--on-background);text-align:center;padding:2em 2em 100px}footer>*{margin:.6em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li ul{margin-bottom:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;background:#2d2d2d}.token.doctype{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.tag{color:#e2777a}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property{color:#f8c555}.token.builtin,.token.keyword{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.inserted{color:green}</style><header><nav><div id=nav><h1><a href=/ title=Homepage>Rody Davis</a></h1><a href=/about/ >About</a> <a href=/talks/ >Talks</a> <a href=/apps/ >Apps</a></div><div id=reading-progress aria-hidden=true></div></nav><h1>Lit and VSCode Extensions</h1><aside>8 min read.</aside><dialog id=message></dialog><noscript><img src="/.netlify/functions/ga?v=1&_v=j83&t=pageview&dr=https%3A%2F%2Fno-script.com&_s=1&dh=rodydavis.com&dp=%2Fposts%2Flit-vscode-extension%2F&ul=en-us&de=UTF-8&dt=Lit%20and%20VSCode%20Extensions&tid=G-JQNPVBL9DR" style=display:none width=1 alt="" height=1></noscript></header><main><article><div class=tags><a href=/tags/vscode class=click><div class=chip>vscode</div></a><a href=/tags/web class=click><div class=chip>web</div></a><a href=/tags/lit class=click><div class=chip>lit</div></a><a href=/tags/plugin class=click><div class=chip>plugin</div></a><a href=/tags/extension class=click><div class=chip>extension</div></a></div><p>In this article I will go over how to set up a <a href=https://lit.dev>Lit</a> web component and use it to create a VSCode extension.<p><strong>TLDR</strong> You can find the final source <a href=https://github.com/rodydavis/lit-vscode-extension>here</a>.<h2 id=prerequisites>Prerequisites <a href=#prerequisites class=direct-link>#</a></h2><ul><li>Vscode<li>Node >= 12<li>Typescript</ul><h2 id=getting-started>Getting Started <a href=#getting-started class=direct-link>#</a></h2><p>We can start off by navigating in terminal to the location of the project and run the following:<pre class=language-bash><code class=language-bash><span class="token function">npm</span> init @vitejs/app --template lit-element-ts</code></pre><p>Then enter a project name <code>lit-vscode-extension</code> and now open the project in vscode and install the dependencies:<pre class=language-bash><code class=language-bash><span class="token class-name builtin">cd</span> lit-vscode-extension<br><span class="token function">npm</span> i -D @types/node<br>code <span class="token class-name builtin">.</span></code></pre><p>Update the <code>vite.config.ts</code> with the following:<pre class=language-js><code class=language-js><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"path"</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  base<span class="token operator">:</span> <span class="token string">"/lit-vscode-extension/"</span><span class="token punctuation">,</span><br>  build<span class="token operator">:</span> <span class="token punctuation">{</span><br>    outDir<span class="token operator">:</span> <span class="token string">"build"</span><span class="token punctuation">,</span><br>    rollupOptions<span class="token operator">:</span> <span class="token punctuation">{</span><br>      external<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">^vscode</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><br>      input<span class="token operator">:</span> <span class="token punctuation">{</span><br>        main<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"index.html"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      output<span class="token operator">:</span> <span class="token punctuation">{</span><br>        entryFileNames<span class="token operator">:</span> <span class="token string">"[name].js"</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Open <code>package.json</code> and update it with the following:<pre class=language-json><code class=language-json><span class="token punctuation">{</span><br>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"lit-vscode-extension"</span><span class="token punctuation">,</span><br>  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Lit VSCode Extension Example"</span><span class="token punctuation">,</span><br>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.0.1"</span><span class="token punctuation">,</span><br>  <span class="token property">"publisher"</span><span class="token operator">:</span> <span class="token string">"rodydavis"</span><span class="token punctuation">,</span><br>  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"MIT"</span><span class="token punctuation">,</span><br>  <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"git"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/rodydavis/lit-vscode-extension"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"engines"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"vscode"</span><span class="token operator">:</span> <span class="token string">"^1.47.0"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"categories"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token string">"Other"</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"activationEvents"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token string">"onCommand:lit.start"</span><span class="token punctuation">,</span><br>    <span class="token string">"onCommand:lit.reset"</span><span class="token punctuation">,</span><br>    <span class="token string">"onWebviewPanel:lit"</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"./build/extension.js"</span><span class="token punctuation">,</span><br>  <span class="token property">"contributes"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"commands"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token punctuation">{</span><br>        <span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"lit.start"</span><span class="token punctuation">,</span><br>        <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Open Plugin"</span><span class="token punctuation">,</span><br>        <span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"lit"</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token punctuation">{</span><br>        <span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"lit.reset"</span><span class="token punctuation">,</span><br>        <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Reset"</span><span class="token punctuation">,</span><br>        <span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"lit"</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"vite"</span><span class="token punctuation">,</span><br>    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"tsc && vite build"</span><span class="token punctuation">,</span><br>    <span class="token property">"ext"</span><span class="token operator">:</span> <span class="token string">"tsc src/extension.ts --outdir build --skipLibCheck --module commonjs"</span><span class="token punctuation">,</span><br>    <span class="token property">"compile"</span><span class="token operator">:</span> <span class="token string">"npm run build && npm run ext"</span><span class="token punctuation">,</span><br>    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"vite preview"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"lit"</span><span class="token operator">:</span> <span class="token string">"^2.0.0-rc.2"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"@types/node"</span><span class="token operator">:</span> <span class="token string">"^15.12.4"</span><span class="token punctuation">,</span><br>    <span class="token property">"@types/vscode"</span><span class="token operator">:</span> <span class="token string">"^1.57.0"</span><span class="token punctuation">,</span><br>    <span class="token property">"typescript"</span><span class="token operator">:</span> <span class="token string">"^4.2.3"</span><span class="token punctuation">,</span><br>    <span class="token property">"vite"</span><span class="token operator">:</span> <span class="token string">"^2.3.5"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>After the <code>package.json</code> is updated run <code>npm i</code>.<h2 id=template>Template <a href=#template class=direct-link>#</a></h2><p>Open up the <code>index.html</code> and update it with the following:<pre class=language-html><code class=language-html><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/svg+xml<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/favicon.svg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Lit Example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/my-element.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-element</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>This is child content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-element</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><br></code></pre><h2 id=web-component>Web Component <a href=#web-component class=direct-link>#</a></h2><p>Open up <code>src/my-element.ts</code> and update it with the following:<pre class=language-js><code class=language-js><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> css<span class="token punctuation">,</span> LitElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lit"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> customElement<span class="token punctuation">,</span> property<span class="token punctuation">,</span> state <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lit/decorators.js"</span><span class="token punctuation">;</span><br><br>@<span class="token function">customElement</span><span class="token punctuation">(</span><span class="token string">"my-element"</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyElement</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string"><br>    :host {<br>      display: block;<br>      border: solid 1px gray;<br>      padding: 16px;<br>      max-width: 800px;<br>    }<br>  </span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br><br>  @<span class="token function">property</span><span class="token punctuation">(</span><span class="token punctuation">)</span> name <span class="token operator">=</span> <span class="token string">"World"</span><span class="token punctuation">;</span><br>  @<span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string"><br>      &lt;h1>Hello, </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">!&lt;/h1><br>      &lt;button @click=</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"> part="button"><br>        Click Count: </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"><br>      &lt;/button><br>      &lt;slot>&lt;/slot><br>    </span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">modify</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">+=</span> val<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">async</span> <span class="token function">firstUpdated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><br>      <span class="token string">"message"</span><span class="token punctuation">,</span><br>      <span class="token punctuation">(</span><span class="token parameter">e<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> message <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span><br>        <span class="token keyword">const</span> <span class="token punctuation">{</span> command <span class="token punctuation">}</span> <span class="token operator">=</span> message<span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">"reset"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token boolean">false</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre><p>Here we are just modifying the example to include a message listener for communicating with the vscode extension, methods for updating the count, and updating the render method.<p>VSCode communicates with the plugin via post messages because the UI will be loaded in an <code>iframe</code>.<p>Now let's write the extension code in <code>src/extension.ts</code>. First start by adding top level declarations that will be referenced multiple times.<pre class=language-js><code class=language-js><br><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">"vscode"</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token constant">WEB_DIR</span><span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">"build"</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">WEB_SCRIPT</span><span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">"main.js"</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">TITLE</span><span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">"Lit Example"</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">TAG</span><span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">"my-element"</span><span class="token punctuation">;</span><br><br><br><span class="token keyword">const</span> possible <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="token punctuation">,</span><br>  <span class="token string">"abcdefghijklmnopqrstuvwxyz"</span><span class="token punctuation">,</span><br>  <span class="token string">"0123456789"</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">getNonce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> char <span class="token operator">=</span> possible<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> possible<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    text <span class="token operator">+=</span> char<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> text<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br></code></pre><p>We also are creating a <code>getNonce</code> method that will be used for making sure the scripts we load are the ones we passed in.<p>Now create a <code>Panel</code> that will contain the ui for our plugin:<pre class=language-js><code class=language-js><span class="token keyword">class</span> <span class="token class-name">Panel</span> <span class="token punctuation">{</span><br>  <span class="token keyword">public</span> <span class="token keyword">static</span> currentPanel<span class="token operator">:</span> Panel <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span><br>  <span class="token keyword">public</span> <span class="token keyword">static</span> readonly viewType <span class="token operator">=</span> <span class="token string">"litExample"</span><span class="token punctuation">;</span><br>  <span class="token keyword">private</span> _disposables<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Disposable<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">createOrShow</span><span class="token punctuation">(</span><span class="token parameter">extensionUri<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Uri</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> column <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<br>      <span class="token operator">?</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<span class="token punctuation">.</span>viewColumn<br>      <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>Panel<span class="token punctuation">.</span>currentPanel<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      Panel<span class="token punctuation">.</span>currentPanel<span class="token punctuation">.</span>panel<span class="token punctuation">.</span><span class="token function">reveal</span><span class="token punctuation">(</span>column<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">return</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span><br>      Panel<span class="token punctuation">.</span>viewType<span class="token punctuation">,</span><br>      <span class="token constant">TITLE</span><span class="token punctuation">,</span><br>      column <span class="token operator">||</span> vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span><br>      <span class="token function">getWebviewOptions</span><span class="token punctuation">(</span>extensionUri<span class="token punctuation">)</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    Panel<span class="token punctuation">.</span>currentPanel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Panel</span><span class="token punctuation">(</span>panel<span class="token punctuation">,</span> extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">revive</span><span class="token punctuation">(</span><span class="token parameter">panel<span class="token operator">:</span> vscode<span class="token punctuation">.</span>WebviewPanel<span class="token punctuation">,</span> extensionUri<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Uri</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    Panel<span class="token punctuation">.</span>currentPanel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Panel</span><span class="token punctuation">(</span>panel<span class="token punctuation">,</span> extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">private</span> <span class="token function">constructor</span><span class="token punctuation">(</span><br>    <span class="token parameter"><span class="token keyword">public</span> readonly panel<span class="token operator">:</span> vscode<span class="token punctuation">.</span>WebviewPanel<span class="token punctuation">,</span><br>    <span class="token keyword">public</span> readonly extensionUri<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Uri</span><br>  <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span><span class="token function">onDidDispose</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span><span class="token function">onDidChangeViewState</span><span class="token punctuation">(</span><br>      <span class="token punctuation">(</span><span class="token parameter">_</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token keyword">null</span><span class="token punctuation">,</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">onDidReceiveMessage</span><span class="token punctuation">(</span><br>      <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span>command<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">case</span> <span class="token string">"alert"</span><span class="token operator">:</span><br>            vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showErrorMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">return</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token keyword">null</span><span class="token punctuation">,</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">public</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token parameter">command<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> command<span class="token operator">:</span> command <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">public</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    Panel<span class="token punctuation">.</span>currentPanel <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        x<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">private</span> <span class="token function">_update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> webview <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span>webview<span class="token punctuation">;</span><br>    webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getHtmlForWebview</span><span class="token punctuation">(</span>webview<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">private</span> <span class="token function">_getHtmlForWebview</span><span class="token punctuation">(</span><span class="token parameter">webview<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Webview</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> scriptPathOnDisk <span class="token operator">=</span> vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">.</span><span class="token function">joinPath</span><span class="token punctuation">(</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>extensionUri<span class="token punctuation">,</span><br>      <span class="token constant">WEB_DIR</span><span class="token punctuation">,</span><br>      <span class="token constant">WEB_SCRIPT</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> scriptUri <span class="token operator">=</span> webview<span class="token punctuation">.</span><span class="token function">asWebviewUri</span><span class="token punctuation">(</span>scriptPathOnDisk<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> nonce <span class="token operator">=</span> <span class="token function">getNonce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> slot <span class="token operator">=</span> <span class="token string">"&lt;p>This is child content&lt;/p>"</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">&lt;!DOCTYPE html><br>			&lt;html lang="en"><br>        &lt;head><br>          &lt;meta charset="UTF-8"><br>          &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"><br>          &lt;title></span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token constant">TITLE</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">&lt;/title><br>        &lt;/head><br>        &lt;body class="vscode-light"><br>          &lt;</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token constant">TAG</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"> nonce="</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>nonce<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">" ><br>            </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>slot<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"><br>          &lt;/</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token constant">TAG</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">><br>          &lt;script nonce="</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>nonce<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">" type="module" src="</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>scriptUri<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">">&lt;/script><br>        &lt;/body><br>			&lt;/html></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre><p>Notice how we are recreating the html and not using the <code>index.html</code>. This allows us to use the component for a deployed website but also the extension with separate app logic code.<p>Everything else is just boilerplate for managing the panel state and disposing when it is finished.<p>Now we can add the methods for loading our plugin and listening for the commands:<pre class=language-js><code class=language-js><br><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token operator">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">"lit.start"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      Panel<span class="token punctuation">.</span><span class="token function">createOrShow</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">"lit.reset"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>Panel<span class="token punctuation">.</span>currentPanel<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        Panel<span class="token punctuation">.</span>currentPanel<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">"reset"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>registerWebviewPanelSerializer<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">registerWebviewPanelSerializer</span><span class="token punctuation">(</span>Panel<span class="token punctuation">.</span>viewType<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>      <span class="token keyword">async</span> <span class="token function">deserializeWebviewPanel</span><span class="token punctuation">(</span><br>        <span class="token parameter">webviewPanel<span class="token operator">:</span> vscode<span class="token punctuation">.</span>WebviewPanel<span class="token punctuation">,</span><br>        state<span class="token operator">:</span> any</span><br>      <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">Received state: </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>state<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        webviewPanel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token function">getWebviewOptions</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        Panel<span class="token punctuation">.</span><span class="token function">revive</span><span class="token punctuation">(</span>webviewPanel<span class="token punctuation">,</span> context<span class="token punctuation">.</span>extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">getWebviewOptions</span><span class="token punctuation">(</span><span class="token parameter">extensionUri<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Uri</span><span class="token punctuation">)</span><span class="token operator">:</span> vscode<span class="token punctuation">.</span>WebviewOptions <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    enableScripts<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    localResourceRoots<span class="token operator">:</span> <span class="token punctuation">[</span>vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">.</span><span class="token function">joinPath</span><span class="token punctuation">(</span>extensionUri<span class="token punctuation">,</span> <span class="token constant">WEB_DIR</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br></code></pre><p>Here we are loading the extension and passing messages when the <code>lit.reset</code> command. We are also returning the <code>getWebviewOptions</code> options which <code>enableScripts</code> is set to <code>true</code> so we can run the injected js.<p>The final code should look like the follow:<pre class=language-js><code class=language-js><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">"vscode"</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token constant">WEB_DIR</span><span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">"build"</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">WEB_SCRIPT</span><span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">"main.js"</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">TITLE</span><span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">"Lit Example"</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token constant">TAG</span><span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">"my-element"</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token operator">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">"lit.start"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      Panel<span class="token punctuation">.</span><span class="token function">createOrShow</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">"lit.reset"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>Panel<span class="token punctuation">.</span>currentPanel<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        Panel<span class="token punctuation">.</span>currentPanel<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">"reset"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>registerWebviewPanelSerializer<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">registerWebviewPanelSerializer</span><span class="token punctuation">(</span>Panel<span class="token punctuation">.</span>viewType<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>      <span class="token keyword">async</span> <span class="token function">deserializeWebviewPanel</span><span class="token punctuation">(</span><br>        <span class="token parameter">webviewPanel<span class="token operator">:</span> vscode<span class="token punctuation">.</span>WebviewPanel<span class="token punctuation">,</span><br>        state<span class="token operator">:</span> any</span><br>      <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">Received state: </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>state<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        webviewPanel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token function">getWebviewOptions</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        Panel<span class="token punctuation">.</span><span class="token function">revive</span><span class="token punctuation">(</span>webviewPanel<span class="token punctuation">,</span> context<span class="token punctuation">.</span>extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">getWebviewOptions</span><span class="token punctuation">(</span><span class="token parameter">extensionUri<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Uri</span><span class="token punctuation">)</span><span class="token operator">:</span> vscode<span class="token punctuation">.</span>WebviewOptions <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    enableScripts<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    localResourceRoots<span class="token operator">:</span> <span class="token punctuation">[</span>vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">.</span><span class="token function">joinPath</span><span class="token punctuation">(</span>extensionUri<span class="token punctuation">,</span> <span class="token constant">WEB_DIR</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">Panel</span> <span class="token punctuation">{</span><br>  <span class="token keyword">public</span> <span class="token keyword">static</span> currentPanel<span class="token operator">:</span> Panel <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span><br>  <span class="token keyword">public</span> <span class="token keyword">static</span> readonly viewType <span class="token operator">=</span> <span class="token string">"litExample"</span><span class="token punctuation">;</span><br>  <span class="token keyword">private</span> _disposables<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Disposable<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">createOrShow</span><span class="token punctuation">(</span><span class="token parameter">extensionUri<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Uri</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> column <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<br>      <span class="token operator">?</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<span class="token punctuation">.</span>viewColumn<br>      <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>Panel<span class="token punctuation">.</span>currentPanel<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      Panel<span class="token punctuation">.</span>currentPanel<span class="token punctuation">.</span>panel<span class="token punctuation">.</span><span class="token function">reveal</span><span class="token punctuation">(</span>column<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">return</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span><br>      Panel<span class="token punctuation">.</span>viewType<span class="token punctuation">,</span><br>      <span class="token constant">TITLE</span><span class="token punctuation">,</span><br>      column <span class="token operator">||</span> vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span><br>      <span class="token function">getWebviewOptions</span><span class="token punctuation">(</span>extensionUri<span class="token punctuation">)</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    Panel<span class="token punctuation">.</span>currentPanel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Panel</span><span class="token punctuation">(</span>panel<span class="token punctuation">,</span> extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">revive</span><span class="token punctuation">(</span><span class="token parameter">panel<span class="token operator">:</span> vscode<span class="token punctuation">.</span>WebviewPanel<span class="token punctuation">,</span> extensionUri<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Uri</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    Panel<span class="token punctuation">.</span>currentPanel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Panel</span><span class="token punctuation">(</span>panel<span class="token punctuation">,</span> extensionUri<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">private</span> <span class="token function">constructor</span><span class="token punctuation">(</span><br>    <span class="token parameter"><span class="token keyword">public</span> readonly panel<span class="token operator">:</span> vscode<span class="token punctuation">.</span>WebviewPanel<span class="token punctuation">,</span><br>    <span class="token keyword">public</span> readonly extensionUri<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Uri</span><br>  <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span><span class="token function">onDidDispose</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span><span class="token function">onDidChangeViewState</span><span class="token punctuation">(</span><br>      <span class="token punctuation">(</span><span class="token parameter">_</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token keyword">null</span><span class="token punctuation">,</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">onDidReceiveMessage</span><span class="token punctuation">(</span><br>      <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span>command<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          <span class="token keyword">case</span> <span class="token string">"alert"</span><span class="token operator">:</span><br>            vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showErrorMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">return</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token keyword">null</span><span class="token punctuation">,</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">public</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token parameter">command<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> command<span class="token operator">:</span> command <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">public</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    Panel<span class="token punctuation">.</span>currentPanel <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_disposables<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        x<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">private</span> <span class="token function">_update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> webview <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>panel<span class="token punctuation">.</span>webview<span class="token punctuation">;</span><br>    webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getHtmlForWebview</span><span class="token punctuation">(</span>webview<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">private</span> <span class="token function">_getHtmlForWebview</span><span class="token punctuation">(</span><span class="token parameter">webview<span class="token operator">:</span> vscode<span class="token punctuation">.</span>Webview</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> scriptPathOnDisk <span class="token operator">=</span> vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">.</span><span class="token function">joinPath</span><span class="token punctuation">(</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>extensionUri<span class="token punctuation">,</span><br>      <span class="token constant">WEB_DIR</span><span class="token punctuation">,</span><br>      <span class="token constant">WEB_SCRIPT</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> scriptUri <span class="token operator">=</span> webview<span class="token punctuation">.</span><span class="token function">asWebviewUri</span><span class="token punctuation">(</span>scriptPathOnDisk<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> nonce <span class="token operator">=</span> <span class="token function">getNonce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> slot <span class="token operator">=</span> <span class="token string">"&lt;p>This is child content&lt;/p>"</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> htmlSource <span class="token operator">=</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string"><br>    &lt;!DOCTYPE html><br>    &lt;html lang="en"><br>      &lt;head><br>        &lt;meta charset="UTF-8"><br>        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"><br>        &lt;title></span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token constant">TITLE</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">&lt;/title><br>      &lt;/head><br>      &lt;body class="vscode-light"><br>        &lt;</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token constant">TAG</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"> nonce="</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>nonce<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">" ><br>          </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>slot<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"><br>        &lt;/</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token constant">TAG</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">><br>        &lt;script nonce="</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>nonce<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">" type="module" src="</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>scriptUri<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">">&lt;/script><br>      &lt;/body><br>    &lt;/html></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> htmlSource<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> possible <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="token punctuation">,</span><br>  <span class="token string">"abcdefghijklmnopqrstuvwxyz"</span><span class="token punctuation">,</span><br>  <span class="token string">"0123456789"</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">getNonce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> char <span class="token operator">=</span> possible<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> possible<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    text <span class="token operator">+=</span> char<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> text<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br></code></pre><h2 id=running>Running <a href=#running class=direct-link>#</a></h2><p>Make sure to install the dependencies by running <code>npm i</code>.<p>To build the extension run <code>npm run compile</code>.<p>To open the extension and debug hit <code>F5</code>.</p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/vscode/final-1920w.avif 1920w, /img/vscode/final-1280w.avif 1280w, /img/vscode/final-640w.avif 640w, /img/vscode/final-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/vscode/final-1920w.webp 1920w, /img/vscode/final-1280w.webp 1280w, /img/vscode/final-640w.webp 640w, /img/vscode/final-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/vscode/final-1920w.jpg 1920w, /img/vscode/final-1280w.jpg 1280w, /img/vscode/final-640w.jpg 640w, /img/vscode/final-320w.jpg 320w" type=image/jpeg><img src=/img/vscode/final-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 875 671'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYUlEQVQY02PQ0jP+r29s/l/H0PS/pp7Rfw1dw/9K6jpwrKKp95/BNzD0v72zx38FVa3/yhq6YAySgGFVkCI9oCkgE8ACWvooCmCYQVFNG64bZhI6ZoCpRrcGxSRkUyhSBAC1mV4KX6YBagAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><p>To run the commands to open the extension run <code>lit: open plugin</code> or <code>lit: reset</code>:</p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/vscode/commands-1920w.avif 1920w, /img/vscode/commands-1280w.avif 1280w, /img/vscode/commands-640w.avif 640w, /img/vscode/commands-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/vscode/commands-1920w.webp 1920w, /img/vscode/commands-1280w.webp 1280w, /img/vscode/commands-640w.webp 640w, /img/vscode/commands-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/vscode/commands-1920w.jpg 1920w, /img/vscode/commands-1280w.jpg 1280w, /img/vscode/commands-640w.jpg 640w, /img/vscode/commands-320w.jpg 320w" type=image/jpeg><img src=/img/vscode/commands-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 614 88'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeUlEQVQI15XL0QqCMABA0f1KZYGlTp3ZmkJtmkJmvcig/v8/buEPVA/n5cIV0cGxjEqCRLNJzV/W8sgq1rNAGhZbhTiPL9ww0dw8edWR19+puierLpj2Tvd4Yq8TdvCk2iLc6Dk1PbHShLIgTH63y0rk3syvLMynKd4PXmHZmTcsRgAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><p>To debug the extension when it is open run <code>Developer: Open Webview Developer Tools</code> from the command pallet.</p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/vscode/tools-1920w.avif 1920w, /img/vscode/tools-1280w.avif 1280w, /img/vscode/tools-640w.avif 640w, /img/vscode/tools-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/vscode/tools-1920w.webp 1920w, /img/vscode/tools-1280w.webp 1280w, /img/vscode/tools-640w.webp 640w, /img/vscode/tools-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/vscode/tools-1920w.jpg 1920w, /img/vscode/tools-1280w.jpg 1280w, /img/vscode/tools-640w.jpg 640w, /img/vscode/tools-320w.jpg 320w" type=image/jpeg><img src=/img/vscode/tools-1920w.jpg style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 607 107'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAADCAYAAACeRF9pAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVQI12XM7QqCMBQGYG8ljUpyM8XQtU0T55oxEaIg6P6v421bBEE/Hg7n640oG3HgF/ian3RQCINSfvg5adQf/+Pv/H1WD4ja0WJ5vGDmO+ztGZy1hRwm8N6FNR1oxZEfBagTqutZp9GqK9S0oJYuqGISyswQvcZgLBrRI9kRrDb7IN5mSJz4h++/u5SWWKcEbxcqWcQd4L5eAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&#34;)" width=100% decoding=async loading=lazy></picture><h2 id=conclusion>Conclusion <a href=#conclusion class=direct-link>#</a></h2><p>If you want to learn more about building a vscode extension you can read more <a href=https://code.visualstudio.com/api>here</a> and for Lit you can read the docs <a href=https://lit.dev>here</a>.<h1>🙏🙏🙏</h1><p>Since you've made it this far, <a href=https://rodydavis.com/posts/lit-vscode-extension/ on-click=share>sharing</a> this article on your favorite social media network would be highly appreciated 💖! For feedback, please <a href=https://twitter.com/rodydavis rel=noopener target=_blank>ping me on Twitter.</a></p><share-widget><button aria-label=Share href=https://rodydavis.com/posts/lit-vscode-extension/ on-click=share><div></div></button></share-widget><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Lit and VSCode Extensions","image":["https://rodydavis.com/img/vscode/final-1920w.jpg","https://rodydavis.com/img/vscode/commands-1920w.jpg","https://rodydavis.com/img/vscode/tools-1920w.jpg"],"author":"Rody Davis","genre":"https://schema.org/Code","publisher":{"@type":"Organization","name":"Rody Davis","logo":{"@type":"ImageObject","url":"/img/favicon/favicon-32x32.png?hash=3df5885280"}},"url":"https://rodydavis.com/posts/lit-vscode-extension/","mainEntityOfPage":"https://rodydavis.com/posts/lit-vscode-extension/","datePublished":"2021-06-24","dateModified":"2021-07-08","description":"In this article I will go over how to set up a Lit web component and use it to create a VSCode extension. TLDR You can find the final source..."}</script><p>Published <time datetime=2021-06-24>24 Jun 2021</time></article></main><footer><a href=https://twitter.com/rodydavis class="fab fa-twitter" rel="noopener noreferrer" target=_blank></a> <a href=https://facebook.com/rodydavisjr class="fab fa-facebook" rel="noopener noreferrer" target=_blank></a> <a href=https://www.linkedin.com/in/rodydavis class="fab fa-linkedin" rel="noopener noreferrer" target=_blank></a> <a href=https://www.youtube.com/rodydavis class="fab fa-youtube" rel="noopener noreferrer" target=_blank></a> <a href=https://www.instagram.com/rodydavisjr class="fab fa-instagram" rel="noopener noreferrer" target=_blank></a> <a href=https://www.github.com/rodydavis class="fab fa-github" rel="noopener noreferrer" target=_blank></a> <a href=https://www.tiktok.com/@rodydavisjr class="fab fa-tiktok" rel="noopener noreferrer" target=_blank></a></footer><script src="https://www.googletagmanager.com/gtag/js?id=G-JQNPVBL9DR" async></script><script>window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-JQNPVBL9DR');</script>