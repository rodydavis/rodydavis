<!DOCTYPE html>
<html lang="en" class="astro-MDYSN4OI">
  <head>
    <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta name="generator" content="Astro v2.0.4">

<!-- Canonical URL -->
<link rel="canonical" href="https://rodydavis.com/posts/lit-force-graph/">

<!-- Primary Meta Tags -->
<title>2D/3D Force Graph with Lit</title>
<meta name="title" content="2D/3D Force Graph with Lit">
<meta name="description">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://rodydavis.com/posts/lit-force-graph/">
<meta property="og:title" content="2D/3D Force Graph with Lit">
<meta property="og:description">
<meta property="og:image" content="https://rodydavis.com/placeholder-social.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://rodydavis.com/posts/lit-force-graph/">
<meta property="twitter:title" content="2D/3D Force Graph with Lit">
<meta property="twitter:description">
<meta property="twitter:image" content="https://rodydavis.com/placeholder-social.jpg">
    
  <link rel="stylesheet" href="/_astro/_...slug_.f65ef62a.css" />
<link rel="stylesheet" href="/_astro/_...slug_.7a06253d.css" /></head>

  <body class="markdown-body astro-MDYSN4OI">
    <header class="astro-3EF6KSR2">
  <h2 class="astro-3EF6KSR2">
    <a href="/" class="astro-3EF6KSR2">Rody Davis</a>
  </h2>
  <nav class="astro-3EF6KSR2">
    <a href="/search?tags=app" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Apps</div>
</a><a href="/search?tags=posts" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Blog</div>
</a><a href="/talks" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Talks</div>
</a><a href="/about" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> About</div>
</a>
  </nav>
</header>
    <main class="astro-MDYSN4OI">
      <style>
	@media (min-width: 860px) {
		main {
			display: flex;
			flex-direction: row;
			justify-content: space-between;
		}
		article {
			flex: 1;
		}
		aside {
			display: block;
			position: sticky;
			top: 0;
			right: 0;
			max-height: 100vh;
			overflow-y: auto;
		}
	}
	</style><main class="astro-BVZIHDZO">
    <article class="astro-BVZIHDZO">
      
      <h1 class="title astro-BVZIHDZO">2D/3D Force Graph with Lit</h1>
      
      
      <hr class="astro-BVZIHDZO">
      <p>In this article we will cover how to create a 2D/3D force graph using <a href="https://lit.dev">Lit</a>.</p>
<blockquote>
<p><strong>TLDR</strong> The final source <a href="https://github.com/rodydavis/lit-force-graph">here</a> and an online <a href="https://rodydavis.github.io/lit-force-graph/">demo</a>.</p>
</blockquote>
<h2 id=""><a aria-hidden="true" tabindex="-1" href="#"><span class="icon icon-link"></span></a>Prerequisites</h2>
<ul>
<li>Vscode</li>
<li>Node >= 16</li>
<li>Typescript</li>
</ul>
<h2 id="-1"><a aria-hidden="true" tabindex="-1" href="#-1"><span class="icon icon-link"></span></a>Getting Started</h2>
<p>We can start off by navigating in terminal to the location of the project and run the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">npm init @vitejs/app --template lit-ts</span></span></code></pre>
<p>Then enter a project name <code>lit-force-graph</code> and now open the project in vscode and install the dependencies:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> lit-force-graph force-graph</span></span>
<span class="line"><span style="color: #C9D1D9">npm i lit 3d-force-graph</span></span>
<span class="line"><span style="color: #C9D1D9">npm i -D @types/node</span></span>
<span class="line"><span style="color: #C9D1D9">code </span><span style="color: #79C0FF">.</span></span></code></pre>
<p>Update the <code>vite.config.ts</code> with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { defineConfig } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"vite"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { resolve } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"path"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> </span><span style="color: #D2A8FF">defineConfig</span><span style="color: #FFA657">({</span></span>
<span class="line"><span style="color: #FFA657">  </span><span style="color: #C9D1D9">base: </span><span style="color: #A5D6FF">"/lit-force-graph/"</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">  </span><span style="color: #C9D1D9">build: {</span></span>
<span class="line"><span style="color: #C9D1D9">    lib: {</span></span>
<span class="line"><span style="color: #C9D1D9">      entry: </span><span style="color: #A5D6FF">"src/lit-force-graph.ts"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      formats: [</span><span style="color: #A5D6FF">"es"</span><span style="color: #C9D1D9">],</span></span>
<span class="line"><span style="color: #C9D1D9">    },</span></span>
<span class="line"><span style="color: #C9D1D9">    rollupOptions: {</span></span>
<span class="line"><span style="color: #C9D1D9">      input: {</span></span>
<span class="line"><span style="color: #C9D1D9">        main: </span><span style="color: #D2A8FF">resolve</span><span style="color: #C9D1D9">(__dirname, </span><span style="color: #A5D6FF">"index.html"</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">      },</span></span>
<span class="line"><span style="color: #C9D1D9">    },</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">})</span><span style="color: #C9D1D9">;</span></span></code></pre>
<h2 id="-2"><a aria-hidden="true" tabindex="-1" href="#-2"><span class="icon icon-link"></span></a>Template</h2>
<p>Open up the <code>index.html</code> and update it with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&#x3C;!</span><span style="color: #7EE787">DOCTYPE</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">html</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;</span><span style="color: #7EE787">html</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">lang</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"en"</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;</span><span style="color: #7EE787">head</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">meta</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">charset</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"UTF-8"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">link</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">rel</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"icon"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">type</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"image/svg+xml"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">href</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"/src/favicon.svg"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">meta</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">name</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"viewport"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">content</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"width=device-width, initial-scale=1.0"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">title</span><span style="color: #C9D1D9">>Lit Force Graph&#x3C;/</span><span style="color: #7EE787">title</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">type</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"module"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">src</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"/src/lit-force-graph.ts"</span><span style="color: #C9D1D9">>&#x3C;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">link</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">rel</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"stylesheet"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">href</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"/style.css"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;/</span><span style="color: #7EE787">head</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;</span><span style="color: #7EE787">body</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">lit-force-graph</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">      &#x3C;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">type</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"application/json"</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">        {</span></span>
<span class="line"><span style="color: #C9D1D9">          "name": "Lit Force Graph",</span></span>
<span class="line"><span style="color: #C9D1D9">          "description": "A force graph built with Lit",</span></span>
<span class="line"><span style="color: #C9D1D9">          "nodes": [</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "id": "1",</span></span>
<span class="line"><span style="color: #C9D1D9">              "name": "Node 1"</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "id": "2",</span></span>
<span class="line"><span style="color: #C9D1D9">              "name": "Node 2"</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "id": "3",</span></span>
<span class="line"><span style="color: #C9D1D9">              "name": "Node 3"</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "id": "4",</span></span>
<span class="line"><span style="color: #C9D1D9">              "name": "Node 4"</span></span>
<span class="line"><span style="color: #C9D1D9">            }</span></span>
<span class="line"><span style="color: #C9D1D9">          ],</span></span>
<span class="line"><span style="color: #C9D1D9">          "links": [</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "source": "1",</span></span>
<span class="line"><span style="color: #C9D1D9">              "target": "2"</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "source": "1",</span></span>
<span class="line"><span style="color: #C9D1D9">              "target": "3"</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "source": "2",</span></span>
<span class="line"><span style="color: #C9D1D9">              "target": "3"</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "source": "2",</span></span>
<span class="line"><span style="color: #C9D1D9">              "target": "4"</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "source": "3",</span></span>
<span class="line"><span style="color: #C9D1D9">              "target": "4"</span></span>
<span class="line"><span style="color: #C9D1D9">            },</span></span>
<span class="line"><span style="color: #C9D1D9">            {</span></span>
<span class="line"><span style="color: #C9D1D9">              "source": "4",</span></span>
<span class="line"><span style="color: #C9D1D9">              "target": "1"</span></span>
<span class="line"><span style="color: #C9D1D9">            }</span></span>
<span class="line"><span style="color: #C9D1D9">          ]</span></span>
<span class="line"><span style="color: #C9D1D9">        }</span></span>
<span class="line"><span style="color: #C9D1D9">      &#x3C;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;/</span><span style="color: #7EE787">lit-force-graph</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;/</span><span style="color: #7EE787">body</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;/</span><span style="color: #7EE787">html</span><span style="color: #C9D1D9">></span></span></code></pre>
<p>We are passing the graph data as JSON here, but we could also set a src attribute pointed to a remote or local file. It is still possible to set the graph data directly on a component.</p>
<h2 id="-3"><a aria-hidden="true" tabindex="-1" href="#-3"><span class="icon icon-link"></span></a>Styles</h2>
<p>Create and open the <code>public/style.css</code> file and update it with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #7EE787">body</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">margin</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">padding</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">overflow</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">hidden</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">font-size</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">12</span><span style="color: #FF7B72">px</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">font-family</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">sans-serif</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">position</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">relative</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">width</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">100</span><span style="color: #FF7B72">%</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">height</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">100</span><span style="color: #FF7B72">%</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7EE787">lit-force-graph</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">width</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">100</span><span style="color: #FF7B72">%</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">height</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">100</span><span style="color: #FF7B72">vh</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #79C0FF">:root</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">--graph-background-color</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">#eee</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">--graph-foreground-color</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">#000</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">--graph-line-color</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">rgb</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">90</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">90</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">90</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">--graph-node-color</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">rgb</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">218</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">14</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">14</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">@media</span><span style="color: #C9D1D9"> (prefers-color-scheme: dark) {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">:root</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">--graph-background-color</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">#000</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">--graph-foreground-color</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">#fafafa</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">--graph-line-color</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">rgb</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">214</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">214</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">214</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">--graph-node-color</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">rgb</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">228</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">8</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">8</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<h2 id="-4"><a aria-hidden="true" tabindex="-1" href="#-4"><span class="icon icon-link"></span></a>Web Component</h2>
<p>Before we update our component we need to rename <code>my-element.ts</code> to <code>lit-force-graph.ts</code></p>
<p>Open up <code>lit-force-graph.ts</code> and update it with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { html, css, LitElement } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { customElement, property, query, state } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit/decorators.js"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">tagName</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit-force-graph"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">customElement</span><span style="color: #C9D1D9">(tagName)</span></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">LitForceGraph</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">LitElement</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">static</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">styles</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">css</span><span style="color: #A5D6FF">`</span></span>
<span class="line"><span style="color: #A5D6FF">    :host {</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: var(--graph-background-color, #000011);</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--graph-foreground-color, #ffffff);</span></span>
<span class="line"><span style="color: #A5D6FF">      width: var(--graph-width, 100%);</span></span>
<span class="line"><span style="color: #A5D6FF">      height: var(--graph-height, 100vh);</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #graph {</span></span>
<span class="line"><span style="color: #A5D6FF">      width: 100%;</span></span>
<span class="line"><span style="color: #A5D6FF">      height: 100%;</span></span>
<span class="line"><span style="color: #A5D6FF">      width: var(--graph-width, 100%);</span></span>
<span class="line"><span style="color: #A5D6FF">      height: var(--graph-height, 100vh);</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #controls {</span></span>
<span class="line"><span style="color: #A5D6FF">      position: absolute;</span></span>
<span class="line"><span style="color: #A5D6FF">      top: 20px;</span></span>
<span class="line"><span style="color: #A5D6FF">      right: 20px;</span></span>
<span class="line"><span style="color: #A5D6FF">      z-index: 100 !important;</span></span>
<span class="line"><span style="color: #A5D6FF">      display: flex;</span></span>
<span class="line"><span style="color: #A5D6FF">      flex-direction: column;</span></span>
<span class="line"><span style="color: #A5D6FF">      align-items: flex-end;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"><span style="color: #A5D6FF">    #controls div {</span></span>
<span class="line"><span style="color: #A5D6FF">      padding: 5px;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #info {</span></span>
<span class="line"><span style="color: #A5D6FF">      position: absolute;</span></span>
<span class="line"><span style="color: #A5D6FF">      top: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      left: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      z-index: 100 !important;</span></span>
<span class="line"><span style="color: #A5D6FF">      display: flex;</span></span>
<span class="line"><span style="color: #A5D6FF">      flex-direction: column;</span></span>
<span class="line"><span style="color: #A5D6FF">      align-items: flex-start;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #tooltips {</span></span>
<span class="line"><span style="color: #A5D6FF">      position: absolute;</span></span>
<span class="line"><span style="color: #A5D6FF">      bottom: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      left: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      right: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      display: flex;</span></span>
<span class="line"><span style="color: #A5D6FF">      flex-direction: row;</span></span>
<span class="line"><span style="color: #A5D6FF">      align-items: center;</span></span>
<span class="line"><span style="color: #A5D6FF">      text-align: center;</span></span>
<span class="line"><span style="color: #A5D6FF">      justify-content: center;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .node-tooltip {</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: var(--graph-foreground-color, #ffffff);</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--graph-background-color, #000011);</span></span>
<span class="line"><span style="color: #A5D6FF">      border-radius: 5px;</span></span>
<span class="line"><span style="color: #A5D6FF">      font-size: 12px;</span></span>
<span class="line"><span style="color: #A5D6FF">      padding: 5px;</span></span>
<span class="line"><span style="color: #A5D6FF">      opacity: 0.67;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #graph-description {</span></span>
<span class="line"><span style="color: #A5D6FF">      opacity: 0.67;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .scene-tooltip {</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--graph-foreground-color, #ffffff);</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: transparent;</span></span>
<span class="line"><span style="color: #A5D6FF">      display: none;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"><span style="color: #A5D6FF">  `</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">query</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"#graph"</span><span style="color: #C9D1D9">) </span><span style="color: #FFA657">graph</span><span style="color: #FF7B72">!:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLElement</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">() </span><span style="color: #FFA657">src</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">""</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">() </span><span style="color: #FFA657">mode</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"2D"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">render</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">` &#x3C;main</span></span>
<span class="line"><span style="color: #A5D6FF">      accept="application/json"</span></span>
<span class="line"><span style="color: #A5D6FF">      @drop="${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">onDrop</span><span style="color: #A5D6FF">}"</span></span>
<span class="line"><span style="color: #A5D6FF">      @dragover="${</span><span style="color: #A5D6FF">(</span><span style="color: #79C0FF">e</span><span style="color: #FF7B72">:</span><span style="color: #A5D6FF"> </span><span style="color: #FFA657">Event</span><span style="color: #A5D6FF">) </span><span style="color: #FF7B72">=></span><span style="color: #A5D6FF"> </span><span style="color: #C9D1D9">e</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">preventDefault</span><span style="color: #A5D6FF">()</span><span style="color: #A5D6FF">}"</span></span>
<span class="line"><span style="color: #A5D6FF">    ></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="graph">&#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="controls"></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;div></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;label for="render-mode">Render mode&#x3C;/label></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;select id="render-mode" @change=${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">onChangeMode</span><span style="color: #A5D6FF">}></span></span>
<span class="line"><span style="color: #A5D6FF">            &#x3C;!-- TODO: Add render options --></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;/select></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="info"></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;!-- TODO: Add labels for graph --></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="tooltips"></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;!-- TODO: Add tooltip for node --></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;/main>`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">override</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">firstUpdated</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">refresh</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">prefersDark</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> window.</span><span style="color: #D2A8FF">matchMedia</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"(prefers-color-scheme: dark)"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    prefersDark.</span><span style="color: #D2A8FF">addEventListener</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"change"</span><span style="color: #C9D1D9">, () </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">refresh</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">override</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">attributeChangedCallback</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">name</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">_old</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">value</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span></span>
<span class="line"><span style="color: #C9D1D9">  )</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">void</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (name </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"src"</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x26;&#x26;</span><span style="color: #C9D1D9"> value) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">refresh</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (name </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"data"</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x26;&#x26;</span><span style="color: #C9D1D9"> value) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">JSON</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">parse</span><span style="color: #C9D1D9">(value));</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (name </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"mode"</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x26;&#x26;</span><span style="color: #C9D1D9"> value) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.mode </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> value;</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">({ </span><span style="color: #FF7B72">...</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data</span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9"> });</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">attributeChangedCallback</span><span style="color: #C9D1D9">(name, _old, value);</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/**</span></span>
<span class="line"><span style="color: #8B949E">   * Set the graph data and update the renderer</span></span>
<span class="line"><span style="color: #8B949E">   *</span></span>
<span class="line"><span style="color: #8B949E">   * </span><span style="color: #FF7B72">@param</span><span style="color: #8B949E"> </span><span style="color: #C9D1D9">data</span><span style="color: #8B949E"> Graph JSON</span></span>
<span class="line"><span style="color: #8B949E">   */</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">data</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphData</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> data;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #8B949E">// TODO: Render the graph!</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">refresh</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #8B949E">// Get json from script tag</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">children</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> Array.</span><span style="color: #D2A8FF">from</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.children);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">elem</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> children.</span><span style="color: #D2A8FF">find</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">child</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> child.tagName </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"SCRIPT"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (elem) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #8B949E">// Render from script tag contents</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (elem.textContent) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">data</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">JSON</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">parse</span><span style="color: #C9D1D9">(elem.textContent);</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (data) </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(data);</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #8B949E">// Render from script tag src</span></span>
<span class="line"><span style="color: #C9D1D9">      } </span><span style="color: #FF7B72">else</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (elem.</span><span style="color: #D2A8FF">hasAttribute</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"src"</span><span style="color: #C9D1D9">)) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">url</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> elem.</span><span style="color: #D2A8FF">getAttribute</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"src"</span><span style="color: #C9D1D9">)</span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">data</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">fetch</span><span style="color: #C9D1D9">(url).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">res</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> res.</span><span style="color: #D2A8FF">json</span><span style="color: #C9D1D9">());</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (data) </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(data);</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    } </span><span style="color: #FF7B72">else</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.src.</span><span style="color: #79C0FF">length</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #8B949E">// Render from src attribute</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">data</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">fetch</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.src).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">res</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> res.</span><span style="color: #D2A8FF">json</span><span style="color: #C9D1D9">());</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (data) </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(data);</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">onDrop</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">e</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">DragEvent</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    e.</span><span style="color: #D2A8FF">preventDefault</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">files</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> e.dataTransfer?.files;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (files </span><span style="color: #FF7B72">&#x26;&#x26;</span><span style="color: #C9D1D9"> files.</span><span style="color: #79C0FF">length</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">file</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> files[</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">];</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">reader</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">FileReader</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">      reader.</span><span style="color: #D2A8FF">onload</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> () </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">json</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">JSON</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">parse</span><span style="color: #C9D1D9">(reader.result </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> json;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(json);</span></span>
<span class="line"><span style="color: #C9D1D9">      };</span></span>
<span class="line"><span style="color: #C9D1D9">      reader.</span><span style="color: #D2A8FF">readAsText</span><span style="color: #C9D1D9">(file);</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">onChangeMode</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">e</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Event</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">mode</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> (e.target </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLSelectElement</span><span style="color: #C9D1D9">).value;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.mode </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> mode;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">!</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data) </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">({ </span><span style="color: #FF7B72">...</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data</span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9"> });</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">declare</span><span style="color: #C9D1D9"> global {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">interface</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLElementTagNameMap</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">"lit-force-graph"</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">LitForceGraph</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<p>Here we are creating the base component and wiring it up to listen for a drop event of JSON, accept the src attribute or script tag with json in the text contents.</p>
<p>The CSS just sets the tooltip at the bottom of the screen, title to the left and the render selection controls to the top right.</p>
<p>With Lit it makes it easy to support multiple ways to set the data of the component.</p>
<h3 id="-5"><a aria-hidden="true" tabindex="-1" href="#-5"><span class="icon icon-link"></span></a>Inline</h3>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&#x3C;</span><span style="color: #7EE787">lit-source-graph</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">type</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"application/json"</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    {</span></span>
<span class="line"><span style="color: #C9D1D9">      "nodes": [],</span></span>
<span class="line"><span style="color: #C9D1D9">      "links": []</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;/</span><span style="color: #7EE787">lit-source-graph</span><span style="color: #C9D1D9">></span></span></code></pre>
<h3 id="-6"><a aria-hidden="true" tabindex="-1" href="#-6"><span class="icon icon-link"></span></a>Lazy Loading</h3>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&#x3C;</span><span style="color: #7EE787">lit-source-graph</span><span style="color: #C9D1D9">>&#x3C;/</span><span style="color: #7EE787">lit-source-graph</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">elem</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> document.</span><span style="color: #D2A8FF">createElement</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"lit-source-graph"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">  elem.src </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./graph-data.json"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">// Or remote url</span></span>
<span class="line"><span style="color: #C9D1D9">  elem.src </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"https://example.com/graph-data.json"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">// Or data from an object</span></span>
<span class="line"><span style="color: #C9D1D9">  elem.data </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> { node: [], links: [] };</span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">></span></span></code></pre>
<h2 id="-7"><a aria-hidden="true" tabindex="-1" href="#-7"><span class="icon icon-link"></span></a>Graph Data</h2>
<p>Create and open the file <code>src/classes/graph.ts</code> and add the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Graph</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">ids</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Set</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">graph</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphData</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    nodes: [],</span></span>
<span class="line"><span style="color: #C9D1D9">    links: [],</span></span>
<span class="line"><span style="color: #C9D1D9">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">addNode</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">T</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">>(</span><span style="color: #FFA657">node</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphNode</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">T</span><span style="color: #C9D1D9">>) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.ids.</span><span style="color: #D2A8FF">has</span><span style="color: #C9D1D9">(node.id)) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.graph.nodes.</span><span style="color: #D2A8FF">find</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">n</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> n.id </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> node.id)</span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.ids.</span><span style="color: #D2A8FF">add</span><span style="color: #C9D1D9">(node.id);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.graph.nodes.</span><span style="color: #D2A8FF">push</span><span style="color: #C9D1D9">(node);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> node;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">addLink</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">T</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">>(</span><span style="color: #FFA657">link</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphLink</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">T</span><span style="color: #C9D1D9">>) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.graph.links.</span><span style="color: #D2A8FF">push</span><span style="color: #C9D1D9">(link);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> link;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">toJSON</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.graph;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">interface</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphNode</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">T</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">id</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">name</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">group</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">value</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">T</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">interface</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphLink</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">T</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">source</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">target</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">name</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">value</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">T</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">interface</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphData</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">A</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">B</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">name</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">description</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">nodes</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphNode</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">A</span><span style="color: #C9D1D9">>[];</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">links</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphLink</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">B</span><span style="color: #C9D1D9">>[];</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>Here we are creating a utility class that can generate the nodes and links while excluding duplicates and returning the graph data.</p>
<p>Create and open the file <code>src/classes/context.ts</code> and add the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { GraphData, GraphNode } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./graph"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">interface</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">RenderContext</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">data</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphData</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">element</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLElement</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">onHover</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (</span><span style="color: #FFA657">node</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphNode</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">void</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">type</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Renderer</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> (</span><span style="color: #FFA657">context</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">RenderContext</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">void</span><span style="color: #C9D1D9">;</span></span></code></pre>
<p>Here is the context type that we will use to create the renderers and pass with the data.</p>
<h2 id="-8"><a aria-hidden="true" tabindex="-1" href="#-8"><span class="icon icon-link"></span></a>2D Renderer</h2>
<p>Create and open the file <code>src/renderers/mode-2d.ts</code> and add the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> ForceGraph </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"force-graph"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { RenderContext } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"../classes/context"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">render</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">context</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">RenderContext</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">graph</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ForceGraph</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">style</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getComputedStyle</span><span style="color: #C9D1D9">(context.element);</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">lineColor</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> style.</span><span style="color: #D2A8FF">getPropertyValue</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"--graph-line-color"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">trim</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">bgColor</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> style.</span><span style="color: #D2A8FF">getPropertyValue</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"--graph-background-color"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">trim</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">fgColor</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> style.</span><span style="color: #D2A8FF">getPropertyValue</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"--graph-foreground-color"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">trim</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">nodeColor</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> style.</span><span style="color: #D2A8FF">getPropertyValue</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"--graph-node-color"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">trim</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">graph</span><span style="color: #C9D1D9">(context.element)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">graphData</span><span style="color: #C9D1D9">(context.data)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">width</span><span style="color: #C9D1D9">(</span><span style="color: #D2A8FF">Number</span><span style="color: #C9D1D9">(style.width.</span><span style="color: #D2A8FF">slice</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">, </span><span style="color: #FF7B72">-</span><span style="color: #79C0FF">2</span><span style="color: #C9D1D9">)))</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">height</span><span style="color: #C9D1D9">(</span><span style="color: #D2A8FF">Number</span><span style="color: #C9D1D9">(style.height.</span><span style="color: #D2A8FF">slice</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">, </span><span style="color: #FF7B72">-</span><span style="color: #79C0FF">2</span><span style="color: #C9D1D9">)))</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">cooldownTicks</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">100</span><span style="color: #C9D1D9">)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">backgroundColor</span><span style="color: #C9D1D9">(bgColor)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">linkColor</span><span style="color: #C9D1D9">(() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> lineColor)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">linkWidth</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0.2</span><span style="color: #C9D1D9">)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">nodeCanvasObject</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">node</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">ctx</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">globalScale</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #8B949E">// Draw a circle</span></span>
<span class="line"><span style="color: #C9D1D9">      ctx.</span><span style="color: #D2A8FF">beginPath</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">size</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">5</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">/</span><span style="color: #C9D1D9"> globalScale;</span></span>
<span class="line"><span style="color: #C9D1D9">      ctx.</span><span style="color: #D2A8FF">arc</span><span style="color: #C9D1D9">(node.x, node.y, size, </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">2</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> Math.</span><span style="color: #79C0FF">PI</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #8B949E">//   ctx.fillStyle = nodeColor(node, groupColors);</span></span>
<span class="line"><span style="color: #C9D1D9">      ctx.fillStyle </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> nodeColor;</span></span>
<span class="line"><span style="color: #C9D1D9">      ctx.</span><span style="color: #D2A8FF">fill</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">      ctx.lineWidth </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">1</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">/</span><span style="color: #C9D1D9"> globalScale;</span></span>
<span class="line"><span style="color: #C9D1D9">      ctx.strokeStyle </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> lineColor;</span></span>
<span class="line"><span style="color: #C9D1D9">      ctx.</span><span style="color: #D2A8FF">stroke</span><span style="color: #C9D1D9">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (globalScale </span><span style="color: #FF7B72">>=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">4</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">label</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> node.name </span><span style="color: #FF7B72">??</span><span style="color: #C9D1D9"> node.id;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">fontSize</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">12</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">/</span><span style="color: #C9D1D9"> globalScale;</span></span>
<span class="line"><span style="color: #C9D1D9">        ctx.font </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">`${</span><span style="color: #C9D1D9">fontSize</span><span style="color: #A5D6FF">}px Sans-Serif`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">textWidth</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> ctx.</span><span style="color: #D2A8FF">measureText</span><span style="color: #C9D1D9">(label).width;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">bckgDimensions</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> [textWidth, fontSize].</span><span style="color: #D2A8FF">map</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          (</span><span style="color: #FFA657">n</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> n </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> fontSize </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0.2</span></span>
<span class="line"><span style="color: #C9D1D9">        ); </span><span style="color: #8B949E">// some padding</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">        ctx.textAlign </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"center"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">        ctx.textBaseline </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"middle"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">        ctx.fillStyle </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> fgColor;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #8B949E">// Measure text</span></span>
<span class="line"><span style="color: #C9D1D9">        ctx.</span><span style="color: #D2A8FF">fillText</span><span style="color: #C9D1D9">(label, node.x </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> size </span><span style="color: #FF7B72">*</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">+</span><span style="color: #C9D1D9"> textWidth </span><span style="color: #FF7B72">/</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">2</span><span style="color: #C9D1D9">, node.y);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">        node.__bckgDimensions </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> bckgDimensions;</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    })</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">onNodeHover</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">node</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">prev</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (node) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">graphNode</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> context.data.nodes.</span><span style="color: #D2A8FF">find</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">n</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> n.id </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> node.id);</span></span>
<span class="line"><span style="color: #C9D1D9">        context.</span><span style="color: #D2A8FF">onHover</span><span style="color: #C9D1D9">(graphNode);</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (prev) {</span></span>
<span class="line"><span style="color: #C9D1D9">        context.</span><span style="color: #D2A8FF">onHover</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">undefined</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>Here we are importing the context and creating the boilerplate for the 2D renderer. When the scale is greater than 4 we draw the node name to add a little more detail.</p>
<p>Notice that on node hover we are calling the onHover callback with the hovered node and we are using custom properties to render the colors.</p>
<h2 id="-9"><a aria-hidden="true" tabindex="-1" href="#-9"><span class="icon icon-link"></span></a>3D Renderer</h2>
<p>Create and open the file <code>src/renderers/mode-3d.ts</code> and add the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> ForceGraph </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"3d-force-graph"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { RenderContext } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"../classes/context.js"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">render</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">context</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">RenderContext</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">graph</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">ForceGraph</span><span style="color: #C9D1D9">({</span></span>
<span class="line"><span style="color: #C9D1D9">    controlType: </span><span style="color: #A5D6FF">"trackball"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    rendererConfig: { antialias: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">, alpha: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9"> },</span></span>
<span class="line"><span style="color: #C9D1D9">  });</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">style</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getComputedStyle</span><span style="color: #C9D1D9">(context.element);</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">lineColor</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> style.</span><span style="color: #D2A8FF">getPropertyValue</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"--graph-line-color"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">trim</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">bgColor</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> style.</span><span style="color: #D2A8FF">getPropertyValue</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"--graph-background-color"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">trim</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">nodeColor</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> style.</span><span style="color: #D2A8FF">getPropertyValue</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"--graph-node-color"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">trim</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">graph</span><span style="color: #C9D1D9">(context.element)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">graphData</span><span style="color: #C9D1D9">(context.data)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">width</span><span style="color: #C9D1D9">(</span><span style="color: #D2A8FF">Number</span><span style="color: #C9D1D9">(style.width.</span><span style="color: #D2A8FF">slice</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">, </span><span style="color: #FF7B72">-</span><span style="color: #79C0FF">2</span><span style="color: #C9D1D9">)))</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">height</span><span style="color: #C9D1D9">(</span><span style="color: #D2A8FF">Number</span><span style="color: #C9D1D9">(style.height.</span><span style="color: #D2A8FF">slice</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">, </span><span style="color: #FF7B72">-</span><span style="color: #79C0FF">2</span><span style="color: #C9D1D9">)))</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">showNavInfo</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">linkColor</span><span style="color: #C9D1D9">(() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> lineColor)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">backgroundColor</span><span style="color: #C9D1D9">(bgColor)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">nodeThreeObject</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">node</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">color</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> node.color </span><span style="color: #FF7B72">??</span><span style="color: #C9D1D9"> nodeColor;</span></span>
<span class="line"><span style="color: #C9D1D9">      node.color </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> color;</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    })</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">nodeThreeObjectExtend</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">)</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">onNodeHover</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">node</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">prev</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (node) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">graphNode</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> context.data.nodes.</span><span style="color: #D2A8FF">find</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">n</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> n.id </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> node.id);</span></span>
<span class="line"><span style="color: #C9D1D9">        context.</span><span style="color: #D2A8FF">onHover</span><span style="color: #C9D1D9">(graphNode);</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (prev) {</span></span>
<span class="line"><span style="color: #C9D1D9">        context.</span><span style="color: #D2A8FF">onHover</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">undefined</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    })</span></span>
<span class="line"><span style="color: #C9D1D9">    .</span><span style="color: #D2A8FF">cooldownTicks</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">100</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<p>We are almost doing the same thing as the 2D renderer but creating it with <a href="https://threejs.org">Three.js</a> instead.</p>
<h2 id="-10"><a aria-hidden="true" tabindex="-1" href="#-10"><span class="icon icon-link"></span></a>Rendering</h2>
<p>Now open up <code>src/lit-force-graph.ts</code> and the imports for the renderers and graph/context classes we created:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #8B949E">// ...</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { Renderer } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./classes/context"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { GraphData, GraphNode } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./classes/graph"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { render </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> render2D } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./modes/mode-2d"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { render </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> render3D } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./modes/mode-3d"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #8B949E">// ...</span></span></code></pre>
<p>Now add the property for the graph data and the renderers in the class:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">({ type: Object }) data</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> GraphData;</span></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">state</span><span style="color: #C9D1D9">() hovered</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> GraphNode;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  renderers </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Map</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">Renderer</span><span style="color: #C9D1D9">>([</span></span>
<span class="line"><span style="color: #C9D1D9">    [</span><span style="color: #A5D6FF">"2D"</span><span style="color: #C9D1D9">, render2D],</span></span>
<span class="line"><span style="color: #C9D1D9">    [</span><span style="color: #A5D6FF">"3D"</span><span style="color: #C9D1D9">, render3D],</span></span>
<span class="line"><span style="color: #C9D1D9">  ]);</span></span></code></pre>
<p>Update <code>setData</code> to render with the current renderer:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(data: GraphData) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> data;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">renderer</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.renderers.</span><span style="color: #D2A8FF">get</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.mode);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">renderer</span><span style="color: #C9D1D9">?.({</span></span>
<span class="line"><span style="color: #C9D1D9">        element: </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.graph,</span></span>
<span class="line"><span style="color: #C9D1D9">        data,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #D2A8FF">onHover</span><span style="color: #C9D1D9">: (</span><span style="color: #FFA657">node</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.hovered </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> node),</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>And finally update the render method to show the graph title and currently hovered node:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #D2A8FF">render</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">` &#x3C;main</span></span>
<span class="line"><span style="color: #A5D6FF">      accept="application/json"</span></span>
<span class="line"><span style="color: #A5D6FF">      @drop="${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">onDrop</span><span style="color: #A5D6FF">}"</span></span>
<span class="line"><span style="color: #A5D6FF">      @dragover="${</span><span style="color: #A5D6FF">(</span><span style="color: #79C0FF">e</span><span style="color: #FF7B72">:</span><span style="color: #A5D6FF"> </span><span style="color: #FFA657">Event</span><span style="color: #A5D6FF">) </span><span style="color: #FF7B72">=></span><span style="color: #A5D6FF"> </span><span style="color: #C9D1D9">e</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">preventDefault</span><span style="color: #A5D6FF">()</span><span style="color: #A5D6FF">}"</span></span>
<span class="line"><span style="color: #A5D6FF">    ></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="graph">&#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="controls"></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;div></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;label for="render-mode">Render mode&#x3C;/label></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;select id="render-mode" @change=${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">onChangeMode</span><span style="color: #A5D6FF">}></span></span>
<span class="line"><span style="color: #A5D6FF">            ${</span><span style="color: #C9D1D9">Array</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">from</span><span style="color: #A5D6FF">(</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">renderers</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">keys</span><span style="color: #A5D6FF">()).</span><span style="color: #D2A8FF">map</span><span style="color: #A5D6FF">((</span><span style="color: #79C0FF">mode</span><span style="color: #A5D6FF">) </span><span style="color: #FF7B72">=></span><span style="color: #A5D6FF"> </span><span style="color: #C9D1D9">{</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">` &#x3C;option value="${</span><span style="color: #C9D1D9">mode</span><span style="color: #A5D6FF">}">${</span><span style="color: #C9D1D9">mode</span><span style="color: #A5D6FF">}&#x3C;/option> `</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">            }</span><span style="color: #A5D6FF">)</span><span style="color: #A5D6FF">}</span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;/select></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="info"></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;h2 id="graph-name">${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">data</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">name</span><span style="color: #A5D6FF">}&#x3C;/h2></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;div id="graph-description">${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">data</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">description</span><span style="color: #A5D6FF">}&#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="tooltips"></span></span>
<span class="line"><span style="color: #A5D6FF">        ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">hovered</span></span>
<span class="line"><span style="color: #A5D6FF">          </span><span style="color: #FF7B72">?</span><span style="color: #A5D6FF"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">` &#x3C;div class="node-tooltip"></span></span>
<span class="line"><span style="color: #A5D6FF">              ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">hovered</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">name</span><span style="color: #A5D6FF"> </span><span style="color: #FF7B72">??</span><span style="color: #A5D6FF"> </span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">hovered</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">id</span><span style="color: #A5D6FF">}</span></span>
<span class="line"><span style="color: #A5D6FF">            &#x3C;/div>`</span></span>
<span class="line"><span style="color: #A5D6FF">          </span><span style="color: #FF7B72">:</span><span style="color: #A5D6FF"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">``}</span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;/main>`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<h2 id="-11"><a aria-hidden="true" tabindex="-1" href="#-11"><span class="icon icon-link"></span></a>Final Code</h2>
<p>If everything was added correctly it should look like this:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { html, css, LitElement } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { customElement, property, query, state } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit/decorators.js"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { Renderer } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./classes/context"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { GraphData, GraphNode } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./classes/graph"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { render </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> render2D } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./modes/mode-2d"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { render </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> render3D } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"./modes/mode-3d"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">tagName</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit-force-graph"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">customElement</span><span style="color: #C9D1D9">(tagName)</span></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">LitForceGraph</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">LitElement</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">static</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">styles</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">css</span><span style="color: #A5D6FF">`</span></span>
<span class="line"><span style="color: #A5D6FF">    :host {</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: var(--graph-background-color, #000011);</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--graph-foreground-color, #ffffff);</span></span>
<span class="line"><span style="color: #A5D6FF">      width: var(--graph-width, 100%);</span></span>
<span class="line"><span style="color: #A5D6FF">      height: var(--graph-height, 100vh);</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #graph {</span></span>
<span class="line"><span style="color: #A5D6FF">      width: 100%;</span></span>
<span class="line"><span style="color: #A5D6FF">      height: 100%;</span></span>
<span class="line"><span style="color: #A5D6FF">      width: var(--graph-width, 100%);</span></span>
<span class="line"><span style="color: #A5D6FF">      height: var(--graph-height, 100vh);</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #controls {</span></span>
<span class="line"><span style="color: #A5D6FF">      position: absolute;</span></span>
<span class="line"><span style="color: #A5D6FF">      top: 20px;</span></span>
<span class="line"><span style="color: #A5D6FF">      right: 20px;</span></span>
<span class="line"><span style="color: #A5D6FF">      z-index: 100 !important;</span></span>
<span class="line"><span style="color: #A5D6FF">      display: flex;</span></span>
<span class="line"><span style="color: #A5D6FF">      flex-direction: column;</span></span>
<span class="line"><span style="color: #A5D6FF">      align-items: flex-end;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"><span style="color: #A5D6FF">    #controls div {</span></span>
<span class="line"><span style="color: #A5D6FF">      padding: 5px;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #info {</span></span>
<span class="line"><span style="color: #A5D6FF">      position: absolute;</span></span>
<span class="line"><span style="color: #A5D6FF">      top: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      left: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      z-index: 100 !important;</span></span>
<span class="line"><span style="color: #A5D6FF">      display: flex;</span></span>
<span class="line"><span style="color: #A5D6FF">      flex-direction: column;</span></span>
<span class="line"><span style="color: #A5D6FF">      align-items: flex-start;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #tooltips {</span></span>
<span class="line"><span style="color: #A5D6FF">      position: absolute;</span></span>
<span class="line"><span style="color: #A5D6FF">      bottom: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      left: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      right: 10px;</span></span>
<span class="line"><span style="color: #A5D6FF">      display: flex;</span></span>
<span class="line"><span style="color: #A5D6FF">      flex-direction: row;</span></span>
<span class="line"><span style="color: #A5D6FF">      align-items: center;</span></span>
<span class="line"><span style="color: #A5D6FF">      text-align: center;</span></span>
<span class="line"><span style="color: #A5D6FF">      justify-content: center;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .node-tooltip {</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: var(--graph-foreground-color, #ffffff);</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--graph-background-color, #000011);</span></span>
<span class="line"><span style="color: #A5D6FF">      border-radius: 5px;</span></span>
<span class="line"><span style="color: #A5D6FF">      font-size: 12px;</span></span>
<span class="line"><span style="color: #A5D6FF">      padding: 5px;</span></span>
<span class="line"><span style="color: #A5D6FF">      opacity: 0.67;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    #graph-description {</span></span>
<span class="line"><span style="color: #A5D6FF">      opacity: 0.67;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A5D6FF">    .scene-tooltip {</span></span>
<span class="line"><span style="color: #A5D6FF">      color: var(--graph-foreground-color, #ffffff);</span></span>
<span class="line"><span style="color: #A5D6FF">      background-color: transparent;</span></span>
<span class="line"><span style="color: #A5D6FF">      display: none;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"><span style="color: #A5D6FF">  `</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">query</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"#graph"</span><span style="color: #C9D1D9">) </span><span style="color: #FFA657">graph</span><span style="color: #FF7B72">!:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLElement</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">() </span><span style="color: #FFA657">src</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">""</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">() </span><span style="color: #FFA657">mode</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"2D"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">({ type: Object }) </span><span style="color: #FFA657">data</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphData</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">state</span><span style="color: #C9D1D9">() </span><span style="color: #FFA657">hovered</span><span style="color: #FF7B72">?:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphNode</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">renderers</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Map</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">Renderer</span><span style="color: #C9D1D9">>([</span></span>
<span class="line"><span style="color: #C9D1D9">    [</span><span style="color: #A5D6FF">"2D"</span><span style="color: #C9D1D9">, render2D],</span></span>
<span class="line"><span style="color: #C9D1D9">    [</span><span style="color: #A5D6FF">"3D"</span><span style="color: #C9D1D9">, render3D],</span></span>
<span class="line"><span style="color: #C9D1D9">  ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">render</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">` &#x3C;main</span></span>
<span class="line"><span style="color: #A5D6FF">      accept="application/json"</span></span>
<span class="line"><span style="color: #A5D6FF">      @drop="${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">onDrop</span><span style="color: #A5D6FF">}"</span></span>
<span class="line"><span style="color: #A5D6FF">      @dragover="${</span><span style="color: #A5D6FF">(</span><span style="color: #79C0FF">e</span><span style="color: #FF7B72">:</span><span style="color: #A5D6FF"> </span><span style="color: #FFA657">Event</span><span style="color: #A5D6FF">) </span><span style="color: #FF7B72">=></span><span style="color: #A5D6FF"> </span><span style="color: #C9D1D9">e</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">preventDefault</span><span style="color: #A5D6FF">()</span><span style="color: #A5D6FF">}"</span></span>
<span class="line"><span style="color: #A5D6FF">    ></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="graph">&#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="controls"></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;div></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;label for="render-mode">Render mode&#x3C;/label></span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;select id="render-mode" @change=${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">onChangeMode</span><span style="color: #A5D6FF">}></span></span>
<span class="line"><span style="color: #A5D6FF">            ${</span><span style="color: #C9D1D9">Array</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">from</span><span style="color: #A5D6FF">(</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">renderers</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">keys</span><span style="color: #A5D6FF">()).</span><span style="color: #D2A8FF">map</span><span style="color: #A5D6FF">((</span><span style="color: #79C0FF">mode</span><span style="color: #A5D6FF">) </span><span style="color: #FF7B72">=></span><span style="color: #A5D6FF"> </span><span style="color: #C9D1D9">{</span></span>
<span class="line"><span style="color: #C9D1D9">              </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">` &#x3C;option value="${</span><span style="color: #C9D1D9">mode</span><span style="color: #A5D6FF">}">${</span><span style="color: #C9D1D9">mode</span><span style="color: #A5D6FF">}&#x3C;/option> `</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">            }</span><span style="color: #A5D6FF">)</span><span style="color: #A5D6FF">}</span></span>
<span class="line"><span style="color: #A5D6FF">          &#x3C;/select></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="info"></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;h2 id="graph-name">${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">data</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">name</span><span style="color: #A5D6FF">}&#x3C;/h2></span></span>
<span class="line"><span style="color: #A5D6FF">        &#x3C;div id="graph-description">${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">data</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">description</span><span style="color: #A5D6FF">}&#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;div id="tooltips"></span></span>
<span class="line"><span style="color: #A5D6FF">        ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">hovered</span></span>
<span class="line"><span style="color: #A5D6FF">          </span><span style="color: #FF7B72">?</span><span style="color: #A5D6FF"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">` &#x3C;div class="node-tooltip"></span></span>
<span class="line"><span style="color: #A5D6FF">              ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">hovered</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">name</span><span style="color: #A5D6FF"> </span><span style="color: #FF7B72">??</span><span style="color: #A5D6FF"> </span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">hovered</span><span style="color: #A5D6FF">?.</span><span style="color: #C9D1D9">id</span><span style="color: #A5D6FF">}</span></span>
<span class="line"><span style="color: #A5D6FF">            &#x3C;/div>`</span></span>
<span class="line"><span style="color: #A5D6FF">          </span><span style="color: #FF7B72">:</span><span style="color: #A5D6FF"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">``}</span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;/div></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;/main>`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">firstUpdated</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">refresh</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">prefersDark</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> window.</span><span style="color: #D2A8FF">matchMedia</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"(prefers-color-scheme: dark)"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    prefersDark.</span><span style="color: #D2A8FF">addEventListener</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"change"</span><span style="color: #C9D1D9">, () </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">refresh</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #8B949E">/**</span></span>
<span class="line"><span style="color: #8B949E">   * Set the graph data and update the renderer</span></span>
<span class="line"><span style="color: #8B949E">   *</span></span>
<span class="line"><span style="color: #8B949E">   * </span><span style="color: #FF7B72">@param</span><span style="color: #8B949E"> </span><span style="color: #C9D1D9">data</span><span style="color: #8B949E"> Graph JSON</span></span>
<span class="line"><span style="color: #8B949E">   */</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">data</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">GraphData</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> data;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">renderer</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.renderers.</span><span style="color: #D2A8FF">get</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.mode);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">renderer</span><span style="color: #C9D1D9">?.({</span></span>
<span class="line"><span style="color: #C9D1D9">      element: </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.graph,</span></span>
<span class="line"><span style="color: #C9D1D9">      data,</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">onHover</span><span style="color: #C9D1D9">: (</span><span style="color: #FFA657">node</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.hovered </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> node),</span></span>
<span class="line"><span style="color: #C9D1D9">    });</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">refresh</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #8B949E">// Get json from script tag</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">children</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> Array.</span><span style="color: #D2A8FF">from</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.children);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">elem</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> children.</span><span style="color: #D2A8FF">find</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">child</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> child.tagName </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"SCRIPT"</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (elem) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #8B949E">// Render from script tag contents</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (elem.textContent) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">data</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">JSON</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">parse</span><span style="color: #C9D1D9">(elem.textContent);</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (data) </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(data);</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #8B949E">// Render from script tag src</span></span>
<span class="line"><span style="color: #C9D1D9">      } </span><span style="color: #FF7B72">else</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (elem.</span><span style="color: #D2A8FF">hasAttribute</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"src"</span><span style="color: #C9D1D9">)) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">url</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> elem.</span><span style="color: #D2A8FF">getAttribute</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"src"</span><span style="color: #C9D1D9">)</span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">data</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">fetch</span><span style="color: #C9D1D9">(url).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">res</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> res.</span><span style="color: #D2A8FF">json</span><span style="color: #C9D1D9">());</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (data) </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(data);</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    } </span><span style="color: #FF7B72">else</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.src.</span><span style="color: #79C0FF">length</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #8B949E">// Render from src attribute</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">data</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">fetch</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.src).</span><span style="color: #D2A8FF">then</span><span style="color: #C9D1D9">((</span><span style="color: #FFA657">res</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> res.</span><span style="color: #D2A8FF">json</span><span style="color: #C9D1D9">());</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (data) </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(data);</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">onChangeMode</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">e</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Event</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">mode</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> (e.target </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLSelectElement</span><span style="color: #C9D1D9">).value;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.mode </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> mode;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">!</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data) </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">({ </span><span style="color: #FF7B72">...</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data</span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9"> });</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">onDrop</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">e</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">DragEvent</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    e.</span><span style="color: #D2A8FF">preventDefault</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">files</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> e.dataTransfer?.files;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (files </span><span style="color: #FF7B72">&#x26;&#x26;</span><span style="color: #C9D1D9"> files.</span><span style="color: #79C0FF">length</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">file</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> files[</span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">];</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">reader</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">FileReader</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">      reader.</span><span style="color: #D2A8FF">onload</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> () </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">json</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">JSON</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">parse</span><span style="color: #C9D1D9">(reader.result </span><span style="color: #FF7B72">as</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> json;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(json);</span></span>
<span class="line"><span style="color: #C9D1D9">      };</span></span>
<span class="line"><span style="color: #C9D1D9">      reader.</span><span style="color: #D2A8FF">readAsText</span><span style="color: #C9D1D9">(file);</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">attributeChangedCallback</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">name</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">_old</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FFA657">value</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span></span>
<span class="line"><span style="color: #C9D1D9">  )</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">void</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (name </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"src"</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x26;&#x26;</span><span style="color: #C9D1D9"> value) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">refresh</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (name </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"data"</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x26;&#x26;</span><span style="color: #C9D1D9"> value) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">JSON</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">parse</span><span style="color: #C9D1D9">(value));</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (name </span><span style="color: #FF7B72">===</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"mode"</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x26;&#x26;</span><span style="color: #C9D1D9"> value) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.mode </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> value;</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">setData</span><span style="color: #C9D1D9">({ </span><span style="color: #FF7B72">...</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.data</span><span style="color: #FF7B72">!</span><span style="color: #C9D1D9"> });</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">attributeChangedCallback</span><span style="color: #C9D1D9">(name, _old, value);</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">declare</span><span style="color: #C9D1D9"> global {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">interface</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">HTMLElementTagNameMap</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">"lit-force-graph"</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">LitForceGraph</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<p>2D Light:</p>
<p><img src="/attachments/force-graph_2d-light.png" alt=""></p>
<p>2D dark:</p>
<p><img src="/attachments/force-graph_2d-dark.png" alt=""></p>
<p>3D Light:</p>
<p><img src="/attachments/force-graph_3d-light.png" alt=""></p>
<p>3D dark:</p>
<p><img src="/attachments/force-graph_3d-dark.png" alt=""></p>
<h2 id="-12"><a aria-hidden="true" tabindex="-1" href="#-12"><span class="icon icon-link"></span></a>Conclusion</h2>
<p>Now you can render the complex data structures with ease using web components!</p>
<p>If you want to learn more about building with Lit you can read the docs <a href="https://lit.dev">here</a>.</p>
<p>The source for this example can be found <a href="https://github.com/rodydavis/lit-force-graph">here</a>.</p>
    </article>
    <aside class="astro-BVZIHDZO">
      <nav class="astro-XVRFUPWN">
  <h2 class="astro-XVRFUPWN">Table of Contents</h2>
  <ul class="astro-XVRFUPWN">
    <li class="astro-XVRFUPWN">
          <a href="#" class="heading-depth-2 astro-XVRFUPWN">
            Prerequisites
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-1" class="heading-depth-2 astro-XVRFUPWN">
            Getting Started
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-2" class="heading-depth-2 astro-XVRFUPWN">
            Template
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-3" class="heading-depth-2 astro-XVRFUPWN">
            Styles
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-4" class="heading-depth-2 astro-XVRFUPWN">
            Web Component
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-5" class="heading-depth-3 astro-XVRFUPWN">
            Inline
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-6" class="heading-depth-3 astro-XVRFUPWN">
            Lazy Loading
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-7" class="heading-depth-2 astro-XVRFUPWN">
            Graph Data
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-8" class="heading-depth-2 astro-XVRFUPWN">
            2D Renderer
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-9" class="heading-depth-2 astro-XVRFUPWN">
            3D Renderer
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-10" class="heading-depth-2 astro-XVRFUPWN">
            Rendering
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-11" class="heading-depth-2 astro-XVRFUPWN">
            Final Code
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-12" class="heading-depth-2 astro-XVRFUPWN">
            Conclusion
          </a>
        </li>
  </ul>
</nav>
    </aside>
  </main>
    </main>
    <footer class="astro-SZ7XMLTE">
  <div class="links astro-AUSHCPD5">
  <a class="social-icon astro-AUSHCPD5" href="https://github.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/github.svg" alt="github" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://twitter.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/twitter.svg" alt="twitter" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://facebook.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/facebook.svg" alt="facebook" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://instagram.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/instagram.svg" alt="instagram" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://youtube.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/youtube.svg" alt="youtube" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://tiktok.com/@rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/tiktok.svg" alt="tiktok" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://linkedin.com/in/rodydavis" target="_blank" rel="noopener">
            <img src="/social/linkedin.svg" alt="linkedin" class="astro-AUSHCPD5">
          </a>
</div>

  <div class="copyright astro-SZ7XMLTE">
    &copy; 2023
    Rody Davis. All rights reserved.
  </div>
</footer>
  </body></html>