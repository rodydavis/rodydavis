<!DOCTYPE html>
<html lang="en" class="astro-MDYSN4OI">
  <head>
    <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta name="generator" content="Astro v2.0.4">

<!-- Canonical URL -->
<link rel="canonical" href="https://rodydavis.com/posts/flutter-and-lit/">

<!-- Primary Meta Tags -->
<title>Lit and Flutter</title>
<meta name="title" content="Lit and Flutter">
<meta name="description">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://rodydavis.com/posts/flutter-and-lit/">
<meta property="og:title" content="Lit and Flutter">
<meta property="og:description">
<meta property="og:image" content="https://rodydavis.com/placeholder-social.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://rodydavis.com/posts/flutter-and-lit/">
<meta property="twitter:title" content="Lit and Flutter">
<meta property="twitter:description">
<meta property="twitter:image" content="https://rodydavis.com/placeholder-social.jpg">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JQNPVBL9DR"></script>

    
  <link rel="stylesheet" href="/_astro/_...slug_.f65ef62a.css" />
<link rel="stylesheet" href="/_astro/_...slug_.7a06253d.css" /><script type="module">window.dataLayer=window.dataLayer||[];function a(){dataLayer.push(arguments)}a("js",new Date);a("config","G-JQNPVBL9DR");
</script></head>

  <body class="markdown-body astro-MDYSN4OI">
    <header class="astro-3EF6KSR2">
  <h2 class="astro-3EF6KSR2">
    <a href="/" class="astro-3EF6KSR2">Rody Davis</a>
  </h2>
  <nav class="astro-3EF6KSR2">
    <a href="/search?tags=app" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Apps</div>
</a><a href="/search?tags=posts" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Blog</div>
</a><a href="/talks" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> Talks</div>
</a><a href="/about" class="astro-3EF6KSR2 astro-EIMMU3LG" style="display:flex;flex-direction:row;align-items:center">
  
  <div class="astro-EIMMU3LG"> About</div>
</a>
  </nav>
</header>
    <main class="astro-MDYSN4OI">
      <style>
	@media (min-width: 860px) {
		main {
			display: flex;
			flex-direction: row;
			justify-content: space-between;
		}
		article {
			flex: 1;
		}
		aside {
			display: block;
			position: sticky;
			top: 0;
			right: 0;
			max-height: 100vh;
			overflow-y: auto;
		}
	}
	</style><main class="astro-BVZIHDZO">
    <article class="astro-BVZIHDZO">
      
      <h1 class="title astro-BVZIHDZO">Lit and Flutter</h1>
      
      
      <hr class="astro-BVZIHDZO">
      <p>In this article I will go over how to set up a <a href="https://lit.dev">Lit</a> web component and use it inline in the Flutter widget tree.</p>
<blockquote>
<p><strong>TLDR</strong> You can find the final source <a href="https://github.com/rodydavis/flutter_hybrid_template">here</a>.</p>
</blockquote>
<p>The reason you would want this integration is so you can take an existing web app, or just a single part of it and embed it in the widget tree.</p>
<p>With it wrapped in Flutter you can call device APIs from event listeners on your web component.</p>
<p>For example you may have an app that handles purchases, and now you can call the in app purchase API or other device specific features not available on the web.</p>
<p>You also get a cross platform app that can be delivered to both Google Play and the App Store.</p>
<p>The web component will receive new code each time you update your site, so you do not have to ship an update each time the web component changes.</p>
<h2 id=""><a aria-hidden="true" tabindex="-1" href="#"><span class="icon icon-link"></span></a>Prerequisites</h2>
<ul>
<li>Flutter SDK</li>
<li>Xcode and Command Line Tools</li>
<li>Android SDK</li>
<li>Vscode</li>
<li>Node</li>
<li>Typescript</li>
</ul>
<h2 id="-1"><a aria-hidden="true" tabindex="-1" href="#-1"><span class="icon icon-link"></span></a>Getting Started</h2>
<p>We can start off by creating a empty directory and naming it with <code>snake_case</code> whatever we want.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">mkdir flutter_lit_example</span></span>
<span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> flutter_lit_example</span></span></code></pre>
<h3 id="-2"><a aria-hidden="true" tabindex="-1" href="#-2"><span class="icon icon-link"></span></a>Web Setup</h3>
<p>Now we are in the <code>flutter_lit_example</code> directory and can setup Flutter and Lit. Letâ€™s start with node.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">npm init -y</span></span>
<span class="line"><span style="color: #C9D1D9">npm i lit</span></span>
<span class="line"><span style="color: #C9D1D9">npm i -D typescript vite @types/node</span></span></code></pre>
<p>This will setup the basics for a node project and install the packages we need. Now lets add some config files.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">touch tsconfig.json</span></span>
<span class="line"><span style="color: #C9D1D9">touch vite.config.ts</span></span></code></pre>
<p>This will create 2 files. Now open up <code>tsconfig.json</code> and paste the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">{</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">"compilerOptions"</span><span style="color: #C9D1D9">: {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"module"</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">"esnext"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"lib"</span><span style="color: #C9D1D9">: [</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #A5D6FF">"es2017"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #A5D6FF">"dom"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #A5D6FF">"dom.iterable"</span></span>
<span class="line"><span style="color: #C9D1D9">    ],</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"types"</span><span style="color: #C9D1D9">: [</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #A5D6FF">"vite/client"</span></span>
<span class="line"><span style="color: #C9D1D9">    ],</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"declaration"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"emitDeclarationOnly"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"outDir"</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">"./types"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"rootDir"</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">"./src"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"strict"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"noUnusedLocals"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"noUnusedParameters"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"noImplicitReturns"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"noFallthroughCasesInSwitch"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"moduleResolution"</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">"node"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"allowSyntheticDefaultImports"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"experimentalDecorators"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">"forceConsistentCasingInFileNames"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span></span>
<span class="line"><span style="color: #C9D1D9">  },</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">"include"</span><span style="color: #C9D1D9">: [</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #A5D6FF">"src/**/*.ts"</span></span>
<span class="line"><span style="color: #C9D1D9">  ],</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">"exclude"</span><span style="color: #C9D1D9">: []</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>This is a basic typescript config. Now open up <code>vite.config.ts</code> and paste the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { defineConfig } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"vite"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { resolve } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"path"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E">// https://vitejs.dev/config/</span></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #FFA657"> </span><span style="color: #FF7B72">default</span><span style="color: #FFA657"> </span><span style="color: #D2A8FF">defineConfig</span><span style="color: #FFA657">({</span></span>
<span class="line"><span style="color: #FFA657">  </span><span style="color: #C9D1D9">base: </span><span style="color: #A5D6FF">"/flutter_lit_example/"</span><span style="color: #FFA657">, </span><span style="color: #8B949E">// TODO: Name of your github repo</span></span>
<span class="line"><span style="color: #FFA657">  </span><span style="color: #C9D1D9">build: {</span></span>
<span class="line"><span style="color: #C9D1D9">    outDir: </span><span style="color: #A5D6FF">"build/web"</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    rollupOptions: {</span></span>
<span class="line"><span style="color: #C9D1D9">      output: {</span></span>
<span class="line"><span style="color: #C9D1D9">        entryFileNames: </span><span style="color: #A5D6FF">`assets/[name].js`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        chunkFileNames: </span><span style="color: #A5D6FF">`assets/[name].js`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        assetFileNames: </span><span style="color: #A5D6FF">`assets/[name].[ext]`</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      },</span></span>
<span class="line"><span style="color: #C9D1D9">      input: {</span></span>
<span class="line"><span style="color: #C9D1D9">        main: </span><span style="color: #D2A8FF">resolve</span><span style="color: #C9D1D9">(__dirname, </span><span style="color: #A5D6FF">"index.html"</span><span style="color: #C9D1D9">),</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #8B949E">// TODO: Create a new module for each component you want to embed</span></span>
<span class="line"><span style="color: #C9D1D9">      },</span></span>
<span class="line"><span style="color: #C9D1D9">    },</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span><span style="color: #FFA657">,</span></span>
<span class="line"><span style="color: #FFA657">})</span><span style="color: #C9D1D9">;</span></span></code></pre>
<p>Now we need to create our web component:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">mkdir src</span></span>
<span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> src</span></span>
<span class="line"><span style="color: #C9D1D9">touch my-app.ts</span></span>
<span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> ..</span></span></code></pre>
<p>Open <code>my-app.ts</code> and paste the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { html, css, LitElement } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { customElement, property } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"lit/decorators.js"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">customElement</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"my-app"</span><span style="color: #C9D1D9">)</span></span>
<span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">LitElement</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">static</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">styles</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">css</span><span style="color: #A5D6FF">`</span></span>
<span class="line"><span style="color: #A5D6FF">    p {</span></span>
<span class="line"><span style="color: #A5D6FF">      color: blue;</span></span>
<span class="line"><span style="color: #A5D6FF">    }</span></span>
<span class="line"><span style="color: #A5D6FF">  `</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  @</span><span style="color: #D2A8FF">property</span><span style="color: #C9D1D9">()</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FFA657">name</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"Somebody"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">render</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">html</span><span style="color: #A5D6FF">`&#x3C;div></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;p>Hello, ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">name</span><span style="color: #A5D6FF">}!&#x3C;/p></span></span>
<span class="line"><span style="color: #A5D6FF">      &#x3C;slot>&#x3C;/slot></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;/div>`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>We need to create a <code>index.html</code> for our web app.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">touch index.html</span></span></code></pre>
<p>Open <code>index.html</code> and paste the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">&#x3C;!</span><span style="color: #7EE787">DOCTYPE</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">html</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;</span><span style="color: #7EE787">html</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">lang</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"en"</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;</span><span style="color: #7EE787">head</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">meta</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">charset</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"UTF-8"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">meta</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">http-equiv</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"X-UA-Compatible"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">content</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"IE=edge"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">meta</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">name</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"viewport"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">content</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"width=device-width, initial-scale=1.0"</span><span style="color: #C9D1D9"> /></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">title</span><span style="color: #C9D1D9">>Example&#x3C;/</span><span style="color: #7EE787">title</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">type</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"module"</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">src</span><span style="color: #C9D1D9">=</span><span style="color: #A5D6FF">"/src/my-app.ts"</span><span style="color: #C9D1D9">>&#x3C;/</span><span style="color: #7EE787">script</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">style</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #7EE787">body</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">padding</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">margin</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">0</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #7EE787">my-app</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">width</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">100</span><span style="color: #FF7B72">%</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #79C0FF">height</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">100</span><span style="color: #FF7B72">vh</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">      }</span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;/</span><span style="color: #7EE787">style</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;/</span><span style="color: #7EE787">head</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;</span><span style="color: #7EE787">body</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">    &#x3C;</span><span style="color: #7EE787">my-app</span><span style="color: #C9D1D9">>&#x3C;/</span><span style="color: #7EE787">my-app</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">  &#x3C;/</span><span style="color: #7EE787">body</span><span style="color: #C9D1D9">></span></span>
<span class="line"><span style="color: #C9D1D9">&#x3C;/</span><span style="color: #7EE787">html</span><span style="color: #C9D1D9">></span></span></code></pre>
<h3 id="-3"><a aria-hidden="true" tabindex="-1" href="#-3"><span class="icon icon-link"></span></a>Flutter Setup</h3>
<p>Now that we have the basics setup for web we can move on to flutter. Letâ€™s create the project with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">flutter create --platforms=ios,android </span><span style="color: #79C0FF">.</span></span>
<span class="line"><span style="color: #C9D1D9">flutter packages get</span></span></code></pre>
<p>Open up <code>pubspec.yaml</code> and update it with the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #7EE787">name</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">flutter_lit_example</span></span>
<span class="line"><span style="color: #7EE787">description</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">A hybrid Flutter app.</span></span>
<span class="line"><span style="color: #7EE787">publish_to</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">"none"</span></span>
<span class="line"><span style="color: #7EE787">version</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">1.0.0+1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7EE787">environment</span><span style="color: #C9D1D9">:</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">sdk</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">">=2.7.0 &#x3C;3.0.0"</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7EE787">dependencies</span><span style="color: #C9D1D9">:</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">flutter</span><span style="color: #C9D1D9">:</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">sdk</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">flutter</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">flutter_inappwebview</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">^5.3.2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7EE787">dev_dependencies</span><span style="color: #C9D1D9">:</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">flutter_test</span><span style="color: #C9D1D9">:</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #7EE787">sdk</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">flutter</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7EE787">flutter</span><span style="color: #C9D1D9">:</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #7EE787">uses-material-design</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span></span></code></pre>
<p>Make sure to get the packages again:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">flutter packages get</span></span></code></pre>
<p>Now we need to create the file that will wrap the web component.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> lib</span></span>
<span class="line"><span style="color: #C9D1D9">touch web_component.dart</span></span>
<span class="line"><span style="color: #79C0FF">cd</span><span style="color: #C9D1D9"> ..</span></span></code></pre>
<p>Open <code>web_component.dart</code> and paste the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter_inappwebview/flutter_inappwebview.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">WebComponent</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">WebComponent</span><span style="color: #C9D1D9">({</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">Key</span><span style="color: #C9D1D9"> key,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">@required</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">@required</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.bundle,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.attributes </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> {},</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.slot </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">''</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.events </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> [],</span></span>
<span class="line"><span style="color: #C9D1D9">  }) </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">(key</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> key);</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9"> name, bundle;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Map</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9">> attributes;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9"> slot;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">List</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">EventCallback</span><span style="color: #C9D1D9">> events;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_WebComponentState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_WebComponentState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_WebComponentState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">WebComponent</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">InAppWebViewController</span><span style="color: #C9D1D9"> controller;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Map</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">List</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">EventCallback</span><span style="color: #C9D1D9">>> _events </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">get</span><span style="color: #C9D1D9"> source {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'''&#x3C;!DOCTYPE html></span></span>
<span class="line"><span style="color: #A5D6FF">&#x3C;html lang="en"></span></span>
<span class="line"><span style="color: #A5D6FF">  &#x3C;head></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;meta charset="UTF-8" /></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;meta http-equiv="X-UA-Compatible" content="IE=edge" /></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;meta name="viewport" content="width=device-width, initial-scale=1.0" /></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;style></span></span>
<span class="line"><span style="color: #A5D6FF">      body {</span></span>
<span class="line"><span style="color: #A5D6FF">        padding: 0;</span></span>
<span class="line"><span style="color: #A5D6FF">        margin: 0;</span></span>
<span class="line"><span style="color: #A5D6FF">      }</span></span>
<span class="line"><span style="color: #A5D6FF">      ${</span><span style="color: #79C0FF">widget</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">name</span><span style="color: #A5D6FF">} {</span></span>
<span class="line"><span style="color: #A5D6FF">        width: 100%;</span></span>
<span class="line"><span style="color: #A5D6FF">        height: 100vh;</span></span>
<span class="line"><span style="color: #A5D6FF">      }</span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;/style></span></span>
<span class="line"><span style="color: #A5D6FF">  &#x3C;script type="module" crossorigin src="${</span><span style="color: #79C0FF">widget</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">bundle</span><span style="color: #A5D6FF">}">&#x3C;/script></span></span>
<span class="line"><span style="color: #A5D6FF">&#x3C;/head></span></span>
<span class="line"><span style="color: #A5D6FF">  &#x3C;body></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;${</span><span style="color: #79C0FF">widget</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">name</span><span style="color: #A5D6FF">} ${</span><span style="color: #79C0FF">widget</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">attributes</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">entries</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">map</span><span style="color: #A5D6FF">((</span><span style="color: #79C0FF">e</span><span style="color: #A5D6FF">) => '${</span><span style="color: #79C0FF">e</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">key</span><span style="color: #A5D6FF">}="${</span><span style="color: #79C0FF">e</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">value</span><span style="color: #A5D6FF">}"').</span><span style="color: #D2A8FF">join</span><span style="color: #A5D6FF">(' ')}></span></span>
<span class="line"><span style="color: #A5D6FF">      ${</span><span style="color: #79C0FF">widget</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">slot</span><span style="color: #A5D6FF">}</span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;/${</span><span style="color: #79C0FF">widget</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">name</span><span style="color: #A5D6FF">}></span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;script></span></span>
<span class="line"><span style="color: #A5D6FF">    window.addEventListener("flutterInAppWebViewPlatformReady", (event) => {</span></span>
<span class="line"><span style="color: #A5D6FF">      ${</span><span style="color: #79C0FF">widget</span><span style="color: #A5D6FF">.</span><span style="color: #79C0FF">events</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">join</span><span style="color: #A5D6FF">('</span><span style="color: #79C0FF">\n</span><span style="color: #A5D6FF">')}</span></span>
<span class="line"><span style="color: #A5D6FF">    });</span></span>
<span class="line"><span style="color: #A5D6FF">    &#x3C;/script></span></span>
<span class="line"><span style="color: #A5D6FF">  &#x3C;/body></span></span>
<span class="line"><span style="color: #A5D6FF">&#x3C;/html> </span></span>
<span class="line"><span style="color: #A5D6FF">'''</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_setup</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">InAppWebViewController</span><span style="color: #C9D1D9"> controller) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.controller </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> controller;</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">_setupEvents</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_setupEvents</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">for</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> event </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> _events.keys) {</span></span>
<span class="line"><span style="color: #C9D1D9">      controller.</span><span style="color: #D2A8FF">removeJavaScriptHandler</span><span style="color: #C9D1D9">(handlerName</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> event);</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">for</span><span style="color: #C9D1D9"> (</span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> event </span><span style="color: #FF7B72">in</span><span style="color: #C9D1D9"> widget.events) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">_addEvent</span><span style="color: #C9D1D9">(event);</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_addEvent</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">EventCallback</span><span style="color: #C9D1D9"> event) {</span></span>
<span class="line"><span style="color: #C9D1D9">    controller.</span><span style="color: #D2A8FF">addJavaScriptHandler</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      handlerName</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> event.query,</span></span>
<span class="line"><span style="color: #C9D1D9">      callback</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> event.onPressed,</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">    _events[event.event] </span><span style="color: #FF7B72">??=</span><span style="color: #C9D1D9"> [];</span></span>
<span class="line"><span style="color: #C9D1D9">    _events[event.event].</span><span style="color: #D2A8FF">add</span><span style="color: #C9D1D9">(event);</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">didUpdateWidget</span><span style="color: #C9D1D9">(</span><span style="color: #FF7B72">covariant</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">WebComponent</span><span style="color: #C9D1D9"> oldWidget) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (oldWidget.events </span><span style="color: #FF7B72">!=</span><span style="color: #C9D1D9"> widget.events) {</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #D2A8FF">_setupEvents</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">if</span><span style="color: #C9D1D9"> (oldWidget.slot </span><span style="color: #FF7B72">!=</span><span style="color: #C9D1D9"> widget.slot </span><span style="color: #FF7B72">||</span></span>
<span class="line"><span style="color: #C9D1D9">        oldWidget.bundle </span><span style="color: #FF7B72">!=</span><span style="color: #C9D1D9"> widget.bundle </span><span style="color: #FF7B72">||</span></span>
<span class="line"><span style="color: #C9D1D9">        oldWidget.name </span><span style="color: #FF7B72">!=</span><span style="color: #C9D1D9"> widget.name) {</span></span>
<span class="line"><span style="color: #C9D1D9">      controller.</span><span style="color: #D2A8FF">loadData</span><span style="color: #C9D1D9">(data</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> source);</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">didUpdateWidget</span><span style="color: #C9D1D9">(oldWidget);</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">InAppWebView</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      initialData</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">InAppWebViewInitialData</span><span style="color: #C9D1D9">(data</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> source),</span></span>
<span class="line"><span style="color: #C9D1D9">      onWebViewCreated</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> _setup,</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">EventCallback</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">EventCallback</span><span style="color: #C9D1D9">({</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">@required</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.onPressed,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">@required</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.event,</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.query,</span></span>
<span class="line"><span style="color: #C9D1D9">  });</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9"> query, event;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">dynamic</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Function</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">List</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">dynamic</span><span style="color: #C9D1D9">> args) onPressed;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">toString</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> _source;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">get</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_prefix</span><span style="color: #C9D1D9"> => query </span><span style="color: #FF7B72">!=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">null</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">&#x26;&#x26;</span><span style="color: #C9D1D9"> query.isNotEmpty</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">?</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'document.querySelector("$</span><span style="color: #79C0FF">query</span><span style="color: #A5D6FF">")'</span></span>
<span class="line"><span style="color: #C9D1D9">      </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'document.body'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">get</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">_source</span><span style="color: #C9D1D9"> => [</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">'$</span><span style="color: #79C0FF">_prefix</span><span style="color: #A5D6FF">.addEventListener("$</span><span style="color: #79C0FF">event</span><span style="color: #A5D6FF">", (e) => {'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">'  window.flutter_inappwebview.callHandler("$</span><span style="color: #79C0FF">query</span><span style="color: #A5D6FF">", e);'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #A5D6FF">'}, false);'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      ].</span><span style="color: #D2A8FF">join</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">'</span><span style="color: #79C0FF">\n</span><span style="color: #A5D6FF">'</span><span style="color: #C9D1D9">);</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>Open <code>main.dart</code> and paste it with th following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'package:flutter/material.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'web_component.dart'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">WEBSITE_URL</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'https://rodydavis.github.io/flutter_lit_example/'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">BUNDLE_PATH</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'assets/main.js'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">void</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">main</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">WidgetsFlutterBinding</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">ensureInitialized</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">runApp</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9">());</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyApp</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatelessWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> title </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'Flutter Hybrid App'</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MaterialApp</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      debugShowCheckedModeBanner</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">false</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">      title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> title,</span></span>
<span class="line"><span style="color: #C9D1D9">      theme</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">ThemeData</span><span style="color: #C9D1D9">(primarySwatch</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Colors</span><span style="color: #C9D1D9">.blue),</span></span>
<span class="line"><span style="color: #C9D1D9">      home</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyHomePage</span><span style="color: #C9D1D9">(title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> title),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">MyHomePage</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">StatefulWidget</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">MyHomePage</span><span style="color: #C9D1D9">({</span><span style="color: #79C0FF">Key</span><span style="color: #C9D1D9"> key, </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.title}) </span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">super</span><span style="color: #C9D1D9">(key</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> key);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">final</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">String</span><span style="color: #C9D1D9"> title;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">_MyHomePageState</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createState</span><span style="color: #C9D1D9">() </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyHomePageState</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">_MyHomePageState</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">extends</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">State</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #79C0FF">MyHomePage</span><span style="color: #C9D1D9">> {</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">@override</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">Widget</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">build</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">BuildContext</span><span style="color: #C9D1D9"> context) {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Scaffold</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">      appBar</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">AppBar</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        title</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(widget.title),</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">      body</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Builder</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">        builder</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (context) </span><span style="color: #FF7B72">=></span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">WebComponent</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">          name</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'my-app'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">          bundle</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'$</span><span style="color: #79C0FF">WEBSITE_URL</span><span style="color: #A5D6FF">/$</span><span style="color: #79C0FF">BUNDLE_PATH</span><span style="color: #A5D6FF">'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">          attributes</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #A5D6FF">'name'</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> widget.title,</span></span>
<span class="line"><span style="color: #C9D1D9">          },</span></span>
<span class="line"><span style="color: #C9D1D9">          slot</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'&#x3C;button id="my-button">Talk back!&#x3C;/button>'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">          events</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> [</span></span>
<span class="line"><span style="color: #C9D1D9">            </span><span style="color: #79C0FF">EventCallback</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">              event</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'click'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">              query</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">'#my-button'</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">              onPressed</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> (_) {</span></span>
<span class="line"><span style="color: #C9D1D9">                </span><span style="color: #79C0FF">ScaffoldMessenger</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">of</span><span style="color: #C9D1D9">(context)</span></span>
<span class="line"><span style="color: #C9D1D9">                    .</span><span style="color: #D2A8FF">showSnackBar</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">SnackBar</span><span style="color: #C9D1D9">(content</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Text</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">'Clicked!'</span><span style="color: #C9D1D9">)));</span></span>
<span class="line"><span style="color: #C9D1D9">              },</span></span>
<span class="line"><span style="color: #C9D1D9">            ),</span></span>
<span class="line"><span style="color: #C9D1D9">          ],</span></span>
<span class="line"><span style="color: #C9D1D9">        ),</span></span>
<span class="line"><span style="color: #C9D1D9">      ),</span></span>
<span class="line"><span style="color: #C9D1D9">    );</span></span>
<span class="line"><span style="color: #C9D1D9">  }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span></code></pre>
<p>You will need to update <code>WEBSITE_URL</code> to have the url of the website where you will be deploying and <code>BUNDLE_URL</code> to the relative path to the js bundle.</p>
<p>This will ensure auto updates with a new version rolls out and the cache it stale. This will also allow for offline support after the first time it is downloaded.</p>
<h2 id="-4"><a aria-hidden="true" tabindex="-1" href="#-4"><span class="icon icon-link"></span></a>Running</h2>
<p>Now we can run our application but it requires a few steps to get it all setup.</p>
<p>To test and build our web app locally we will use <a href="https://github.com/vitejs/vite">vite</a> and render the <code>index.html</code></p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">npm i</span></span>
<span class="line"><span style="color: #C9D1D9">npm run dev</span></span></code></pre>
<p>You should see the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">vite v2.2.3 dev server running at:</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">Local:    http://localhost:3000/flutter_lit_example/</span></span>
<span class="line"><span style="color: #C9D1D9">Network:  http://192.168.1.143:3000/flutter_lit_example/</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">ready in 311ms.</span></span></code></pre>
<p>We can open the link <code>http://localhost:3000/flutter_lit_example/</code> to see our running web app and hot reload changes from <code>my-app.ts</code>.</p>
<p>If you want to learn more about Lit you can read the docs <a href="https://lit.dev">here</a>.</p>
<p>Once you are happy with how it looks we can move on to Flutter to wrap it in a native app. This will give us access to native code if we wanted to use the in app purchase api or push notifications.</p>
<p>Kill the terminal and run the following:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">flutter packages get</span></span>
<span class="line"><span style="color: #C9D1D9">flutter build ios</span></span>
<span class="line"><span style="color: #C9D1D9">flutter build appbundle</span></span>
<span class="line"><span style="color: #C9D1D9">flutter run</span></span></code></pre>
<p>This should select a running device or prompt you to select one. Now that it is running on the device you can see we have two way communication with the Flutter app and the web component.</p>
<h2 id="-5"><a aria-hidden="true" tabindex="-1" href="#-5"><span class="icon icon-link"></span></a>Conclusion</h2>
<p>If you want to find the source code you can check it out <a href="https://github.com/rodydavis/flutter_hybrid_template">here</a> otherwise thanks for reading and let me know if you have any questions!</p>
    </article>
    <aside class="astro-BVZIHDZO">
      <nav class="astro-XVRFUPWN">
  <h2 class="astro-XVRFUPWN">Table of Contents</h2>
  <ul class="astro-XVRFUPWN">
    <li class="astro-XVRFUPWN">
          <a href="#" class="heading-depth-2 astro-XVRFUPWN">
            Prerequisites
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-1" class="heading-depth-2 astro-XVRFUPWN">
            Getting Started
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-2" class="heading-depth-3 astro-XVRFUPWN">
            Web Setup
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-3" class="heading-depth-3 astro-XVRFUPWN">
            Flutter Setup
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-4" class="heading-depth-2 astro-XVRFUPWN">
            Running
          </a>
        </li><li class="astro-XVRFUPWN">
          <a href="#-5" class="heading-depth-2 astro-XVRFUPWN">
            Conclusion
          </a>
        </li>
  </ul>
</nav>
    </aside>
  </main>
    </main>
    <footer class="astro-SZ7XMLTE">
  <div class="links astro-AUSHCPD5">
  <a class="social-icon astro-AUSHCPD5" href="https://github.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/github.svg" alt="github" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://twitter.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/twitter.svg" alt="twitter" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://facebook.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/facebook.svg" alt="facebook" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://instagram.com/rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/instagram.svg" alt="instagram" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://youtube.com/rodydavis" target="_blank" rel="noopener">
            <img src="/social/youtube.svg" alt="youtube" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://tiktok.com/@rodydavisjr" target="_blank" rel="noopener">
            <img src="/social/tiktok.svg" alt="tiktok" class="astro-AUSHCPD5">
          </a><a class="social-icon astro-AUSHCPD5" href="https://linkedin.com/in/rodydavis" target="_blank" rel="noopener">
            <img src="/social/linkedin.svg" alt="linkedin" class="astro-AUSHCPD5">
          </a>
</div>

  <div class="copyright astro-SZ7XMLTE">
    &copy; 2023
    Rody Davis. All rights reserved.
  </div>
</footer>
  </body></html>