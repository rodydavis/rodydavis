<!DOCTYPE html><html domain=rodydavis.com ga-id=G-JQNPVBL9DR lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="/img/favicon/favicon-32x32.png?hash=3df5885280" rel=icon type=image/png><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>Lit and Flutter</title><meta content="Lit and Flutter" property=og:title><meta content="In this article I will go over how to set up a Lit web component and use it inline in the Flutter widget tree. TLDR You can find the final..." name=description><meta content="In this article I will go over how to set up a Lit web component and use it inline in the Flutter widget tree. TLDR You can find the final..." property=og:description><meta content=summary_large_image name=twitter:card><meta content=@rodydavis name=twitter:site><meta content=@rodydavis name=twitter:creator><meta content=https://rodydavis.com/img/remote/Z1D401D.jpeg property=og:image><link href=https://rodydavis.com/posts/flutter-and-lit/ rel=canonical><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate type=application/atom+xml title="Rody Davis"><link href=/ rel=preconnect crossorigin=""><script src="/js/min.js?hash=c372ec6a84" async defer></script><script src="/js/cached.js?hash=9030142fbb" async defer></script><script csp-hash="">if (/Mac OS X/.test(navigator.userAgent)) 
        document
          .documentElement
          .classList
          .add('apple')</script><script type=text/javascript>function getCode(repo, path, branch) {
        const url = `https://raw.githubusercontent.com/rodydavis/${repo}/${branch}/${path}`;
        return fetch(url).then((res) => res.text());
      }
      async function addFiles(tag, path, branch = "main") {
        const output = document.querySelector('#playground');
        output.removeAttribute('hidden');
        const codeEditor = document.createElement('playground-file-editor');
        const uiEditor = document.createElement('playground-file-editor');
        const preview = document.createElement('playground-preview');
        const ide = document.createElement('playground-project');
        ide.id = "project";
        function addScript(filename, source) {
          const elem = document.createElement('script');
          elem.setAttribute('type', `sample/${
            filename.split('.').pop()
          }`);
          elem.setAttribute('filename', filename);
          elem.innerHTML = source;
          ide.append(elem);
        }
        const name = path.split('.ts').join('.js');
        const ui = await getCode(tag, 'index.html', branch);
        addScript('index.html', ui.split(`/src/${path}`).join(`./${name}`));
        preview.setAttribute('project', ide.id);
        uiEditor.setAttribute('project', ide.id);
        uiEditor.setAttribute('filename', path);
        output.append(preview);
        const code = await getCode(tag, `src/${path}`, branch);
        addScript(path, code);
        codeEditor.setAttribute('line-numbers', '');
        codeEditor.setAttribute('project', ide.id);
        codeEditor.setAttribute('filename', path);
        output.append(codeEditor);
        output.append(ide);
      }</script><script src=https://unpkg.com/playground-elements@0.10.0/playground-project.js?module type=module></script><script src=https://unpkg.com/playground-elements@0.10.0/playground-file-editor.js?module type=module></script><script src=https://unpkg.com/playground-elements@0.10.0/playground-preview.js?module type=module></script><style>#playground {
        --playground-preview-width: 40%;
        --playground-tab-bar-background: var(--background);
        --playground-tab-bar-foreground-color: var(--on-background);
        --playground-border: var(--on-background);
        --playground-preview-toolbar-background: var(--background);
        --playground-preview-toolbar-foreground-color: var(--on-background);
        --playground-highlight-color: var(--primary);
        --playground-code-background: rgb(48, 65, 72);
        --playground-code-default-color: rgb(248, 248, 242);
        --playground-code-cursor-color: rgb(248, 248, 240);
        --playground-code-selection-background: rgba(101, 115, 126, 0.33);
        --playground-code-gutter-background: rgb(48, 65, 72);
        --playground-code-gutter-border-right: 0;
        --playground-code-linenumber-color: rgb(208, 208, 208);
        --playground-code-atom-color: rgb(197, 148, 197);
        --playground-code-attribute-color: rgb(197, 148, 197);
        --playground-code-builtin-color: rgb(102, 217, 239);
        --playground-code-comment-color: rgb(101, 115, 126);
        --playground-code-def-color: rgb(102, 153, 204);
        --playground-code-keyword-color: rgb(197, 148, 197);
        --playground-code-meta-color: rgb(248, 248, 242);
        --playground-code-number-color: rgb(249, 145, 87);
        --playground-code-operator-color: rgb(248, 248, 242);
        --playground-code-qualifier-color: rgb(248, 248, 242);
        --playground-code-string-color: rgb(153, 199, 148);
        --playground-code-string-2-color: rgb(248, 248, 242);
        --playground-code-tag-color: rgb(197, 148, 197);
        --playground-code-type-color: rgb(248, 248, 242);
        --playground-code-variable-color: rgb(248, 248, 242);
        --playground-code-variable-2-color: rgb(248, 248, 242);
        --playground-code-variable-3-color: rgb(248, 248, 242);
        --playground-code-callee-color: rgb(248, 248, 242);
        --playground-code-property-color: rgb(153, 199, 148);
        --playground-code-font-family: var(--default-font);
        --playground-code-font-size: 90%;
        --playground-code-background: var(--surface-background);
      }</style><style>@import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css);:root{--primary: #f9c412;--on-primary: #181818;--secondary: #e7bf60;--background: #181818;--on-background: #eee;--playground-height: 450px;--surface-background: #2d2d2d}#playground{width:100%;height:calc(var(--playground-height)*2);background-color:var(--surface-background)}#playground>playground-file-editor,#playground>playground-preview{height:var(--playground-height)}.tags{display:wrap}.click{cursor:pointer;text-decoration:none}.chip{display:inline-block;padding:0 15px;border-radius:25px;margin:4px;background-color:var(--primary);color:var(--on-primary)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{z-index:1;position:fixed;top:0;left:0;width:100vw;padding:.375em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}:root{--main-width: calc(100vw - 3em)}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80;z-index:1000}header aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress{z-index:1;background-color:var(--primary);width:100vw;position:absolute;left:0;top:0;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:100;src:url(/fonts/Inter-Thin.woff2) format("woff2"),url(/fonts/Inter-Thin.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:100;src:url(/fonts/Inter-ThinItalic.woff2) format("woff2"),url(/fonts/Inter-ThinItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:200;src:url(/fonts/Inter-ExtraLight.woff2) format("woff2"),url(/fonts/Inter-ExtraLight.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:200;src:url(/fonts/Inter-ExtraLightItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraLightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:300;src:url(/fonts/Inter-Light.woff2) format("woff2"),url(/fonts/Inter-Light.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:300;src:url(/fonts/Inter-LightItalic.woff2) format("woff2"),url(/fonts/Inter-LightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:400;src:url(/fonts/Inter-Regular.woff2) format("woff2"),url(/fonts/Inter-Regular.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:400;src:url(/fonts/Inter-Italic.woff2) format("woff2"),url(/fonts/Inter-Italic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:500;src:url(/fonts/Inter-Medium.woff2) format("woff2"),url(/fonts/Inter-Medium.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:500;src:url(/fonts/Inter-MediumItalic.woff2) format("woff2"),url(/fonts/Inter-MediumItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:600;src:url(/fonts/Inter-SemiBold.woff2) format("woff2"),url(/fonts/Inter-SemiBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:600;src:url(/fonts/Inter-SemiBoldItalic.woff2) format("woff2"),url(/fonts/Inter-SemiBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:700;src:url(/fonts/Inter-Bold.woff2) format("woff2"),url(/fonts/Inter-Bold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:700;src:url(/fonts/Inter-BoldItalic.woff2) format("woff2"),url(/fonts/Inter-BoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:800;src:url(/fonts/Inter-ExtraBold.woff2) format("woff2"),url(/fonts/Inter-ExtraBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:800;src:url(/fonts/Inter-ExtraBoldItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:900;src:url(/fonts/Inter-Black.woff2) format("woff2"),url(/fonts/Inter-Black.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:900;src:url(/fonts/Inter-BlackItalic.woff2) format("woff2"),url(/fonts/Inter-BlackItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:normal;font-named-instance:"Regular";src:url(/fonts/Inter-roman.var.woff2) format("woff2")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:italic;font-named-instance:"Italic";src:url(/fonts/Inter-italic.var.woff2) format("woff2")}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button,input,select{font-family:inherit;font-size:100%;line-height:1.15}input,select{margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}[hidden]{display:none}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}h1,h2,h3{margin-bottom:1.36rem}h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem;line-height:1.6rem}body,p,pre,ul{font-size:1em}p,pre,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem}h2{font-size:1.728rem}body,p,pre,ul{font-size:1rem;line-height:1.6}p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}h3{font-size:2.1989rem;line-height:2.64rem}body,p,pre,ul{font-size:1.1rem;line-height:1.6}h1,h2,h3,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h2{font-size:4.05rem;line-height:4.8rem}h3{font-size:2.7rem;line-height:2.88rem}body,p,pre,ul{font-size:1.2rem;line-height:1.6}h1,h2,h3,p,pre,ul{margin-bottom:1.632rem}}th{font-weight:600;border-bottom:1px solid #595959;overflow:auto;padding:.75em;text-align:left;vertical-align:top}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre code:not([class]){padding:1.5em;overflow-x:scroll}code{border-radius:.3em;color:#e2777a;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d;padding:0}h1,h2,h3{font-family:var(--font-family)}h2{font-style:italic}a:hover{text-decoration:underline}dt{font-weight:600;padding-top:.75em;padding-left:.75em}@supports (font-variation-settings:normal){html{font-family:Inter UI var alt,sans-serif;--font-family: Inter UI var alt, sans-serif}}button,input,select{border-radius:.3em;max-width:100%}input{padding:.75em}input,select{margin-bottom:1.5em;display:inline}button{background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:var(--surface)}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--secondary)}input[type=color],input[type=datetime],input[type=file],input[type=text],input[type=time],input[type=url],select{border:1px solid #595959;padding:.75em}*{border:0;box-sizing:border-box}body,header nav a{font-family:var(--font-family)}body{background:var(--background);color:var(--on-background)}header{padding:4.5em 1.5em 3em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ul{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto;border-top:.5px solid #ccc}footer{background:var(--background);color:var(--on-background);text-align:center;padding:2em 2em 100px}footer>*{margin:.6em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li ul{margin-bottom:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;background:#2d2d2d}.token.comment,.token.doctype{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.tag{color:#e2777a}.token.boolean,.token.function{color:#f08d49}.token.class-name,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.string{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.important{font-weight:700}.token.inserted{color:green}</style><header><nav><div id=nav><h1><a href=/ title=Homepage>Rody Davis</a></h1><a href=/about/ >About</a> <a href=/talks/ >Talks</a> <a href=/apps/ >Apps</a></div><div id=reading-progress aria-hidden=true></div></nav><h1>Lit and Flutter</h1><aside>7 min read.</aside><dialog id=message></dialog><noscript><img alt="" height=1 src="/.netlify/functions/ga?v=1&_v=j83&t=pageview&dr=https%3A%2F%2Fno-script.com&_s=1&dh=rodydavis.com&dp=%2Fposts%2Fflutter-and-lit%2F&ul=en-us&de=UTF-8&dt=Lit%20and%20Flutter&tid=G-JQNPVBL9DR" style=display:none width=1></noscript></header><main><article><div class=tags><a href=/tags/flutter/ class=click><div class=chip>flutter</div></a><a href=/tags/web/ class=click><div class=chip>web</div></a><a href=/tags/lit/ class=click><div class=chip>lit</div></a></div><p>In this article I will go over how to set up a <a href=https://lit.dev>Lit</a> web component and use it inline in the Flutter widget tree.<p><strong>TLDR</strong> You can find the final source <a href=https://github.com/rodydavis/flutter_hybrid_template>here</a>.<p>The reason you would want this integration is so you can take an existing web app, or just a single part of it and embed it in the widget tree.<p>With it wrapped in Flutter you can call device APIs from event listeners on your web component.<p>For example you may have an app that handles purchases, and now you can call the in app purchase API or other device specific features not available on the web.<p>You also get a cross platform app that can be delivered to both Google Play and the App Store.<p>The web component will receive new code each time you update your site, so you do not have to ship an update each time the web component changes.<h2 id=prerequisites>Prerequisites <a href=#prerequisites class=direct-link>#</a></h2><ul><li>Flutter SDK<li>Xcode and Command Line Tools<li>Android SDK<li>Vscode<li>Node<li>Typescript</ul><h2 id=getting-started>Getting Started <a href=#getting-started class=direct-link>#</a></h2><p>We can start off by creating a empty directory and naming it with <code>snake_case</code> whatever we want.<pre class=language-bash><code class=language-bash><span class="token function">mkdir</span> flutter_lit_example<br><span class="token class-name builtin">cd</span> flutter_lit_example</code></pre><h3 id=web-setup>Web Setup <a href=#web-setup class=direct-link>#</a></h3><p>Now we are in the <code>flutter_lit_example</code> directory and can setup Flutter and Lit. Let's start with node.<pre class=language-bash><code class=language-bash><span class="token function">npm</span> init -y<br><span class="token function">npm</span> i lit<br><span class="token function">npm</span> i -D typescript vite @types/node</code></pre><p>This will setup the basics for a node project and install the packages we need. Now lets add some config files.<pre class=language-bash><code class=language-bash><span class="token function">touch</span> tsconfig.json<br><span class="token function">touch</span> vite.config.ts</code></pre><p>This will create 2 files. Now open up <code>tsconfig.json</code> and paste the following:<pre class=language-json><code class=language-json><span class="token punctuation">{</span><br>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"esnext"</span><span class="token punctuation">,</span><br>    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token string">"es2017"</span><span class="token punctuation">,</span><br>      <span class="token string">"dom"</span><span class="token punctuation">,</span><br>      <span class="token string">"dom.iterable"</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"types"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token string">"vite/client"</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"declaration"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"emitDeclarationOnly"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"./types"</span><span class="token punctuation">,</span><br>    <span class="token property">"rootDir"</span><span class="token operator">:</span> <span class="token string">"./src"</span><span class="token punctuation">,</span><br>    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"noUnusedLocals"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"noUnusedParameters"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"noImplicitReturns"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"noFallthroughCasesInSwitch"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"moduleResolution"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span><br>    <span class="token property">"allowSyntheticDefaultImports"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"experimentalDecorators"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"forceConsistentCasingInFileNames"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token string">"src/**/*.ts"</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre><p>This is a basic typescript config. Now open up <code>vite.config.ts</code> and paste the following:<pre class=language-js><code class=language-js><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"path"</span><span class="token punctuation">;</span><br><br><span class="token comment">// https://vitejs.dev/config/</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  base<span class="token operator">:</span> <span class="token string">"/flutter_lit_example/"</span><span class="token punctuation">,</span> <span class="token comment">// TODO: Name of your github repo</span><br>  build<span class="token operator">:</span> <span class="token punctuation">{</span><br>    outDir<span class="token operator">:</span> <span class="token string">"build/web"</span><span class="token punctuation">,</span><br>    rollupOptions<span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token comment">// external: /^lit-element/,</span><br>      output<span class="token operator">:</span> <span class="token punctuation">{</span><br>        entryFileNames<span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">assets/[name].js</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">,</span><br>        chunkFileNames<span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">assets/[name].js</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">,</span><br>        assetFileNames<span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">assets/[name].[ext]</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      input<span class="token operator">:</span> <span class="token punctuation">{</span><br>        main<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"index.html"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token comment">// TODO: Create a new module for each component you want to embed</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Now we need to create our web component:<pre class=language-bash><code class=language-bash><span class="token function">mkdir</span> src<br><span class="token class-name builtin">cd</span> src<br><span class="token function">touch</span> my-app.ts<br><span class="token class-name builtin">cd</span> <span class="token punctuation">..</span></code></pre><p>Open <code>my-app.ts</code> and paste the following:<pre class=language-js><code class=language-js><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> css<span class="token punctuation">,</span> LitElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lit"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> customElement<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lit/decorators.js"</span><span class="token punctuation">;</span><br><br>@<span class="token function">customElement</span><span class="token punctuation">(</span><span class="token string">"my-app"</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string"><br>    p {<br>      color: blue;<br>    }<br>  </span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br><br>  @<span class="token function">property</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  name <span class="token operator">=</span> <span class="token string">"Somebody"</span><span class="token punctuation">;</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">&lt;div><br>      &lt;p>Hello, </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">!&lt;/p><br>      &lt;slot>&lt;/slot><br>    &lt;/div></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>We need to create a <code>index.html</code> for our web app.<pre class=language-bash><code class=language-bash><span class="token function">touch</span> index.html</code></pre><p>Open <code>index.html</code> and paste the following:<pre class=language-html><code class=language-html><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/my-app.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>      <span class="token selector">body</span> <span class="token punctuation">{</span><br>        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">my-app</span> <span class="token punctuation">{</span><br>        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br>        <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-app</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-app</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id=flutter-setup>Flutter Setup <a href=#flutter-setup class=direct-link>#</a></h3><p>Now that we have the basics setup for web we can move on to flutter. Let's create the project with the following:<pre class=language-bash><code class=language-bash>flutter create --platforms<span class="token operator">=</span>ios,android <span class="token class-name builtin">.</span><br>flutter packages get</code></pre><p>Open up <code>pubspec.yaml</code> and update it with the following:<pre class=language-yaml><code class=language-yaml><span class="token atrule key">name</span><span class="token punctuation">:</span> flutter_lit_example<br><span class="token atrule key">description</span><span class="token punctuation">:</span> A hybrid Flutter app.<br><span class="token atrule key">publish_to</span><span class="token punctuation">:</span> <span class="token string">"none"</span><br><span class="token atrule key">version</span><span class="token punctuation">:</span> 1.0.0+1<br><br><span class="token atrule key">environment</span><span class="token punctuation">:</span><br>  <span class="token atrule key">sdk</span><span class="token punctuation">:</span> <span class="token string">">=2.7.0 &lt;3.0.0"</span><br><br><span class="token atrule key">dependencies</span><span class="token punctuation">:</span><br>  <span class="token atrule key">flutter</span><span class="token punctuation">:</span><br>    <span class="token atrule key">sdk</span><span class="token punctuation">:</span> flutter<br>  <span class="token atrule key">flutter_inappwebview</span><span class="token punctuation">:</span> ^5.3.2<br><br><span class="token atrule key">dev_dependencies</span><span class="token punctuation">:</span><br>  <span class="token atrule key">flutter_test</span><span class="token punctuation">:</span><br>    <span class="token atrule key">sdk</span><span class="token punctuation">:</span> flutter<br><br><span class="token atrule key">flutter</span><span class="token punctuation">:</span><br>  <span class="token atrule key">uses-material-design</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre><p>Make sure to get the packages again:<pre class=language-bash><code class=language-bash>flutter packages get</code></pre><p>Now we need to create the file that will wrap the web component.<pre class=language-bash><code class=language-bash><span class="token class-name builtin">cd</span> lib<br><span class="token function">touch</span> web_component.dart<br><span class="token class-name builtin">cd</span> <span class="token punctuation">..</span></code></pre><p>Open <code>web_component.dart</code> and paste the following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'package:flutter_inappwebview/flutter_inappwebview.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">WebComponent</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token function">WebComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    Key key<span class="token punctuation">,</span><br>    <span class="token metadata symbol">@required</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><br>    <span class="token metadata symbol">@required</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bundle<span class="token punctuation">,</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>attributes <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>slot <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">final</span> String name<span class="token punctuation">,</span> bundle<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span> attributes<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> String slot<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> List<span class="token operator">&lt;</span>EventCallback<span class="token operator">></span> events<span class="token punctuation">;</span><br><br>  <span class="token metadata symbol">@override</span><br>  _WebComponentState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_WebComponentState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">_WebComponentState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>WebComponent<span class="token operator">></span> <span class="token punctuation">{</span><br>  InAppWebViewController controller<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>EventCallback<span class="token operator">>></span> _events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  String <span class="token keyword">get</span> source <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token string">'''&lt;!DOCTYPE html><br>&lt;html lang="en"><br>  &lt;head><br>    &lt;meta charset="UTF-8" /><br>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /><br>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /><br>    &lt;style><br>      body {<br>        padding: 0;<br>        margin: 0;<br>      }<br>      ${widget.name} {<br>        width: 100%;<br>        height: 100vh;<br>      }<br>    &lt;/style><br>  &lt;script type="module" crossorigin src="${widget.bundle}">&lt;/script><br>&lt;/head><br>  &lt;body><br>    &lt;${widget.name} ${widget.attributes.entries.map((e) => '${e.key}="${e.value}"').join(' ')}><br>      ${widget.slot}<br>    &lt;/${widget.name}><br>    &lt;script><br>    window.addEventListener("flutterInAppWebViewPlatformReady", (event) => {<br>      ${widget.events.join('\n')}<br>    });<br>    &lt;/script><br>  &lt;/body><br>&lt;/html> <br>'''</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">void</span> <span class="token function">_setup</span><span class="token punctuation">(</span>InAppWebViewController controller<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>controller <span class="token operator">=</span> controller<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_setupEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">void</span> <span class="token function">_setupEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> event <span class="token keyword">in</span> _events<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      controller<span class="token punctuation">.</span><span class="token function">removeJavaScriptHandler</span><span class="token punctuation">(</span>handlerName<span class="token punctuation">:</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> event <span class="token keyword">in</span> widget<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token function">_addEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">void</span> <span class="token function">_addEvent</span><span class="token punctuation">(</span>EventCallback event<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    controller<span class="token punctuation">.</span><span class="token function">addJavaScriptHandler</span><span class="token punctuation">(</span><br>      handlerName<span class="token punctuation">:</span> event<span class="token punctuation">.</span>query<span class="token punctuation">,</span><br>      callback<span class="token punctuation">:</span> event<span class="token punctuation">.</span>onPressed<span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    _events<span class="token punctuation">[</span>event<span class="token punctuation">.</span>event<span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    _events<span class="token punctuation">[</span>event<span class="token punctuation">.</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token metadata symbol">@override</span><br>  <span class="token keyword">void</span> <span class="token function">didUpdateWidget</span><span class="token punctuation">(</span><span class="token keyword">covariant</span> WebComponent oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldWidget<span class="token punctuation">.</span>events <span class="token operator">!=</span> widget<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token function">_setupEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldWidget<span class="token punctuation">.</span>slot <span class="token operator">!=</span> widget<span class="token punctuation">.</span>slot <span class="token operator">||</span><br>        oldWidget<span class="token punctuation">.</span>bundle <span class="token operator">!=</span> widget<span class="token punctuation">.</span>bundle <span class="token operator">||</span><br>        oldWidget<span class="token punctuation">.</span>name <span class="token operator">!=</span> widget<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      controller<span class="token punctuation">.</span><span class="token function">loadData</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didUpdateWidget</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">InAppWebView</span><span class="token punctuation">(</span><br>      initialData<span class="token punctuation">:</span> <span class="token function">InAppWebViewInitialData</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> source<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      onWebViewCreated<span class="token punctuation">:</span> _setup<span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">EventCallback</span> <span class="token punctuation">{</span><br>  <span class="token function">EventCallback</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token metadata symbol">@required</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onPressed<span class="token punctuation">,</span><br>    <span class="token metadata symbol">@required</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">,</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>query<span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">final</span> String query<span class="token punctuation">,</span> event<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> <span class="token keyword">dynamic</span> <span class="token keyword">Function</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span><span class="token keyword">dynamic</span><span class="token operator">></span> args<span class="token punctuation">)</span> onPressed<span class="token punctuation">;</span><br><br>  <span class="token metadata symbol">@override</span><br>  String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> _source<span class="token punctuation">;</span><br><br>  String <span class="token keyword">get</span> _prefix <span class="token operator">=</span><span class="token operator">></span> query <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&&</span> query<span class="token punctuation">.</span>isNotEmpty<br>      <span class="token operator">?</span> <span class="token string">'document.querySelector("$query")'</span><br>      <span class="token punctuation">:</span> <span class="token string">'document.body'</span><span class="token punctuation">;</span><br><br>  String <span class="token keyword">get</span> _source <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><br>        <span class="token string">'$_prefix.addEventListener("$event", (e) => {'</span><span class="token punctuation">,</span><br>        <span class="token string">'  window.flutter_inappwebview.callHandler("$query", e);'</span><span class="token punctuation">,</span><br>        <span class="token string">'}, false);'</span><span class="token punctuation">,</span><br>      <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Open <code>main.dart</code> and paste it with th following:<pre class=language-dart><code class=language-dart><span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'web_component.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> WEBSITE_URL <span class="token operator">=</span> <span class="token string">'https://rodydavis.github.io/flutter_lit_example/'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> BUNDLE_PATH <span class="token operator">=</span> <span class="token string">'assets/main.js'</span><span class="token punctuation">;</span><br><br><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  WidgetsFlutterBinding<span class="token punctuation">.</span><span class="token function">ensureInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span><br>  <span class="token keyword">final</span> title <span class="token operator">=</span> <span class="token string">'Flutter Hybrid App'</span><span class="token punctuation">;</span><br>  <span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">MaterialApp</span><span class="token punctuation">(</span><br>      debugShowCheckedModeBanner<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      title<span class="token punctuation">:</span> title<span class="token punctuation">,</span><br>      theme<span class="token punctuation">:</span> <span class="token function">ThemeData</span><span class="token punctuation">(</span>primarySwatch<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>blue<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      home<span class="token punctuation">:</span> <span class="token function">MyHomePage</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> title<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">MyHomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span><br>  <span class="token function">MyHomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Key key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">final</span> String title<span class="token punctuation">;</span><br><br>  <span class="token metadata symbol">@override</span><br>  _MyHomePageState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyHomePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">_MyHomePageState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>MyHomePage<span class="token operator">></span> <span class="token punctuation">{</span><br>  <span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span><br>      appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span><br>        title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>      body<span class="token punctuation">:</span> <span class="token function">Builder</span><span class="token punctuation">(</span><br>        builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">WebComponent</span><span class="token punctuation">(</span><br>          name<span class="token punctuation">:</span> <span class="token string">'my-app'</span><span class="token punctuation">,</span><br>          bundle<span class="token punctuation">:</span> <span class="token string">'$WEBSITE_URL/$BUNDLE_PATH'</span><span class="token punctuation">,</span><br>          attributes<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>            <span class="token string">'name'</span><span class="token punctuation">:</span> widget<span class="token punctuation">.</span>title<span class="token punctuation">,</span><br>          <span class="token punctuation">}</span><span class="token punctuation">,</span><br>          slot<span class="token punctuation">:</span> <span class="token string">'&lt;button id="my-button">Talk back!&lt;/button>'</span><span class="token punctuation">,</span><br>          events<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>            <span class="token function">EventCallback</span><span class="token punctuation">(</span><br>              event<span class="token punctuation">:</span> <span class="token string">'click'</span><span class="token punctuation">,</span><br>              query<span class="token punctuation">:</span> <span class="token string">'#my-button'</span><span class="token punctuation">,</span><br>              onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                ScaffoldMessenger<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><br>                    <span class="token punctuation">.</span><span class="token function">showSnackBar</span><span class="token punctuation">(</span><span class="token function">SnackBar</span><span class="token punctuation">(</span>content<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Clicked!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>              <span class="token punctuation">}</span><span class="token punctuation">,</span><br>            <span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token punctuation">]</span><span class="token punctuation">,</span><br>        <span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre><p>You will need to update <code>WEBSITE_URL</code> to have the url of the website where you will be deploying and <code>BUNDLE_URL</code> to the relative path to the js bundle.<p>This will ensure auto updates with a new version rolls out and the cache it stale. This will also allow for offline support after the first time it is downloaded.<h2 id=running>Running <a href=#running class=direct-link>#</a></h2><p>Now we can run our application but it requires a few steps to get it all setup.<p>To test and build our web app locally we will use <a href=https://github.com/vitejs/vite>vite</a> and render the <code>index.html</code><pre class=language-bash><code class=language-bash><span class="token function">npm</span> i<br><span class="token function">npm</span> run dev</code></pre><p>You should see the following:<pre class=language-html><code class=language-html>vite v2.2.3 dev server running at:<br><br>Local:    http://localhost:3000/flutter_lit_example/<br>Network:  http://192.168.1.143:3000/flutter_lit_example/<br><br>ready in 311ms.</code></pre><p>We can open the link <code>http://localhost:3000/flutter_lit_example/</code> to see our running web app and hot reload changes from <code>my-app.ts</code>.<p>If you want to learn more about Lit you can read the docs <a href=https://lit.dev>here</a>.<p>Once you are happy with how it looks we can move on to Flutter to wrap it in a native app. This will give us access to native code if we wanted to use the in app purchase api or push notifications.<p>Kill the terminal and run the following:<pre class=language-bash><code class=language-bash>flutter packages get<br>flutter build ios<br>flutter build appbundle<br>flutter run</code></pre><p>This should select a running device or prompt you to select one. Now that it is running on the device you can see we have two way communication with the Flutter app and the web component.<h2 id=conclusion>Conclusion <a href=#conclusion class=direct-link>#</a></h2><p>If you want to find the source code you can check it out <a href=https://github.com/rodydavis/flutter_hybrid_template>here</a> otherwise thanks for reading and let me know if you have any questions!<h1>🙏🙏🙏</h1><p>Since you've made it this far, <a href=https://rodydavis.com/posts/flutter-and-lit/ on-click=share>sharing</a> this article on your favorite social media network would be highly appreciated 💖! For feedback, please <a href=https://twitter.com/rodydavis rel=noopener target=_blank>ping me on Twitter.</a></p><share-widget><button aria-label=Share href=https://rodydavis.com/posts/flutter-and-lit/ on-click=share><div></div></button></share-widget><script type=application/ld+json>{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Lit and Flutter",
  "image": [],
  "author": "Rody Davis", 
  "genre": "https://schema.org/Code", 
  "publisher": {
    "@type": "Organization",
    "name": "Rody Davis",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/favicon/favicon-32x32.png?hash=3df5885280"
    }
  },
  "url": "https://rodydavis.com/posts/flutter-and-lit/",
  "mainEntityOfPage": "https://rodydavis.com/posts/flutter-and-lit/",
  "datePublished": "2021-05-05",
  "dateModified": "2021-07-08",
  "description": "In this article I will go over how to set up a Lit web component and use it inline in the Flutter widget tree. TLDR You can find the final..."
}</script><p>Published <time datetime=2021-05-05>05 May 2021</time></article></main><footer><a href=https://twitter.com/rodydavis class="fab fa-twitter" rel="noopener noreferrer" target=_blank></a> <a href=https://facebook.com/rodydavisjr class="fab fa-facebook" rel="noopener noreferrer" target=_blank></a> <a href=https://www.linkedin.com/in/rodydavis class="fab fa-linkedin" rel="noopener noreferrer" target=_blank></a> <a href=https://www.youtube.com/rodydavis class="fab fa-youtube" rel="noopener noreferrer" target=_blank></a> <a href=https://www.instagram.com/rodydavisjr class="fab fa-instagram" rel="noopener noreferrer" target=_blank></a> <a href=https://www.github.com/rodydavis class="fab fa-github" rel="noopener noreferrer" target=_blank></a> <a href=https://www.tiktok.com/@rodydavisjr class="fab fa-tiktok" rel="noopener noreferrer" target=_blank></a></footer><script src="https://www.googletagmanager.com/gtag/js?id=G-JQNPVBL9DR" async></script><script>window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-JQNPVBL9DR');</script>