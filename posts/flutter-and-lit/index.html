<!DOCTYPE html><html domain="rodydavis.com" ga-id="G-JQNPVBL9DR" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="default-src 'self';object-src 'none';script-src 'self' 'sha256-Ky9qZOPnMhQV/s7Fdb9TYAOfU4KtWNqCZaFK8tSzXa0=';style-src 'unsafe-inline';img-src 'self' data:" http-equiv="Content-Security-Policy"><link href="/img/favicon/favicon-192x192.png?hash=2089033c93" rel="icon" type="image/png"><meta content="#f9c412" name="theme-color"><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name="robots"><title>Lit and Flutter</title><meta content="Lit and Flutter" property="og:title"><meta content="In this article I will go over how to set up a Lit (web component) and use it inline in the flutter widget tree. TLDR You can find the final..." name="description"><meta content="In this article I will go over how to set up a Lit (web component) and use it inline in the flutter widget tree. TLDR You can find the final..." property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="@rodydavis" name="twitter:site"><meta content="@rodydavis" name="twitter:creator"><link href="https://rodydavis.com/posts/flutter-and-lit/" rel="canonical"><meta content="no-referrer-when-downgrade" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="Rody Davis"><link href="/" rel="preconnect" crossorigin=""><script async="" defer="" src="/js/min.js?hash=c372ec6a84"></script><script async="" defer="" src="/js/cached.js?hash=9030142fbb"></script><script csp-hash="sha256-Ky9qZOPnMhQV/s7Fdb9TYAOfU4KtWNqCZaFK8tSzXa0=">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #f9c412;--secondary: #e7bf60;--background: #181818;--on-background: #eee;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{position:fixed;padding:.375em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80;z-index:1000}header aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress,header nav{z-index:1;width:100vw;left:0;top:0}#reading-progress{background-color:var(--primary);position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:100;src:url(/fonts/Inter-Thin.woff2) format("woff2"),url(/fonts/Inter-Thin.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:100;src:url(/fonts/Inter-ThinItalic.woff2) format("woff2"),url(/fonts/Inter-ThinItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:200;src:url(/fonts/Inter-ExtraLight.woff2) format("woff2"),url(/fonts/Inter-ExtraLight.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:200;src:url(/fonts/Inter-ExtraLightItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraLightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:300;src:url(/fonts/Inter-Light.woff2) format("woff2"),url(/fonts/Inter-Light.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:300;src:url(/fonts/Inter-LightItalic.woff2) format("woff2"),url(/fonts/Inter-LightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:400;src:url(/fonts/Inter-Regular.woff2) format("woff2"),url(/fonts/Inter-Regular.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:400;src:url(/fonts/Inter-Italic.woff2) format("woff2"),url(/fonts/Inter-Italic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:500;src:url(/fonts/Inter-Medium.woff2) format("woff2"),url(/fonts/Inter-Medium.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:500;src:url(/fonts/Inter-MediumItalic.woff2) format("woff2"),url(/fonts/Inter-MediumItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:600;src:url(/fonts/Inter-SemiBold.woff2) format("woff2"),url(/fonts/Inter-SemiBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:600;src:url(/fonts/Inter-SemiBoldItalic.woff2) format("woff2"),url(/fonts/Inter-SemiBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:700;src:url(/fonts/Inter-Bold.woff2) format("woff2"),url(/fonts/Inter-Bold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:700;src:url(/fonts/Inter-BoldItalic.woff2) format("woff2"),url(/fonts/Inter-BoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:800;src:url(/fonts/Inter-ExtraBold.woff2) format("woff2"),url(/fonts/Inter-ExtraBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:800;src:url(/fonts/Inter-ExtraBoldItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:900;src:url(/fonts/Inter-Black.woff2) format("woff2"),url(/fonts/Inter-Black.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:900;src:url(/fonts/Inter-BlackItalic.woff2) format("woff2"),url(/fonts/Inter-BlackItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:normal;font-named-instance:"Regular";src:url(/fonts/Inter-roman.var.woff2) format("woff2")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:italic;font-named-instance:"Italic";src:url(/fonts/Inter-italic.var.woff2) format("woff2")}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button,input,select{font-family:inherit;font-size:100%;line-height:1.15}input,select{margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}h1,h2,h3{margin-bottom:1.36rem}h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem;line-height:1.6rem}body,p,pre,ul{font-size:1em}p,pre,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem}h2{font-size:1.728rem}body,p,pre,ul{font-size:1rem;line-height:1.6}p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}h3{font-size:2.1989rem;line-height:2.64rem}body,p,pre,ul{font-size:1.1rem;line-height:1.6}h1,h2,h3,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h2{font-size:4.05rem;line-height:4.8rem}h3{font-size:2.7rem;line-height:2.88rem}body,p,pre,ul{font-size:1.2rem;line-height:1.6}h1,h2,h3,p,pre,ul{margin-bottom:1.632rem}}th{font-weight:600;border-bottom:1px solid #595959;overflow:auto;padding:.75em;text-align:left;vertical-align:top}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre code:not([class]){padding:1.5em;overflow-x:scroll}code{border-radius:.3em;color:#e2777a;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d;padding:0}h1,h2,h3{font-family:var(--font-family)}h2{font-style:italic}a:hover{text-decoration:underline}dt{font-weight:600;padding-top:.75em;padding-left:.75em}@supports (font-variation-settings:normal){html{font-family:Inter UI var alt,sans-serif;--font-family: Inter UI var alt, sans-serif}}button,input,select{border-radius:.3em;max-width:100%}input{padding:.75em}input,select{margin-bottom:1.5em;display:inline}button{background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:var(--surface)}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--secondary)}input[type=color],input[type=datetime],input[type=file],input[type=time],input[type=url],select{border:1px solid #595959;padding:.75em}*{border:0;box-sizing:border-box}body,header nav a{font-family:var(--font-family)}body{background:var(--background);color:var(--on-background)}header{padding:4.5em 1.5em 3em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ul{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto;border-top:.5px solid #ccc}footer{background:var(--background);color:var(--on-background);padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li ul{margin-bottom:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;background:#2d2d2d}.token.comment,.token.doctype{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.tag{color:#e2777a}.token.boolean,.token.function{color:#f08d49}.token.class-name,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.string{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.important{font-weight:700}.token.inserted{color:green}</style></head><body><header><nav><div id="nav"><h1><a href="/" title="Homepage">Rody Davis</a></h1><a href="/about/">About</a> <a href="/privacy/">Privacy</a></div><div id="reading-progress" aria-hidden="true"></div></nav><h1>Lit and Flutter</h1><aside>6 min read.</aside><dialog id="message"></dialog><noscript><img alt="" height=1 src="/.netlify/functions/ga?v=1&_v=j83&t=pageview&dr=https%3A%2F%2Fno-script.com&_s=1&dh=rodydavis.com&dp=%2Fposts%2Fflutter-and-lit%2F&ul=en-us&de=UTF-8&dt=Lit%20and%20Flutter&tid=G-JQNPVBL9DR" style=display:none width=1></noscript></header><main><article><p>In this article I will go over how to set up a <a href="https://lit.dev">Lit</a> (web component) and use it inline in the flutter widget tree.</p><p><strong>TLDR</strong> You can find the final source <a href="https://github.com/rodydavis/flutter_hybrid_template">here</a>.</p><h2 id="prerequisites">Prerequisites <a href="#prerequisites" class="direct-link">#</a></h2><ul><li>Flutter SDK</li><li>Xcode and Command Line Tools</li><li>Android SDK</li><li>Vscode</li><li>Node</li><li>Typescript</li></ul><h2 id="getting-started">Getting Started <a href="#getting-started" class="direct-link">#</a></h2><p>We can start off by creating a empty directory and naming it with <code>snake_case</code> whatever we want.</p><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> flutter_lit_example<br><span class="token class-name builtin">cd</span> flutter_lit_example</code></pre><h3 id="web-setup">Web Setup <a href="#web-setup" class="direct-link">#</a></h3><p>Now we are in the <code>flutter_lit_example</code> directory and can setup flutter and lit. Let's start with node.</p><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> init -y<br><span class="token function">npm</span> i --save lit<br><span class="token function">npm</span> i --save-dev typescript vite @types/node<br><span class="token function">npm</span> i</code></pre><p>This will setup the basics for a node project and install the packages we need. Now lets add some config files.</p><pre class="language-bash"><code class="language-bash"><span class="token function">touch</span> tsconfig.json<br><span class="token function">touch</span> vite.config.ts</code></pre><p>This will create 2 files. Now open up <code>tsconfig.json</code> and paste the following:</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"esnext"</span><span class="token punctuation">,</span><br>    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token string">"es2017"</span><span class="token punctuation">,</span><br>      <span class="token string">"dom"</span><span class="token punctuation">,</span><br>      <span class="token string">"dom.iterable"</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"types"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token string">"vite/client"</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"declaration"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"emitDeclarationOnly"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"./types"</span><span class="token punctuation">,</span><br>    <span class="token property">"rootDir"</span><span class="token operator">:</span> <span class="token string">"./src"</span><span class="token punctuation">,</span><br>    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"noUnusedLocals"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"noUnusedParameters"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"noImplicitReturns"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"noFallthroughCasesInSwitch"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"moduleResolution"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span><br>    <span class="token property">"allowSyntheticDefaultImports"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"experimentalDecorators"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"forceConsistentCasingInFileNames"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token string">"src/**/*.ts"</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre><p>This is a basic typescript config. Now open up <code>vite.config.ts</code> and paste the following:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"path"</span><span class="token punctuation">;</span><br><br><span class="token comment">// https://vitejs.dev/config/</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  base<span class="token operator">:</span> <span class="token string">"/flutter_lit_example/"</span><span class="token punctuation">,</span> <span class="token comment">// TODO: Name of your github repo</span><br>  build<span class="token operator">:</span> <span class="token punctuation">{</span><br>    outDir<span class="token operator">:</span> <span class="token string">"build/web"</span><span class="token punctuation">,</span><br>    rollupOptions<span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token comment">// external: /^lit-element/,</span><br>      output<span class="token operator">:</span> <span class="token punctuation">{</span><br>        entryFileNames<span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">assets/[name].js</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">,</span><br>        chunkFileNames<span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">assets/[name].js</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">,</span><br>        assetFileNames<span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">assets/[name].[ext]</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      input<span class="token operator">:</span> <span class="token punctuation">{</span><br>        main<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"index.html"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token comment">// TODO: Create a new module for each component you want to embed</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Now we need to create our web component:</p><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> src<br><span class="token class-name builtin">cd</span> src<br><span class="token function">touch</span> my-app.ts<br><span class="token class-name builtin">cd</span> <span class="token punctuation">..</span></code></pre><p>Open <code>my-app.ts</code> and paste the following:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> css<span class="token punctuation">,</span> LitElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lit"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> customElement<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lit/decorators.js"</span><span class="token punctuation">;</span><br><br>@<span class="token function">customElement</span><span class="token punctuation">(</span><span class="token string">"my-app"</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string"><br>    p {<br>      color: blue;<br>    }<br>  </span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br><br>  @<span class="token function">property</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  name <span class="token operator">=</span> <span class="token string">"Somebody"</span><span class="token punctuation">;</span><br><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> html<span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">&lt;div&gt;<br>      &lt;p&gt;Hello, </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">!&lt;/p&gt;<br>      &lt;slot&gt;&lt;/slot&gt;<br>    &lt;/div&gt;</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>We need to create a <code>index.html</code> for our web app.</p><pre class="language-bash"><code class="language-bash"><span class="token function">touch</span> index.html</code></pre><p>Open <code>index.html</code> and paste the following:</p><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/my-app.ts<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"><br>      <span class="token selector">body</span> <span class="token punctuation">{</span><br>        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token selector">my-app</span> <span class="token punctuation">{</span><br>        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br>        <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-app</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-app</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre><h3 id="flutter-setup">Flutter Setup <a href="#flutter-setup" class="direct-link">#</a></h3><p>Now that we have the basics setup for web we can move on to flutter. Let's create the project with the following:</p><pre class="language-bash"><code class="language-bash">flutter create --platforms<span class="token operator">=</span>ios,android <span class="token class-name builtin">.</span><br>flutter packages get</code></pre><p>Open up <code>pubspec.yaml</code> and update it with the following:</p><pre class="language-yaml"><code class="language-yaml"><span class="token atrule key">name</span><span class="token punctuation">:</span> flutter_lit_example<br><span class="token atrule key">description</span><span class="token punctuation">:</span> A hybrid Flutter app.<br><span class="token atrule key">publish_to</span><span class="token punctuation">:</span> <span class="token string">"none"</span><br><span class="token atrule key">version</span><span class="token punctuation">:</span> 1.0.0+1<br><br><span class="token atrule key">environment</span><span class="token punctuation">:</span><br>  <span class="token atrule key">sdk</span><span class="token punctuation">:</span> <span class="token string">"&gt;=2.7.0 &lt;3.0.0"</span><br><br><span class="token atrule key">dependencies</span><span class="token punctuation">:</span><br>  <span class="token atrule key">flutter</span><span class="token punctuation">:</span><br>    <span class="token atrule key">sdk</span><span class="token punctuation">:</span> flutter<br>  <span class="token atrule key">flutter_inappwebview</span><span class="token punctuation">:</span> ^5.3.2<br><br><span class="token atrule key">dev_dependencies</span><span class="token punctuation">:</span><br>  <span class="token atrule key">flutter_test</span><span class="token punctuation">:</span><br>    <span class="token atrule key">sdk</span><span class="token punctuation">:</span> flutter<br><br><span class="token atrule key">flutter</span><span class="token punctuation">:</span><br>  <span class="token atrule key">uses-material-design</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre><p>Make sure to get the packages again:</p><pre class="language-bash"><code class="language-bash">flutter packages get</code></pre><p>Now we need to create the file that will wrap the web component.</p><pre class="language-bash"><code class="language-bash"><span class="token class-name builtin">cd</span> lib<br><span class="token function">touch</span> web_component.dart<br><span class="token class-name builtin">cd</span> <span class="token punctuation">..</span></code></pre><p>Open <code>web_component.dart</code> and paste the following:</p><pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token string">'package:flutter_inappwebview/flutter_inappwebview.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">WebComponent</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token function">WebComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    Key key<span class="token punctuation">,</span><br>    <span class="token metadata symbol">@required</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><br>    <span class="token metadata symbol">@required</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bundle<span class="token punctuation">,</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>attributes <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>slot <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">final</span> String name<span class="token punctuation">,</span> bundle<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">&gt;</span> attributes<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> String slot<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> List<span class="token operator">&lt;</span>EventCallback<span class="token operator">&gt;</span> events<span class="token punctuation">;</span><br><br>  <span class="token metadata symbol">@override</span><br>  _WebComponentState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_WebComponentState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">_WebComponentState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>WebComponent<span class="token operator">&gt;</span> <span class="token punctuation">{</span><br>  InAppWebViewController controller<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>EventCallback<span class="token operator">&gt;&gt;</span> _events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  String <span class="token keyword">get</span> source <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token string">'''&lt;!DOCTYPE html&gt;<br>&lt;html lang="en"&gt;<br>  &lt;head&gt;<br>    &lt;meta charset="UTF-8" /&gt;<br>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;<br>    &lt;style&gt;<br>      body {<br>        padding: 0;<br>        margin: 0;<br>      }<br>      ${widget.name} {<br>        width: 100%;<br>        height: 100vh;<br>      }<br>    &lt;/style&gt;<br>  &lt;script type="module" crossorigin src="${widget.bundle}"&gt;&lt;/script&gt;<br>&lt;/head&gt;<br>  &lt;body&gt;<br>    &lt;${widget.name} ${widget.attributes.entries.map((e) =&gt; '${e.key}="${e.value}"').join(' ')}&gt;<br>      ${widget.slot}<br>    &lt;/${widget.name}&gt;<br>    &lt;script&gt;<br>    window.addEventListener("flutterInAppWebViewPlatformReady", (event) =&gt; {<br>      ${widget.events.join('\n')}<br>    });<br>    &lt;/script&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt; <br>'''</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">void</span> <span class="token function">_setup</span><span class="token punctuation">(</span>InAppWebViewController controller<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>controller <span class="token operator">=</span> controller<span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_setupEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">void</span> <span class="token function">_setupEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> event <span class="token keyword">in</span> _events<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      controller<span class="token punctuation">.</span><span class="token function">removeJavaScriptHandler</span><span class="token punctuation">(</span>handlerName<span class="token punctuation">:</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">final</span> event <span class="token keyword">in</span> widget<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token function">_addEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">void</span> <span class="token function">_addEvent</span><span class="token punctuation">(</span>EventCallback event<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    controller<span class="token punctuation">.</span><span class="token function">addJavaScriptHandler</span><span class="token punctuation">(</span><br>      handlerName<span class="token punctuation">:</span> event<span class="token punctuation">.</span>query<span class="token punctuation">,</span><br>      callback<span class="token punctuation">:</span> event<span class="token punctuation">.</span>onPressed<span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    _events<span class="token punctuation">[</span>event<span class="token punctuation">.</span>event<span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    _events<span class="token punctuation">[</span>event<span class="token punctuation">.</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token metadata symbol">@override</span><br>  <span class="token keyword">void</span> <span class="token function">didUpdateWidget</span><span class="token punctuation">(</span><span class="token keyword">covariant</span> WebComponent oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldWidget<span class="token punctuation">.</span>events <span class="token operator">!=</span> widget<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token function">_setupEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldWidget<span class="token punctuation">.</span>slot <span class="token operator">!=</span> widget<span class="token punctuation">.</span>slot <span class="token operator">||</span><br>        oldWidget<span class="token punctuation">.</span>bundle <span class="token operator">!=</span> widget<span class="token punctuation">.</span>bundle <span class="token operator">||</span><br>        oldWidget<span class="token punctuation">.</span>name <span class="token operator">!=</span> widget<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      controller<span class="token punctuation">.</span><span class="token function">loadData</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didUpdateWidget</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">InAppWebView</span><span class="token punctuation">(</span><br>      initialData<span class="token punctuation">:</span> <span class="token function">InAppWebViewInitialData</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> source<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      onWebViewCreated<span class="token punctuation">:</span> _setup<span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">EventCallback</span> <span class="token punctuation">{</span><br>  <span class="token function">EventCallback</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token metadata symbol">@required</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onPressed<span class="token punctuation">,</span><br>    <span class="token metadata symbol">@required</span> <span class="token keyword">this</span><span class="token punctuation">.</span>event<span class="token punctuation">,</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>query<span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">final</span> String query<span class="token punctuation">,</span> event<span class="token punctuation">;</span><br>  <span class="token keyword">final</span> <span class="token keyword">dynamic</span> <span class="token keyword">Function</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span><span class="token keyword">dynamic</span><span class="token operator">&gt;</span> args<span class="token punctuation">)</span> onPressed<span class="token punctuation">;</span><br><br>  <span class="token metadata symbol">@override</span><br>  String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> _source<span class="token punctuation">;</span><br><br>  String <span class="token keyword">get</span> _prefix <span class="token operator">=</span><span class="token operator">&gt;</span> query <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> query<span class="token punctuation">.</span>isNotEmpty<br>      <span class="token operator">?</span> <span class="token string">'document.querySelector("$query")'</span><br>      <span class="token punctuation">:</span> <span class="token string">'document.body'</span><span class="token punctuation">;</span><br><br>  String <span class="token keyword">get</span> _source <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><br>        <span class="token string">'$_prefix.addEventListener("$event", (e) =&gt; {'</span><span class="token punctuation">,</span><br>        <span class="token string">'  window.flutter_inappwebview.callHandler("$query", e);'</span><span class="token punctuation">,</span><br>        <span class="token string">'}, false);'</span><span class="token punctuation">,</span><br>      <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Open <code>main.dart</code> and paste it with th following:</p><pre class="language-dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">import</span> <span class="token string">'web_component.dart'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> WEBSITE_URL <span class="token operator">=</span> <span class="token string">'https://rodydavis.github.io/flutter_lit_example/'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> BUNDLE_PATH <span class="token operator">=</span> <span class="token string">'assets/main.js'</span><span class="token punctuation">;</span><br><br><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  WidgetsFlutterBinding<span class="token punctuation">.</span><span class="token function">ensureInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span><br>  <span class="token keyword">final</span> title <span class="token operator">=</span> <span class="token string">'Flutter Hybrid App'</span><span class="token punctuation">;</span><br>  <span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">MaterialApp</span><span class="token punctuation">(</span><br>      debugShowCheckedModeBanner<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      title<span class="token punctuation">:</span> title<span class="token punctuation">,</span><br>      theme<span class="token punctuation">:</span> <span class="token function">ThemeData</span><span class="token punctuation">(</span>primarySwatch<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>blue<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      home<span class="token punctuation">:</span> <span class="token function">MyHomePage</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> title<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">MyHomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span><br>  <span class="token function">MyHomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Key key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">final</span> String title<span class="token punctuation">;</span><br><br>  <span class="token metadata symbol">@override</span><br>  _MyHomePageState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_MyHomePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">class</span> <span class="token class-name">_MyHomePageState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>MyHomePage<span class="token operator">&gt;</span> <span class="token punctuation">{</span><br>  <span class="token metadata symbol">@override</span><br>  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span><br>      appBar<span class="token punctuation">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span><br>        title<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>      body<span class="token punctuation">:</span> <span class="token function">Builder</span><span class="token punctuation">(</span><br>        builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">WebComponent</span><span class="token punctuation">(</span><br>          name<span class="token punctuation">:</span> <span class="token string">'my-app'</span><span class="token punctuation">,</span><br>          bundle<span class="token punctuation">:</span> <span class="token string">'$WEBSITE_URL/$BUNDLE_PATH'</span><span class="token punctuation">,</span><br>          attributes<span class="token punctuation">:</span> <span class="token punctuation">{</span><br>            <span class="token string">'name'</span><span class="token punctuation">:</span> widget<span class="token punctuation">.</span>title<span class="token punctuation">,</span><br>          <span class="token punctuation">}</span><span class="token punctuation">,</span><br>          slot<span class="token punctuation">:</span> <span class="token string">'&lt;button id="my-button"&gt;Talk back!&lt;/button&gt;'</span><span class="token punctuation">,</span><br>          events<span class="token punctuation">:</span> <span class="token punctuation">[</span><br>            <span class="token function">EventCallback</span><span class="token punctuation">(</span><br>              event<span class="token punctuation">:</span> <span class="token string">'click'</span><span class="token punctuation">,</span><br>              query<span class="token punctuation">:</span> <span class="token string">'#my-button'</span><span class="token punctuation">,</span><br>              onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                ScaffoldMessenger<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><br>                    <span class="token punctuation">.</span><span class="token function">showSnackBar</span><span class="token punctuation">(</span><span class="token function">SnackBar</span><span class="token punctuation">(</span>content<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Clicked!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>              <span class="token punctuation">}</span><span class="token punctuation">,</span><br>            <span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token punctuation">]</span><span class="token punctuation">,</span><br>        <span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre><p>You will need to update <code>WEBSITE_URL</code> to have the url of the website where you will be deploying and <code>BUNDLE_URL</code> to the relative path to the js bundle.</p><p>This will ensure auto updates with a new version rolls out and the cache it stale. This will also allow for offline support after the first time it is downloaded.</p><h2 id="running">Running <a href="#running" class="direct-link">#</a></h2><p>Now we can run our application but it requires a few steps to get it all setup.</p><p>To test and build our web app locally we will use <a href="https://github.com/vitejs/vite">vite</a> and render the <code>index.html</code></p><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> i<br><span class="token function">npm</span> run dev</code></pre><p>You should see the following:</p><pre><code>vite v2.2.3 dev server running at:

Local:    http://localhost:3000/flutter_lit_example/
Network:  http://192.168.1.143:3000/flutter_lit_example/

ready in 311ms.
</code></pre><p>Wee can open the link <code>http://localhost:3000/flutter_lit_example/</code> to see our running web app and hot reload changes from <code>my-app.ts</code>.</p><p>If you want to learn more about lit you can read the docs <a href="https://lit.dev">here</a>.</p><p>Once you are happy with how it looks we can move on to flutter to wrap it in a native app. This will give us access to native code if we wanted to use the in app purchase api or push notifications.</p><p>Kill the terminal and run the following:</p><pre class="language-bash"><code class="language-bash">flutter packages get<br>flutter build ios<br>flutter build appbundle<br>flutter run</code></pre><p>This should select a running device or prompt you to select one. Now that it is running on the device you can see we have two way communication with the flutter app and the web component.</p><h2 id="conclusion">Conclusion <a href="#conclusion" class="direct-link">#</a></h2><p>If you want to find the source code you can check it out <a href="https://github.com/rodydavis/flutter_hybrid_template">here</a> otherwise thanks for reading and let me know if you have any questions!</p><h1></h1><p>Since you've made it this far, <a href="https://rodydavis.com/posts/flutter-and-lit/" on-click="share">sharing</a> this article on your favorite social media network would be highly appreciated ! For feedback, please <a href="https://twitter.com/rodydavis" rel="noopener" target="_blank">ping me on Twitter.</a></p><share-widget><button aria-label="Share" href="https://rodydavis.com/posts/flutter-and-lit/" on-click="share"><div></div></button></share-widget><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Lit and Flutter",
  "image": [],
  "author": "Rody Davis", 
  "genre": "https://schema.org/Code", 
  "publisher": {
    "@type": "Organization",
    "name": "Rody Davis",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/favicon/favicon-192x192.png?hash=2089033c93"
    }
  },
  "url": "https://rodydavis.com/posts/flutter-and-lit/",
  "mainEntityOfPage": "https://rodydavis.com/posts/flutter-and-lit/",
  "datePublished": "2021-05-05",
  "dateModified": "2021-05-07",
  "description": "In this article I will go over how to set up a Lit (web component) and use it inline in the flutter widget tree. TLDR You can find the final..."
}</script><p>Published <time datetime="2021-05-05">05 May 2021</time></p></article></main><footer><a href="/about/">Rody Davis</a></footer></body></html>