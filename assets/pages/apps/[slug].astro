---
import MainLayout from '../../components/MainLayout.astro';
import '../../components/app-details';

export async function getStaticPaths() {
 const allPosts = await Astro.fetchContent('../../data/apps/*.md');
  const sortedPosts = allPosts.sort((a, b) => {
    const aDate = new Date(a.date) as any;
    const bDate = new Date(b.date) as any;
    return bDate - aDate;
  });
  return sortedPosts.map(p => {
    const slug = p.file.pathname.split('/').pop().split('.').shift();
    return { 
        params: { slug },
        props: { post: p , slug},
    };
  });
}

const props = Astro.props;
const {Content} = props.post;
const title = props.post.title;
---

<MainLayout {title}>
    <app-details app={props.post}>
         <Content />
    </app-details>
</MainLayout>

